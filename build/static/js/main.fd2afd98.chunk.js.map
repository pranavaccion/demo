{"version":3,"sources":["components/VideoProvider/useSelectedParticipant/useSelectedParticipant.tsx","utils/index.ts","hooks/useLocalVideoToggle/useLocalVideoToggle.tsx","components/VideoProvider/AttachVisibilityHandler/AttachVisibilityHandler.tsx","constants.ts","hooks/useDevices/useDevices.tsx","components/VideoProvider/useRoom/useRoom.tsx","components/VideoProvider/index.tsx","components/VideoProvider/useLocalTracks/useLocalTracks.ts","components/VideoProvider/useScreenShareToggle/useScreenShareToggle.tsx","components/VideoProvider/useHandleRoomDisconnection/useHandleRoomDisconnection.ts","components/VideoProvider/useHandleTrackPublicationFailed/useHandleTrackPublicationFailed.ts","components/VideoProvider/useRestartAudioTrackOnDeviceChange/useRestartAudioTrackOnDeviceChange.ts","hooks/useVideoContext/useVideoContext.ts","components/Buttons/EndCallButton/EndCallButton.tsx","state/settings/settingsReducer.ts","state/useFirebaseAuth/useFirebaseAuth.ts","state/usePasscodeAuth/usePasscodeAuth.ts","state/index.tsx","state/useActiveSinkId/useActiveSinkId.ts","components/AboutDialog/AboutDialog.tsx","hooks/useIsTrackEnabled/useIsTrackEnabled.tsx","hooks/useMediaStreamTrack/useMediaStreamTrack.ts","components/AudioLevelIndicator/AudioLevelIndicator.tsx","components/DeviceSelectionDialog/AudioInputList/AudioInputList.tsx","components/DeviceSelectionDialog/AudioOutputList/AudioOutputList.tsx","components/VideoTrack/VideoTrack.tsx","hooks/useVideoTrackDimensions/useVideoTrackDimensions.tsx","components/DeviceSelectionDialog/VideoInputList/VideoInputList.tsx","components/DeviceSelectionDialog/DeviceSelectionDialog.tsx","icons/FlipCameraIcon.tsx","icons/InfoIconOutlined.tsx","icons/SettingsIcon.tsx","components/MenuBar/Menu/Menu.tsx","hooks/useFlipCameraToggle/useFlipCameraToggle.tsx","hooks/useRoomState/useRoomState.tsx","icons/MicOffIcon.tsx","components/Buttons/ToggleAudioButton/ToggleAudioButton.tsx","hooks/useLocalAudioToggle/useLocalAudioToggle.tsx","assets/icon_mic.png","icons/ChatIcon.tsx","components/ChatProvider/index.tsx","hooks/useChatContext/useChatContext.ts","components/Buttons/ToggleChatButton/ToggleChatButton.tsx","icons/VideoOffIcon.tsx","components/Buttons/ToggleVideoButton/ToggleVideoButton.tsx","assets/icon_video-camera.png","components/MenuBar/MenuBar.tsx","components/MobileTopMenuBar/MobileTopMenuBar.tsx","icons/AvatarIcon.tsx","components/LocalAudioLevelIndicator/LocalAudioLevelIndicator.tsx","components/PreJoinScreens/DeviceSelectionScreen/LocalVideoPreview/LocalVideoPreview.tsx","state/settings/renderDimensions.ts","components/ConnectionOptionsDialog/ConnectionOptionsDialog.tsx","components/PreJoinScreens/DeviceSelectionScreen/SettingsMenu/SettingsMenu.tsx","components/PreJoinScreens/DeviceSelectionScreen/DeviceSelectionScreen.tsx","components/IntroContainer/VideoLogo.tsx","components/IntroContainer/UserMenu/UserAvatar/UserAvatar.tsx","components/IntroContainer/UserMenu/UserMenu.tsx","components/IntroContainer/IntroContainer.tsx","assets/logo_TM2U.jpg","icons/ErrorIcon.tsx","icons/WarningIcon.tsx","components/Snackbar/Snackbar.tsx","components/PreJoinScreens/MediaErrorSnackbar/MediaErrorSnackbar.tsx","components/PreJoinScreens/RoomNameScreen/RoomNameScreen.tsx","components/PreJoinScreens/PreJoinScreens.tsx","components/ReconnectingNotification/ReconnectingNotification.tsx","icons/CloseIcon.tsx","assets/user.svg","assets/icon_file.png","components/ChatWindow/ChatWindowHeader/ChatWindowHeader.tsx","components/ChatWindow/ChatWindow.tsx","components/NetworkQualityLevel/NetworkQualityLevel.tsx","hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel.tsx","components/ParticipantInfo/PinIcon/PinIcon.tsx","icons/ScreenShareIcon.tsx","hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff.tsx","hooks/usePublications/usePublications.tsx","hooks/useTrack/useTrack.tsx","hooks/useParticipantIsReconnecting/useParticipantIsReconnecting.ts","components/ParticipantInfo/ParticipantInfo.tsx","components/AudioTrack/AudioTrack.tsx","components/Publication/Publication.tsx","components/ParticipantTracks/ParticipantTracks.tsx","components/Participant/Participant.tsx","hooks/useDominantSpeaker/useDominantSpeaker.tsx","hooks/useParticipants/useParticipants.tsx","hooks/useScreenShareParticipant/useScreenShareParticipant.tsx","hooks/useMainParticipant/useMainParticipant.tsx","components/ParticipantList/ParticipantList.tsx","components/MainParticipantInfo/MainParticipantInfo.tsx","components/MainParticipant/MainParticipant.tsx","components/Room/Room.tsx","App.tsx","hooks/useHeight/useHeight.ts","components/ErrorDialog/ErrorDialog.tsx","components/ErrorDialog/enhanceMessage.ts","components/LoginPage/google-logo.svg","components/LoginPage/LoginPage.tsx","components/PrivateRoute/PrivateRoute.tsx","theme.ts","utils/useConnectionOptions/useConnectionOptions.ts","components/UnsupportedBrowserWarning/UnsupportedBrowserWarning.tsx","index.tsx"],"names":["selectedParticipantContext","createContext","useSelectedParticipant","useContext","SelectedParticipantProvider","room","children","useState","selectedParticipant","_setSelectedParticipant","useEffect","onDisconnect","handleParticipantDisconnected","participant","prevParticipant","on","off","Provider","value","isMobile","navigator","userAgent","test","removeUndefineds","obj","isPlainObject","target","key","val","useLocalVideoToggle","useVideoContext","localTracks","getLocalVideoTrack","removeLocalVideoTrack","onError","localParticipant","videoTrack","find","track","name","includes","isPublishing","setIspublishing","toggleVideoEnabled","useCallback","localTrackPublication","unpublishTrack","emit","then","publishTrack","priority","catch","finally","AttachVisibilityHandler","isVideoEnabled","shouldRepublishVideoOnForeground","useRef","handleVisibilityChange","document","visibilityState","current","addEventListener","removeEventListener","DEFAULT_VIDEO_CONSTRAINTS","width","height","frameRate","SELECTED_AUDIO_INPUT_KEY","SELECTED_AUDIO_OUTPUT_KEY","SELECTED_VIDEO_INPUT_KEY","useDevices","devices","setDevices","getDevices","mediaDevices","enumerateDevices","newDevices","audioInputDevices","filter","device","kind","videoInputDevices","audioOutputDevices","hasAudioInputDevices","length","hasVideoInputDevices","window","TwilioVideo","Video","VideoContext","VideoProvider","options","onErrorCallback","error","console","log","message","audioTrack","setAudioTrack","setVideoTrack","isAcquiringLocalTracks","setIsAcquiringLocalTracks","getLocalAudioTrack","deviceId","exact","createLocalAudioTrack","newTrack","selectedVideoDeviceId","localStorage","getItem","hasSelectedVideoDevice","some","Date","now","createLocalVideoTrack","removeLocalAudioTrack","stop","undefined","getAudioAndVideoTracks","Promise","resolve","selectedAudioDeviceId","hasSelectedAudioDevice","localTrackConstraints","video","audio","createLocalTracks","tracks","newVideoTrack","newAudioTrack","useLocalTracks","setRoom","isConnecting","setIsConnecting","optionsRef","connect","token","newRoom","disconnect","setMaxListeners","once","setTimeout","twilioRoom","videoTracks","forEach","publication","setPriority","useRoom","isSharing","setIsSharing","stopScreenShareRef","shareScreen","getDisplayMedia","stream","getTracks","trackPublication","onended","toggleScreenShare","useScreenShareToggle","isSharingScreen","onDisconnected","_","useHandleRoomDisconnection","useHandleTrackPublicationFailed","handleDeviceChange","mediaStreamTrack","readyState","restart","useRestartAudioTrackOnDeviceChange","context","Error","useStyles","makeStyles","theme","createStyles","button","background","brand","color","EndCallButton","props","classes","Button","onClick","className","clsx","data-cy-disconnect","initialSettings","trackSwitchOffMode","dominantSpeakerPriority","bandwidthProfileMode","maxTracks","maxAudioBitrate","renderDimensionLow","renderDimensionStandard","renderDimensionHigh","inputLabels","setting","settingsReducer","state","action","firebaseConfig","apiKey","process","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","fetchToken","passcode","create_room","create_conversation","REACT_APP_DISABLE_TWILIO_CONVERSATIONS","fetch","method","headers","body","JSON","stringify","user_identity","room_name","verifyPasscode","res","a","json","jsonResponse","status","isValid","ok","getErrorMessage","usePasscodeAuth","history","useHistory","user","setUser","isAuthReady","setIsAuthReady","roomType","setRoomType","getToken","errorMessage","statusText","room_type","match","location","search","sessionStorage","getPasscode","verification","setItem","replace","pathname","signIn","signOut","removeItem","StateContext","AppStateProvider","setError","isFetching","setIsFetching","activeSinkId","_setActiveSinkId","setActiveSinkId","sinkId","selectedSinkId","useActiveSinkId","useReducer","settings","dispatchSetting","contextValue","REACT_APP_SET_AUTH","Headers","getIdToken","idToken","set","endpoint","REACT_APP_TOKEN_ENDPOINT","firebase","onAuthStateChanged","newUser","provider","GoogleAuthProvider","addScope","signInWithPopup","useFirebaseAuth","err","reject","useAppState","AboutDialog","open","onClose","Dialog","fullWidth","maxWidth","DialogTitle","Divider","DialogContent","DialogContentText","String","isSupported","version","appVersion","REACT_APP_GIT_TAG","REACT_APP_GIT_COMMIT","DialogActions","variant","autoFocus","useIsTrackEnabled","isEnabled","setIsEnabled","setEnabled","setDisabled","useMediaStreamTrack","setMediaStreamTrack","handleStarted","audioContext","clipId","AudioContext","webkitAudioContext","initializeAnalyser","audioSource","createMediaStreamSource","analyser","createAnalyser","smoothingTimeConstant","fftSize","AudioLevelIndicator","SVGRectRef","setAnalyser","isTrackEnabled","newMediaStream","MediaStream","clone","stopAllMediaStreamTracks","reinitializeAnalyser","SVGClipElement","sampleArray","Uint8Array","frequencyBinCount","timer","interval","getByteFrequencyData","values","i","volume","Math","min","max","log10","setAttribute","clipPathId","xmlns","viewBox","data-test-audio-indicator","id","ref","x","y","fill","fillRule","transform","clipPath","rx","ry","strokeWidth","d","data-test-audio-mute-icon","React","memo","AudioInputList","localAudioTrack","localAudioInputDeviceId","getSettings","Typography","gutterBottom","Grid","container","alignItems","justify","FormControl","Select","onChange","e","newDeviceId","map","MenuItem","label","AudioOutputList","activeOutputLabel","styled","VideoTrack","isLocal","dimensions","setDimensions","handleDimensionsChanged","useVideoTrackDimensions","isPortrait","el","muted","attach","detach","isFrontFacing","facingMode","style","objectFit","preview","maxHeight","margin","VideoInputList","localVideoTrack","storedLocalVideoDeviceId","setStoredLocalVideoDeviceId","localVideoInputDeviceId","minHeight","breakpoints","down","float","paper","headline","marginBottom","fontSize","listSection","DeviceSelectionDialog","FlipCameraIcon","InfoIconOutlined","SettingsIcon","clipRule","IconContainer","display","justifyContent","marginRight","Menu","useMediaQuery","aboutOpen","setAboutOpen","menuOpen","setMenuOpen","settingsOpen","setSettingsOpen","anchorRef","supportsFacingMode","setSupportsFacingMode","toggleFacingMode","newFacingMode","flipCameraDisabled","flipCameraSupported","useFlipCameraToggle","isOpen","buttonClassName","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","disabled","useRoomState","setState","setRoomState","MicOffIcon","ToggleAudioButton","disable","enable","useLocalAudioToggle","isAudioEnabled","toggleAudioEnabled","hasAudioTrack","startIcon","src","alt","data-cy-audio-toggle","ChatIcon","ChatContext","ChatProvider","isChatWindowOpenRef","isChatWindowOpen","setIsChatWindowOpen","conversation","setConversation","messages","setMessages","hasUnreadMessages","setHasUnreadMessages","chatClient","setChatClient","Client","create","client","handleMessageAdded","oldMessages","getMessages","newMessages","items","getConversationByUniqueName","sid","newConversation","chatConversation","useChatContext","iconContainer","position","circle","backgroundColor","borderRadius","top","left","opacity","transition","ANIMATION_DURATION","ring","border","animateRing","animation","animationIterationCount","ToggleChatButton","shouldAnimate","setShouldAnimate","handleNewMessage","data-cy-chat-button","VideoOffIcon","ToggleVideoButton","lastClickTimeRef","toggleVideo","bottom","right","footerHeight","padding","zIndex","mobileFooterHeight","screenShareBanner","hideMobile","MenuBar","isReconnecting","Hidden","smDown","flex","item","paddingLeft","mobileTopBarHeight","endCallButton","settingsButton","minWidth","MobileTopMenuBar","AvatarIcon","cx","cy","r","strokeLinejoin","LocalAudioLevelIndicator","overflow","paddingTop","innerContainer","identityContainer","identity","avatarContainer","LocalVideoPreview","component","RenderDimensions","resolution","getResolution","formControl","withDefault","RenderDimensionItems","ConnectionOptionsDialog","isDisabled","handleChange","handleNumberChange","spacing","xs","hidden","sm","InputLabel","TextField","placeholder","SettingsMenu","mobileButtonClass","deviceSettingsOpen","setDeviceSettingsOpen","connectionSettingsOpen","setConnectionSettingsOpen","getContentAnchorEl","marginTop","deviceButton","localPreviewContainer","paddingRight","joinButtons","flexDirection","mobileButtonBar","mobileButton","DeviceSelectionScreen","roomName","setStep","chatConnect","videoConnect","disableButtons","direction","CircularProgress","fontWeight","md","mdUp","Steps","roomNameStep","data-cy-join-now","VideoLogo","red","UserAvatar","displayName","photoURL","Avatar","split","text","join","toUpperCase","userContainer","userButton","logoutLink","cursor","UserMenu","handleSignOut","Link","boxShadow","swooshContainer","backgroundSize","backgroundPositionY","logoContainer","textAlign","twilioLogo","content","title","IntroContainer","useLocation","ErrorIcon","stroke","WarningIcon","contentContainer","borderLeft","warning","Snackbar","handleClose","reason","IconButton","size","aria-label","MediaErrorSnackbar","isSnackbarDismissed","setIsSnackbarDismissed","isSnackbarOpen","Boolean","hasAudio","hasVideo","getSnackbarContent","inputContainer","textFieldContainer","continueButton","RoomNameScreen","setName","setRoomName","handleSubmit","hasUsername","onSubmit","shrink","htmlFor","event","autoCapitalize","type","PreJoinScreens","URLRoomName","useParams","step","mediaError","setMediaError","deviceSelectionStep","dir","preventDefault","origin","replaceState","encodeURI","ReconnectingNotification","roomState","CloseIcon","closeChatWindow","profile","imag","imag1","root","heading","typography","pxToRem","flexShrink","secondaryHeading","palette","secondary","topH","statusBar","verticalAlign","actionsContainer","resetContainer","scrollableView","overflowY","mainProfileContiner","getStepContent","ChatWindowHeader","activeStep","setActiveStep","steps","handleNext","prevActiveStep","handleBack","handleReset","expanded","setExpanded","panel","isExpanded","alignSelf","logo","Accordion","AccordionSummary","expandIcon","aria-controls","historylogo","AccordionDetails","Stepper","orientation","index","Step","StepLabel","StepContent","Paper","square","elevation","chatWindowContainer","hide","ChatWindow","outerContainer","borderRight","BARS_ARRAY","NetworkQualityLevel","networkQualityLevel","setNetworkQualityLevel","handleNewtorkQualityLevelChange","newNetworkQualityLevel","useParticipantNetworkQualityLevel","level","PinIcon","Tooltip","placement","SvgIcon","boxSizing","ScreenShareIcon","useIsTrackSwitchedOff","isSwitchedOff","setIsSwitchedOff","handleSwitchedOff","handleSwitchedOn","usePublications","publications","setPublications","Array","from","publicationAdded","prevPublications","publicationRemoved","p","useTrack","setTrack","removeTrack","useParticipantIsReconnecting","setIsReconnecting","handleReconnecting","handleReconnected","participantBorderWidth","sidebarMobileHeight","infoContainer","reconnectingContainer","screenShareIconContainer","infoRowBottom","typeography","hideParticipant","cursorPointer","ParticipantInfo","isSelected","isLocalParticipant","audioPublication","videoPublication","trackName","isScreenShareEnabled","isVideoSwitchedOff","isParticipantReconnecting","data-cy-participant","AudioTrack","audioEl","appendChild","remove","setSinkId","Publication","videoOnly","videoPriority","ParticipantTracks","filteredPublications","enableScreenShare","Participant","useDominantSpeaker","dominantSpeaker","setDominantSpeaker","handleDominantSpeakerChanged","newDominantSpeaker","prevDominantSpeaker","useParticipants","participants","setParticipants","prevParticipants","participantConnected","participantDisconnected","useScreenShareParticipant","screenShareParticipant","setScreenShareParticipant","updateScreenShareParticipant","concat","useMainParticipant","gridArea","overflowX","transparentBackground","scrollContainer","innerScrollContainer","sidebarWidth","sidebarMobilePadding","ParticipantList","setSelectedParticipant","mainParticipant","isRemoteParticipantScreenSharing","marginLeft","MainParticipantInfo","screenSharePublication","data-cy-main-participant","MainParticipant","totalMobileSidebarHeight","gridTemplateColumns","gridTemplateRows","chatWindowOpen","chatWindowWidth","Room","Container","Main","paddingBottom","App","innerHeight","visualViewport","scale","setHeight","onResize","useHeight","ErrorDialog","dismissError","code","enhancedMessage","enhanceMessage","_extends","Object","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref3","filterUnits","dx","dy","result","stdDeviation","_ref4","SvgGoogleLogo","_ref","svgRef","titleId","xmlnsXlink","ForwardRef","googleButton","textTransform","passcodeContainer","submitButton","LoginPage","setPasscode","authError","setAuthError","isAuthEnabled","login","PrivateRoute","rest","renderChildren","render","to","defaultTheme","createMuiTheme","overrides","MuiCssBaseline","MuiButton","transitions","duration","short","contained","outlinedPrimary","MuiTypography","body1","MuiInputBase","MuiSelect","MuiDialogActions","MuiTextField","MuiInputLabel","MuiOutlinedInput","notchedOutline","borderColor","fontFamily","primary","main","useConnectionOptions","connectionOptions","bandwidthProfile","mode","renderDimensions","low","standard","high","Number","networkQuality","local","remote","preferredVideoCodecs","codec","simulcast","environment","REACT_APP_TWILIO_ENVIRONMENT","maxSubscriptionBitrate","wsServer","UnsupportedBrowserWarning","href","rel","VideoApp","ReactDOM","CssBaseline","path","getElementById"],"mappings":"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","file":"static/js/main.fd2afd98.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { Participant, Room } from 'twilio-video';\n\ntype selectedParticipantContextType = [Participant | null, (participant: Participant) => void];\n\nexport const selectedParticipantContext = createContext<selectedParticipantContextType>(null!);\n\nexport default function useSelectedParticipant() {\n  const [selectedParticipant, setSelectedParticipant] = useContext(selectedParticipantContext);\n  return [selectedParticipant, setSelectedParticipant] as const;\n}\n\ntype SelectedParticipantProviderProps = {\n  room: Room | null;\n  children: React.ReactNode;\n};\n\nexport function SelectedParticipantProvider({ room, children }: SelectedParticipantProviderProps) {\n  const [selectedParticipant, _setSelectedParticipant] = useState<Participant | null>(null);\n  const setSelectedParticipant = (participant: Participant) =>\n    _setSelectedParticipant(prevParticipant => (prevParticipant === participant ? null : participant));\n\n  useEffect(() => {\n    if (room) {\n      const onDisconnect = () => _setSelectedParticipant(null);\n      const handleParticipantDisconnected = (participant: Participant) =>\n        _setSelectedParticipant(prevParticipant => (prevParticipant === participant ? null : prevParticipant));\n\n      room.on('disconnected', onDisconnect);\n      room.on('participantDisconnected', handleParticipantDisconnected);\n      return () => {\n        room.off('disconnected', onDisconnect);\n        room.off('participantDisconnected', handleParticipantDisconnected);\n      };\n    }\n  }, [room]);\n\n  return (\n    <selectedParticipantContext.Provider value={[selectedParticipant, setSelectedParticipant]}>\n      {children}\n    </selectedParticipantContext.Provider>\n  );\n}\n","import isPlainObject from 'is-plain-object';\n\nexport const isMobile = (() => {\n  if (typeof navigator === 'undefined' || typeof navigator.userAgent !== 'string') {\n    return false;\n  }\n  return /Mobile/.test(navigator.userAgent);\n})();\n\n// Recursively removes any object keys with a value of undefined\nexport function removeUndefineds<T>(obj: T): T {\n  if (!isPlainObject(obj)) return obj;\n\n  const target: { [name: string]: any } = {};\n\n  for (const key in obj) {\n    const val = obj[key];\n    if (typeof val !== 'undefined') {\n      target[key] = removeUndefineds(val);\n    }\n  }\n\n  return target as T;\n}\n","import { LocalVideoTrack } from 'twilio-video';\nimport { useCallback, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useLocalVideoToggle() {\n  const { room, localTracks, getLocalVideoTrack, removeLocalVideoTrack, onError } = useVideoContext();\n  const localParticipant = room?.localParticipant;\n  const videoTrack = localTracks.find(track => track.name.includes('camera')) as LocalVideoTrack;\n  const [isPublishing, setIspublishing] = useState(false);\n\n  const toggleVideoEnabled = useCallback(() => {\n    if (!isPublishing) {\n      if (videoTrack) {\n        const localTrackPublication = localParticipant?.unpublishTrack(videoTrack);\n        // TODO: remove when SDK implements this event. See: https://issues.corp.twilio.com/browse/JSDK-2592\n        localParticipant?.emit('trackUnpublished', localTrackPublication);\n        removeLocalVideoTrack();\n      } else {\n        setIspublishing(true);\n        getLocalVideoTrack()\n          .then((track: LocalVideoTrack) => localParticipant?.publishTrack(track, { priority: 'low' }))\n          .catch(onError)\n          .finally(() => setIspublishing(false));\n      }\n    }\n  }, [videoTrack, localParticipant, getLocalVideoTrack, isPublishing, onError, removeLocalVideoTrack]);\n\n  return [!!videoTrack, toggleVideoEnabled] as const;\n}\n","import { isMobile } from '../../../utils';\nimport { useEffect, useRef } from 'react';\nimport useLocalVideoToggle from '../../../hooks/useLocalVideoToggle/useLocalVideoToggle';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\n/* \n  This component adds a visibilitychange handler to the document when\n  the user is using a mobile device. When the handler detects that\n  the browser has been backgrounded, it unpublishes the users local\n  video track. The browser cannot send video to the room when it has\n  been backgrounded, so unpublishing the track stops video capture\n  on the device, and triggers a UI update for all other participants\n  to show that this user's video track has been turned off.\n*/\n\nexport default function AttachVisibilityHandler() {\n  const { room } = useVideoContext();\n  const [isVideoEnabled, toggleVideoEnabled] = useLocalVideoToggle();\n  const shouldRepublishVideoOnForeground = useRef(false);\n\n  useEffect(() => {\n    if (room && isMobile) {\n      const handleVisibilityChange = () => {\n        // We don't need to unpublish the local video track if it has already been unpublished\n        if (document.visibilityState === 'hidden' && isVideoEnabled) {\n          shouldRepublishVideoOnForeground.current = true;\n          toggleVideoEnabled();\n\n          // Don't publish the local video track if it wasn't published before the app was backgrounded\n        } else if (shouldRepublishVideoOnForeground.current) {\n          shouldRepublishVideoOnForeground.current = false;\n          toggleVideoEnabled();\n        }\n      };\n\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      return () => {\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n      };\n    }\n  }, [isVideoEnabled, room, toggleVideoEnabled]);\n\n  return null;\n}\n","export const DEFAULT_VIDEO_CONSTRAINTS: MediaStreamConstraints['video'] = {\n  width: 1280,\n  height: 720,\n  frameRate: 24,\n};\n\n// These are used to store the selected media devices in localStorage\nexport const SELECTED_AUDIO_INPUT_KEY = 'TwilioVideoApp-selectedAudioInput';\nexport const SELECTED_AUDIO_OUTPUT_KEY = 'TwilioVideoApp-selectedAudioOutput';\nexport const SELECTED_VIDEO_INPUT_KEY = 'TwilioVideoApp-selectedVideoInput';\n","import { useState, useEffect } from 'react';\n\nexport default function useDevices() {\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\n\n  useEffect(() => {\n    const getDevices = () => navigator.mediaDevices.enumerateDevices().then(newDevices => setDevices(newDevices));\n    navigator.mediaDevices.addEventListener('devicechange', getDevices);\n    getDevices();\n\n    return () => {\n      navigator.mediaDevices.removeEventListener('devicechange', getDevices);\n    };\n  }, []);\n\n  return {\n    audioInputDevices: devices.filter(device => device.kind === 'audioinput'),\n    videoInputDevices: devices.filter(device => device.kind === 'videoinput'),\n    audioOutputDevices: devices.filter(device => device.kind === 'audiooutput'),\n    hasAudioInputDevices: devices.filter(device => device.kind === 'audioinput').length > 0,\n    hasVideoInputDevices: devices.filter(device => device.kind === 'videoinput').length > 0,\n  };\n}\n","import { Callback } from '../../../types';\nimport { isMobile } from '../../../utils';\nimport Video, { ConnectOptions, LocalTrack, Room } from 'twilio-video';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\n// @ts-ignore\nwindow.TwilioVideo = Video;\n\nexport default function useRoom(localTracks: LocalTrack[], onError: Callback, options?: ConnectOptions) {\n  const [room, setRoom] = useState<Room | null>(null);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const optionsRef = useRef(options);\n\n  useEffect(() => {\n    // This allows the connect function to always access the most recent version of the options object. This allows us to\n    // reliably use the connect function at any time.\n    optionsRef.current = options;\n  }, [options]);\n\n  const connect = useCallback(\n    token => {\n      setIsConnecting(true);\n      return Video.connect(token, { ...optionsRef.current, tracks: localTracks }).then(\n        newRoom => {\n          setRoom(newRoom);\n          const disconnect = () => newRoom.disconnect();\n\n          // This app can add up to 13 'participantDisconnected' listeners to the room object, which can trigger\n          // a warning from the EventEmitter object. Here we increase the max listeners to suppress the warning.\n          newRoom.setMaxListeners(15);\n\n          newRoom.once('disconnected', () => {\n            // Reset the room only after all other `disconnected` listeners have been called.\n            setTimeout(() => setRoom(null));\n            window.removeEventListener('beforeunload', disconnect);\n\n            if (isMobile) {\n              window.removeEventListener('pagehide', disconnect);\n            }\n          });\n\n          // @ts-ignore\n          window.twilioRoom = newRoom;\n\n          newRoom.localParticipant.videoTracks.forEach(publication =>\n            // All video tracks are published with 'low' priority because the video track\n            // that is displayed in the 'MainParticipant' component will have it's priority\n            // set to 'high' via track.setPriority()\n            publication.setPriority('low')\n          );\n\n          setIsConnecting(false);\n\n          // Add a listener to disconnect from the room when a user closes their browser\n          window.addEventListener('beforeunload', disconnect);\n\n          if (isMobile) {\n            // Add a listener to disconnect from the room when a mobile user closes their browser\n            window.addEventListener('pagehide', disconnect);\n          }\n        },\n        error => {\n          onError(error);\n          setIsConnecting(false);\n        }\n      );\n    },\n    [localTracks, onError]\n  );\n\n  return { room, isConnecting, connect };\n}\n","import React, { createContext, ReactNode, useCallback } from 'react';\nimport { CreateLocalTrackOptions, ConnectOptions, LocalAudioTrack, LocalVideoTrack, Room } from 'twilio-video';\nimport { ErrorCallback } from '../../types';\nimport { SelectedParticipantProvider } from './useSelectedParticipant/useSelectedParticipant';\n\nimport AttachVisibilityHandler from './AttachVisibilityHandler/AttachVisibilityHandler';\nimport useHandleRoomDisconnection from './useHandleRoomDisconnection/useHandleRoomDisconnection';\nimport useHandleTrackPublicationFailed from './useHandleTrackPublicationFailed/useHandleTrackPublicationFailed';\nimport useLocalTracks from './useLocalTracks/useLocalTracks';\nimport useRestartAudioTrackOnDeviceChange from './useRestartAudioTrackOnDeviceChange/useRestartAudioTrackOnDeviceChange';\nimport useRoom from './useRoom/useRoom';\nimport useScreenShareToggle from './useScreenShareToggle/useScreenShareToggle';\n\n/*\n *  The hooks used by the VideoProvider component are different than the hooks found in the 'hooks/' directory. The hooks\n *  in the 'hooks/' directory can be used anywhere in a video application, and they can be used any number of times.\n *  the hooks in the 'VideoProvider/' directory are intended to be used by the VideoProvider component only. Using these hooks\n *  elsewhere in the application may cause problems as these hooks should not be used more than once in an application.\n */\n\nexport interface IVideoContext {\n  room: Room | null;\n  localTracks: (LocalAudioTrack | LocalVideoTrack)[];\n  isConnecting: boolean;\n  connect: (token: string) => Promise<void>;\n  onError: ErrorCallback;\n  getLocalVideoTrack: (newOptions?: CreateLocalTrackOptions) => Promise<LocalVideoTrack>;\n  getLocalAudioTrack: (deviceId?: string) => Promise<LocalAudioTrack>;\n  isAcquiringLocalTracks: boolean;\n  removeLocalVideoTrack: () => void;\n  isSharingScreen: boolean;\n  toggleScreenShare: () => void;\n  getAudioAndVideoTracks: () => Promise<void>;\n}\n\nexport const VideoContext = createContext<IVideoContext>(null!);\n\ninterface VideoProviderProps {\n  options?: ConnectOptions;\n  onError: ErrorCallback;\n  children: ReactNode;\n}\n\nexport function VideoProvider({ options, children, onError = () => {} }: VideoProviderProps) {\n  const onErrorCallback: ErrorCallback = useCallback(\n    error => {\n      console.log(`ERROR: ${error.message}`, error);\n      onError(error);\n    },\n    [onError]\n  );\n\n  const {\n    localTracks,\n    getLocalVideoTrack,\n    getLocalAudioTrack,\n    isAcquiringLocalTracks,\n    removeLocalAudioTrack,\n    removeLocalVideoTrack,\n    getAudioAndVideoTracks,\n  } = useLocalTracks();\n  const { room, isConnecting, connect } = useRoom(localTracks, onErrorCallback, options);\n\n  const [isSharingScreen, toggleScreenShare] = useScreenShareToggle(room, onError);\n\n  // Register callback functions to be called on room disconnect.\n  useHandleRoomDisconnection(\n    room,\n    onError,\n    removeLocalAudioTrack,\n    removeLocalVideoTrack,\n    isSharingScreen,\n    toggleScreenShare\n  );\n  useHandleTrackPublicationFailed(room, onError);\n  useRestartAudioTrackOnDeviceChange(localTracks);\n\n  return (\n    <VideoContext.Provider\n      value={{\n        room,\n        localTracks,\n        isConnecting,\n        onError: onErrorCallback,\n        getLocalVideoTrack,\n        getLocalAudioTrack,\n        connect,\n        isAcquiringLocalTracks,\n        removeLocalVideoTrack,\n        isSharingScreen,\n        toggleScreenShare,\n        getAudioAndVideoTracks,\n      }}\n    >\n      <SelectedParticipantProvider room={room}>{children}</SelectedParticipantProvider>\n      {/* \n        The AttachVisibilityHandler component is using the useLocalVideoToggle hook\n        which must be used within the VideoContext Provider.\n      */}\n      <AttachVisibilityHandler />\n    </VideoContext.Provider>\n  );\n}\n","import { DEFAULT_VIDEO_CONSTRAINTS, SELECTED_AUDIO_INPUT_KEY, SELECTED_VIDEO_INPUT_KEY } from '../../../constants';\nimport { useCallback, useState } from 'react';\nimport Video, { LocalVideoTrack, LocalAudioTrack, CreateLocalTrackOptions } from 'twilio-video';\nimport useDevices from '../../../hooks/useDevices/useDevices';\n\nexport default function useLocalTracks() {\n  const [audioTrack, setAudioTrack] = useState<LocalAudioTrack>();\n  const [videoTrack, setVideoTrack] = useState<LocalVideoTrack>();\n  const [isAcquiringLocalTracks, setIsAcquiringLocalTracks] = useState(false);\n  const { audioInputDevices, videoInputDevices, hasAudioInputDevices, hasVideoInputDevices } = useDevices();\n\n  const getLocalAudioTrack = useCallback((deviceId?: string) => {\n    const options: CreateLocalTrackOptions = {};\n\n    if (deviceId) {\n      options.deviceId = { exact: deviceId };\n    }\n\n    return Video.createLocalAudioTrack(options).then(newTrack => {\n      setAudioTrack(newTrack);\n      return newTrack;\n    });\n  }, []);\n\n  const getLocalVideoTrack = useCallback(() => {\n    const selectedVideoDeviceId = window.localStorage.getItem(SELECTED_VIDEO_INPUT_KEY);\n\n    const hasSelectedVideoDevice = videoInputDevices.some(\n      device => selectedVideoDeviceId && device.deviceId === selectedVideoDeviceId\n    );\n\n    const options: CreateLocalTrackOptions = {\n      ...(DEFAULT_VIDEO_CONSTRAINTS as {}),\n      name: `camera-${Date.now()}`,\n      ...(hasSelectedVideoDevice && { deviceId: { exact: selectedVideoDeviceId! } }),\n    };\n\n    return Video.createLocalVideoTrack(options).then(newTrack => {\n      setVideoTrack(newTrack);\n      return newTrack;\n    });\n  }, [videoInputDevices]);\n\n  const removeLocalAudioTrack = useCallback(() => {\n    if (audioTrack) {\n      audioTrack.stop();\n      setAudioTrack(undefined);\n    }\n  }, [audioTrack]);\n\n  const removeLocalVideoTrack = useCallback(() => {\n    if (videoTrack) {\n      videoTrack.stop();\n      setVideoTrack(undefined);\n    }\n  }, [videoTrack]);\n\n  const getAudioAndVideoTracks = useCallback(() => {\n    if (!hasAudioInputDevices && !hasVideoInputDevices) return Promise.resolve();\n    if (isAcquiringLocalTracks || audioTrack || videoTrack) return Promise.resolve();\n\n    setIsAcquiringLocalTracks(true);\n\n    const selectedAudioDeviceId = window.localStorage.getItem(SELECTED_AUDIO_INPUT_KEY);\n    const selectedVideoDeviceId = window.localStorage.getItem(SELECTED_VIDEO_INPUT_KEY);\n\n    const hasSelectedAudioDevice = audioInputDevices.some(\n      device => selectedAudioDeviceId && device.deviceId === selectedAudioDeviceId\n    );\n    const hasSelectedVideoDevice = videoInputDevices.some(\n      device => selectedVideoDeviceId && device.deviceId === selectedVideoDeviceId\n    );\n\n    const localTrackConstraints = {\n      video: hasVideoInputDevices && {\n        ...(DEFAULT_VIDEO_CONSTRAINTS as {}),\n        name: `camera-${Date.now()}`,\n        ...(hasSelectedVideoDevice && { deviceId: { exact: selectedVideoDeviceId! } }),\n      },\n      audio: hasSelectedAudioDevice ? { deviceId: { exact: selectedAudioDeviceId! } } : hasAudioInputDevices,\n    };\n\n    return Video.createLocalTracks(localTrackConstraints)\n      .then(tracks => {\n        const newVideoTrack = tracks.find(track => track.kind === 'video');\n        const newAudioTrack = tracks.find(track => track.kind === 'audio');\n        if (newVideoTrack) {\n          setVideoTrack(newVideoTrack as LocalVideoTrack);\n        }\n        if (newAudioTrack) {\n          setAudioTrack(newAudioTrack as LocalAudioTrack);\n        }\n      })\n      .finally(() => setIsAcquiringLocalTracks(false));\n  }, [\n    hasAudioInputDevices,\n    hasVideoInputDevices,\n    audioTrack,\n    videoTrack,\n    audioInputDevices,\n    videoInputDevices,\n    isAcquiringLocalTracks,\n  ]);\n\n  const localTracks = [audioTrack, videoTrack].filter(track => track !== undefined) as (\n    | LocalAudioTrack\n    | LocalVideoTrack\n  )[];\n\n  return {\n    localTracks,\n    getLocalVideoTrack,\n    getLocalAudioTrack,\n    isAcquiringLocalTracks,\n    removeLocalAudioTrack,\n    removeLocalVideoTrack,\n    getAudioAndVideoTracks,\n  };\n}\n","import { useState, useCallback, useRef } from 'react';\nimport { LogLevels, Track, Room } from 'twilio-video';\nimport { ErrorCallback } from '../../../types';\n\ninterface MediaStreamTrackPublishOptions {\n  name?: string;\n  priority: Track.Priority;\n  logLevel: LogLevels;\n}\n\nexport default function useScreenShareToggle(room: Room | null, onError: ErrorCallback) {\n  const [isSharing, setIsSharing] = useState(false);\n  const stopScreenShareRef = useRef<() => void>(null!);\n\n  const shareScreen = useCallback(() => {\n    navigator.mediaDevices\n      .getDisplayMedia({\n        audio: false,\n        video: {\n          frameRate: 10,\n          height: 1080,\n          width: 1920,\n        },\n      })\n      .then(stream => {\n        const track = stream.getTracks()[0];\n\n        // All video tracks are published with 'low' priority. This works because the video\n        // track that is displayed in the 'MainParticipant' component will have it's priority\n        // set to 'high' via track.setPriority()\n        room!.localParticipant\n          .publishTrack(track, {\n            name: 'screen', // Tracks can be named to easily find them later\n            priority: 'low', // Priority is set to high by the subscriber when the video track is rendered\n          } as MediaStreamTrackPublishOptions)\n          .then(trackPublication => {\n            stopScreenShareRef.current = () => {\n              room!.localParticipant.unpublishTrack(track);\n              // TODO: remove this if the SDK is updated to emit this event\n              room!.localParticipant.emit('trackUnpublished', trackPublication);\n              track.stop();\n              setIsSharing(false);\n            };\n\n            track.onended = stopScreenShareRef.current;\n            setIsSharing(true);\n          })\n          .catch(onError);\n      })\n      .catch(error => {\n        // Don't display an error if the user closes the screen share dialog\n        if (error.name !== 'AbortError' && error.name !== 'NotAllowedError') {\n          onError(error);\n        }\n      });\n  }, [room, onError]);\n\n  const toggleScreenShare = useCallback(() => {\n    if (room) {\n      !isSharing ? shareScreen() : stopScreenShareRef.current();\n    }\n  }, [isSharing, shareScreen, stopScreenShareRef, room]);\n\n  return [isSharing, toggleScreenShare] as const;\n}\n","import { Room, TwilioError } from 'twilio-video';\nimport { useEffect } from 'react';\n\nimport { Callback } from '../../../types';\n\nexport default function useHandleRoomDisconnection(\n  room: Room | null,\n  onError: Callback,\n  removeLocalAudioTrack: () => void,\n  removeLocalVideoTrack: () => void,\n  isSharingScreen: boolean,\n  toggleScreenShare: () => void\n) {\n  useEffect(() => {\n    if (room) {\n      const onDisconnected = (_: Room, error: TwilioError) => {\n        if (error) {\n          onError(error);\n        }\n\n        removeLocalAudioTrack();\n        removeLocalVideoTrack();\n        if (isSharingScreen) {\n          toggleScreenShare();\n        }\n      };\n\n      room.on('disconnected', onDisconnected);\n      return () => {\n        room.off('disconnected', onDisconnected);\n      };\n    }\n  }, [room, onError, removeLocalAudioTrack, removeLocalVideoTrack, isSharingScreen, toggleScreenShare]);\n}\n","import { Room } from 'twilio-video';\nimport { useEffect } from 'react';\n\nimport { Callback } from '../../../types';\n\nexport default function useHandleTrackPublicationFailed(room: Room | null, onError: Callback) {\n  useEffect(() => {\n    if (room) {\n      room.localParticipant.on('trackPublicationFailed', onError);\n      return () => {\n        room.localParticipant.off('trackPublicationFailed', onError);\n      };\n    }\n  }, [room, onError]);\n}\n","import { LocalAudioTrack, LocalVideoTrack } from 'twilio-video';\nimport { useEffect } from 'react';\n\n/*\n * If a user has published an audio track from an external audio input device and\n * disconnects the device, the published audio track will be stopped and the user\n * will no longer be heard by other participants.\n *\n * To prevent this issue, this hook will re-acquire a mediaStreamTrack from the system's\n * default audio device when it detects that the published audio device has been disconnected.\n */\n\nexport default function useRestartAudioTrackOnDeviceChange(localTracks: (LocalAudioTrack | LocalVideoTrack)[]) {\n  const audioTrack = localTracks.find(track => track.kind === 'audio');\n\n  useEffect(() => {\n    const handleDeviceChange = () => {\n      if (audioTrack?.mediaStreamTrack.readyState === 'ended') {\n        audioTrack.restart({});\n      }\n    };\n\n    navigator.mediaDevices.addEventListener('devicechange', handleDeviceChange);\n\n    return () => {\n      navigator.mediaDevices.removeEventListener('devicechange', handleDeviceChange);\n    };\n  }, [audioTrack]);\n}\n","import { useContext } from 'react';\nimport { VideoContext } from '../../components/VideoProvider';\n\nexport default function useVideoContext() {\n  const context = useContext(VideoContext);\n  if (!context) {\n    throw new Error('useVideoContext must be used within a VideoProvider');\n  }\n  return context;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport { Button } from '@material-ui/core';\n\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    button: {\n      background: theme.brand,\n      color: 'white',\n      '&:hover': {\n        background: '#600101',\n      },\n    },\n  })\n);\n\nexport default function EndCallButton(props: { className?: string }) {\n  const classes = useStyles();\n  const { room } = useVideoContext();\n\n  return (\n    <Button onClick={() => room!.disconnect()} className={clsx(classes.button, props.className)} data-cy-disconnect>\n      Disconnect\n    </Button>\n  );\n}\n","import { isMobile } from '../../utils';\nimport { RenderDimensionValue } from './renderDimensions';\nimport { Track, VideoBandwidthProfileOptions } from 'twilio-video';\n\nexport interface Settings {\n  trackSwitchOffMode: VideoBandwidthProfileOptions['trackSwitchOffMode'];\n  dominantSpeakerPriority?: Track.Priority;\n  bandwidthProfileMode: VideoBandwidthProfileOptions['mode'];\n  maxTracks: string;\n  maxAudioBitrate: string;\n  renderDimensionLow?: RenderDimensionValue;\n  renderDimensionStandard?: RenderDimensionValue;\n  renderDimensionHigh?: RenderDimensionValue;\n}\n\ntype SettingsKeys = keyof Settings;\n\nexport interface SettingsAction {\n  name: SettingsKeys;\n  value: string;\n}\n\nexport const initialSettings: Settings = {\n  trackSwitchOffMode: undefined,\n  dominantSpeakerPriority: 'standard',\n  bandwidthProfileMode: 'collaboration',\n  maxTracks: isMobile ? '5' : '10',\n  maxAudioBitrate: '16000',\n  renderDimensionLow: 'low',\n  renderDimensionStandard: '960p',\n  renderDimensionHigh: 'wide1080p',\n};\n\n// This inputLabels object is used by ConnectionOptions.tsx. It is used to populate the id, name, and label props\n// of the various input elements. Using a typed object like this (instead of strings) eliminates the possibility\n// of there being a typo.\nexport const inputLabels = (() => {\n  const target: any = {};\n  for (const setting in initialSettings) {\n    target[setting] = setting as SettingsKeys;\n  }\n  return target as { [key in SettingsKeys]: string };\n})();\n\nexport function settingsReducer(state: Settings, action: SettingsAction) {\n  return {\n    ...state,\n    [action.name]: action.value === 'default' ? undefined : action.value,\n  };\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n};\n\nexport default function useFirebaseAuth() {\n  const [user, setUser] = useState<firebase.User | null>(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n\n  const getToken = useCallback(\n    async (user_identity: string, room_name: string) => {\n      const headers = new window.Headers();\n\n      const idToken = await user!.getIdToken();\n      headers.set('Authorization', idToken);\n      headers.set('content-type', 'application/json');\n\n      const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\n\n      return fetch(endpoint, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          user_identity,\n          room_name,\n          create_conversation: process.env.REACT_APP_DISABLE_TWILIO_CONVERSATIONS !== 'true',\n        }),\n      })\n        .then(res => res.json())\n        .then(res => res.token as string);\n    },\n    [user]\n  );\n\n  useEffect(() => {\n    firebase.initializeApp(firebaseConfig);\n    firebase.auth().onAuthStateChanged(newUser => {\n      setUser(newUser);\n      setIsAuthReady(true);\n    });\n  }, []);\n\n  const signIn = useCallback(() => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('https://www.googleapis.com/auth/plus.login');\n\n    return firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(newUser => {\n        setUser(newUser.user);\n      });\n  }, []);\n\n  const signOut = useCallback(() => {\n    return firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        setUser(null);\n      });\n  }, []);\n\n  return { user, signIn, signOut, isAuthReady, getToken };\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { RoomType } from '../../types';\n\nexport function getPasscode() {\n  const match = window.location.search.match(/passcode=(.*)&?/);\n  const passcode = match ? match[1] : window.sessionStorage.getItem('passcode');\n  return passcode;\n}\n\nexport function fetchToken(\n  name: string,\n  room: string,\n  passcode: string,\n  create_room = true,\n  create_conversation = process.env.REACT_APP_DISABLE_TWILIO_CONVERSATIONS !== 'true'\n) {\n  return fetch(`/token`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      user_identity: name,\n      room_name: room,\n      passcode,\n      create_room,\n      create_conversation,\n    }),\n  });\n}\n\nexport function verifyPasscode(passcode: string) {\n  return fetchToken('temp-name', 'temp-room', passcode, false /* create_room */, false /* create_conversation */).then(\n    async res => {\n      const jsonResponse = await res.json();\n      if (res.status === 401) {\n        return { isValid: false, error: jsonResponse.error?.message };\n      }\n\n      if (res.ok && jsonResponse.token) {\n        return { isValid: true };\n      }\n    }\n  );\n}\n\nexport function getErrorMessage(message: string) {\n  switch (message) {\n    case 'passcode incorrect':\n      return 'Passcode is incorrect';\n    case 'passcode expired':\n      return 'Passcode has expired';\n    default:\n      return message;\n  }\n}\n\nexport default function usePasscodeAuth() {\n  const history = useHistory();\n\n  const [user, setUser] = useState<{ displayName: undefined; photoURL: undefined; passcode: string } | null>(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [roomType, setRoomType] = useState<RoomType>();\n\n  const getToken = useCallback(\n    (name: string, room: string) => {\n      return fetchToken(name, room, user!.passcode)\n        .then(async res => {\n          if (res.ok) {\n            return res;\n          }\n          const json = await res.json();\n          const errorMessage = getErrorMessage(json.error?.message || res.statusText);\n          throw Error(errorMessage);\n        })\n        .then(res => res.json())\n        .then(res => {\n          setRoomType(res.room_type);\n          return res.token as string;\n        });\n    },\n    [user]\n  );\n\n  useEffect(() => {\n    const passcode = getPasscode();\n\n    if (passcode) {\n      verifyPasscode(passcode)\n        .then(verification => {\n          if (verification?.isValid) {\n            setUser({ passcode } as any);\n            window.sessionStorage.setItem('passcode', passcode);\n            history.replace(window.location.pathname);\n          }\n        })\n        .then(() => setIsAuthReady(true));\n    } else {\n      setIsAuthReady(true);\n    }\n  }, [history]);\n\n  const signIn = useCallback((passcode: string) => {\n    return verifyPasscode(passcode).then(verification => {\n      if (verification?.isValid) {\n        setUser({ passcode } as any);\n        window.sessionStorage.setItem('passcode', passcode);\n      } else {\n        throw new Error(getErrorMessage(verification?.error));\n      }\n    });\n  }, []);\n\n  const signOut = useCallback(() => {\n    setUser(null);\n    window.sessionStorage.removeItem('passcode');\n    return Promise.resolve();\n  }, []);\n\n  return { user, isAuthReady, getToken, signIn, signOut, roomType };\n}\n","import React, { createContext, useContext, useReducer, useState } from 'react';\nimport { RoomType } from '../types';\nimport { TwilioError } from 'twilio-video';\nimport { settingsReducer, initialSettings, Settings, SettingsAction } from './settings/settingsReducer';\nimport useActiveSinkId from './useActiveSinkId/useActiveSinkId';\nimport useFirebaseAuth from './useFirebaseAuth/useFirebaseAuth';\nimport usePasscodeAuth from './usePasscodeAuth/usePasscodeAuth';\nimport { User } from 'firebase';\n\nexport interface StateContextType {\n  error: TwilioError | Error | null;\n  setError(error: TwilioError | Error | null): void;\n  getToken(name: string, room: string, passcode?: string): Promise<string>;\n  user?: User | null | { displayName: undefined; photoURL: undefined; passcode?: string };\n  signIn?(passcode?: string): Promise<void>;\n  signOut?(): Promise<void>;\n  isAuthReady?: boolean;\n  isFetching: boolean;\n  activeSinkId: string;\n  setActiveSinkId(sinkId: string): void;\n  settings: Settings;\n  dispatchSetting: React.Dispatch<SettingsAction>;\n  roomType?: RoomType;\n}\n\nexport const StateContext = createContext<StateContextType>(null!);\n\n/*\n  The 'react-hooks/rules-of-hooks' linting rules prevent React Hooks fron being called\n  inside of if() statements. This is because hooks must always be called in the same order\n  every time a component is rendered. The 'react-hooks/rules-of-hooks' rule is disabled below\n  because the \"if (process.env.REACT_APP_SET_AUTH === 'firebase')\" statements are evaluated\n  at build time (not runtime). If the statement evaluates to false, then the code is not\n  included in the bundle that is produced (due to tree-shaking). Thus, in this instance, it\n  is ok to call hooks inside if() statements.\n*/\nexport default function AppStateProvider(props: React.PropsWithChildren<{}>) {\n  const [error, setError] = useState<TwilioError | null>(null);\n  const [isFetching, setIsFetching] = useState(false);\n  const [activeSinkId, setActiveSinkId] = useActiveSinkId();\n  const [settings, dispatchSetting] = useReducer(settingsReducer, initialSettings);\n\n  let contextValue = {\n    error,\n    setError,\n    isFetching,\n    activeSinkId,\n    setActiveSinkId,\n    settings,\n    dispatchSetting,\n  } as StateContextType;\n\n  if (process.env.REACT_APP_SET_AUTH === 'firebase') {\n    contextValue = {\n      ...contextValue,\n      ...useFirebaseAuth(), // eslint-disable-line react-hooks/rules-of-hooks\n    };\n  } else if (process.env.REACT_APP_SET_AUTH === 'passcode') {\n    contextValue = {\n      ...contextValue,\n      ...usePasscodeAuth(), // eslint-disable-line react-hooks/rules-of-hooks\n    };\n  } else {\n    contextValue = {\n      ...contextValue,\n      getToken: async (user_identity, room_name) => {\n        const endpoint = process.env.REACT_APP_TOKEN_ENDPOINT || '/token';\n\n        return fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            'content-type': 'application/json',\n          },\n          body: JSON.stringify({\n            user_identity,\n            room_name,\n            create_conversation: process.env.REACT_APP_DISABLE_TWILIO_CONVERSATIONS !== 'true',\n          }),\n        })\n          .then(res => res.json())\n          .then(res => res.token as string);\n      },\n    };\n  }\n\n  const getToken: StateContextType['getToken'] = (name, room) => {\n    setIsFetching(true);\n    return contextValue\n      .getToken(name, room)\n      .then(res => {\n        setIsFetching(false);\n        return res;\n      })\n      .catch(err => {\n        setError(err);\n        setIsFetching(false);\n        return Promise.reject(err);\n      });\n  };\n\n  return <StateContext.Provider value={{ ...contextValue, getToken }}>{props.children}</StateContext.Provider>;\n}\n\nexport function useAppState() {\n  const context = useContext(StateContext);\n  if (!context) {\n    throw new Error('useAppState must be used within the AppStateProvider');\n  }\n  return context;\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { SELECTED_AUDIO_OUTPUT_KEY } from '../../constants';\nimport useDevices from '../../hooks/useDevices/useDevices';\n\nexport default function useActiveSinkId() {\n  const { audioOutputDevices } = useDevices();\n  const [activeSinkId, _setActiveSinkId] = useState('default');\n\n  const setActiveSinkId = useCallback(\n    (sinkId: string) => {\n      window.localStorage.setItem(SELECTED_AUDIO_OUTPUT_KEY, sinkId);\n      _setActiveSinkId(sinkId);\n    },\n    [_setActiveSinkId]\n  );\n\n  useEffect(() => {\n    const selectedSinkId = window.localStorage.getItem(SELECTED_AUDIO_OUTPUT_KEY);\n    const hasSelectedAudioOutputDevice = audioOutputDevices.some(\n      device => selectedSinkId && device.deviceId === selectedSinkId\n    );\n    if (hasSelectedAudioOutputDevice) {\n      _setActiveSinkId(selectedSinkId!);\n    }\n  }, [audioOutputDevices]);\n\n  return [activeSinkId, setActiveSinkId] as const;\n}\n","import React, { PropsWithChildren } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\n\nimport { version as appVersion } from '../../../package.json';\nimport Video from 'twilio-video';\nimport { useAppState } from '../../state';\n\ninterface AboutDialogProps {\n  open: boolean;\n  onClose(): void;\n}\n\nfunction AboutDialog({ open, onClose }: PropsWithChildren<AboutDialogProps>) {\n  const { roomType } = useAppState();\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth={true} maxWidth=\"xs\">\n      <DialogTitle>About</DialogTitle>\n      <Divider />\n      <DialogContent>\n        <DialogContentText>Browser supported: {String(Video.isSupported)}</DialogContentText>\n        <DialogContentText>SDK Version: {Video.version}</DialogContentText>\n        <DialogContentText>App Version: {appVersion}</DialogContentText>\n        <DialogContentText>Deployed Tag: {process.env.REACT_APP_GIT_TAG || 'N/A'}</DialogContentText>\n        <DialogContentText>Deployed Commit Hash: {process.env.REACT_APP_GIT_COMMIT || 'N/A'}</DialogContentText>\n        {roomType && <DialogContentText>Room Type: {roomType}</DialogContentText>}\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\" variant=\"contained\" autoFocus>\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default AboutDialog;\n","import { useState, useEffect } from 'react';\nimport { LocalAudioTrack, LocalVideoTrack, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\n\ntype TrackType = LocalAudioTrack | LocalVideoTrack | RemoteAudioTrack | RemoteVideoTrack | undefined;\n\nexport default function useIsTrackEnabled(track: TrackType) {\n  const [isEnabled, setIsEnabled] = useState(track ? track.isEnabled : false);\n\n  useEffect(() => {\n    setIsEnabled(track ? track.isEnabled : false);\n\n    if (track) {\n      const setEnabled = () => setIsEnabled(true);\n      const setDisabled = () => setIsEnabled(false);\n      track.on('enabled', setEnabled);\n      track.on('disabled', setDisabled);\n      return () => {\n        track.off('enabled', setEnabled);\n        track.off('disabled', setDisabled);\n      };\n    }\n  }, [track]);\n\n  return isEnabled;\n}\n","import { useState, useEffect } from 'react';\nimport { AudioTrack, VideoTrack } from 'twilio-video';\n\n/*\n * This hook allows components to reliably use the 'mediaStreamTrack' property of\n * an AudioTrack or a VideoTrack. Whenever 'localTrack.restart(...)' is called, it\n * will replace the mediaStreamTrack property of the localTrack, but the localTrack\n * object will stay the same. Therefore this hook is needed in order for components\n * to rerender in response to the mediaStreamTrack changing.\n */\nexport default function useMediaStreamTrack(track?: AudioTrack | VideoTrack) {\n  const [mediaStreamTrack, setMediaStreamTrack] = useState(track?.mediaStreamTrack);\n\n  useEffect(() => {\n    setMediaStreamTrack(track?.mediaStreamTrack);\n\n    if (track) {\n      const handleStarted = () => setMediaStreamTrack(track.mediaStreamTrack);\n      track.on('started', handleStarted);\n      return () => {\n        track.off('started', handleStarted);\n      };\n    }\n  }, [track]);\n\n  return mediaStreamTrack;\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { AudioTrack, LocalAudioTrack, RemoteAudioTrack } from 'twilio-video';\nimport { interval } from 'd3-timer';\nimport useIsTrackEnabled from '../../hooks/useIsTrackEnabled/useIsTrackEnabled';\nimport useMediaStreamTrack from '../../hooks/useMediaStreamTrack/useMediaStreamTrack';\n\nlet clipId = 0;\nconst getUniqueClipId = () => clipId++;\n\n// @ts-ignore\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nlet audioContext: AudioContext;\n\nexport function initializeAnalyser(stream: MediaStream) {\n  audioContext = audioContext || new AudioContext();\n  const audioSource = audioContext.createMediaStreamSource(stream);\n\n  const analyser = audioContext.createAnalyser();\n  analyser.smoothingTimeConstant = 0.2;\n  analyser.fftSize = 256;\n\n  audioSource.connect(analyser);\n  return analyser;\n}\n\nfunction AudioLevelIndicator({ audioTrack, color = 'white' }: { audioTrack?: AudioTrack; color?: string }) {\n  const SVGRectRef = useRef<SVGRectElement>(null);\n  const [analyser, setAnalyser] = useState<AnalyserNode>();\n  const isTrackEnabled = useIsTrackEnabled(audioTrack as LocalAudioTrack | RemoteAudioTrack);\n  const mediaStreamTrack = useMediaStreamTrack(audioTrack);\n\n  useEffect(() => {\n    if (audioTrack && mediaStreamTrack && isTrackEnabled) {\n      // Here we create a new MediaStream from a clone of the mediaStreamTrack.\n      // A clone is created to allow multiple instances of this component for a single\n      // AudioTrack on iOS Safari.\n      let newMediaStream = new MediaStream([mediaStreamTrack.clone()]);\n\n      // Here we listen for the 'stopped' event on the audioTrack. When the audioTrack is stopped,\n      // we stop the cloned track that is stored in 'newMediaStream'. It is important that we stop\n      // all tracks when they are not in use. Browsers like Firefox don't let you create a new stream\n      // from a new audio device while the active audio device still has active tracks.\n      const stopAllMediaStreamTracks = () => newMediaStream.getTracks().forEach(track => track.stop());\n      audioTrack.on('stopped', stopAllMediaStreamTracks);\n\n      const reinitializeAnalyser = () => {\n        stopAllMediaStreamTracks();\n        newMediaStream = new MediaStream([mediaStreamTrack.clone()]);\n        setAnalyser(initializeAnalyser(newMediaStream));\n      };\n\n      setAnalyser(initializeAnalyser(newMediaStream));\n\n      // Here we reinitialize the AnalyserNode on focus to avoid an issue in Safari\n      // where the analysers stop functioning when the user switches to a new tab\n      // and switches back to the app.\n      window.addEventListener('focus', reinitializeAnalyser);\n\n      return () => {\n        stopAllMediaStreamTracks();\n        window.removeEventListener('focus', reinitializeAnalyser);\n        audioTrack.off('stopped', stopAllMediaStreamTracks);\n      };\n    }\n  }, [isTrackEnabled, mediaStreamTrack, audioTrack]);\n\n  useEffect(() => {\n    const SVGClipElement = SVGRectRef.current;\n\n    if (isTrackEnabled && SVGClipElement && analyser) {\n      const sampleArray = new Uint8Array(analyser.frequencyBinCount);\n\n      const timer = interval(() => {\n        analyser.getByteFrequencyData(sampleArray);\n        let values = 0;\n\n        const length = sampleArray.length;\n        for (let i = 0; i < length; i++) {\n          values += sampleArray[i];\n        }\n\n        const volume = Math.min(14, Math.max(0, Math.log10(values / length / 3) * 7));\n\n        SVGClipElement?.setAttribute('y', String(14 - volume));\n      }, 100);\n\n      return () => {\n        SVGClipElement.setAttribute('y', '14');\n        timer.stop();\n      };\n    }\n  }, [isTrackEnabled, analyser]);\n\n  // Each instance of this component will need a unique HTML ID\n  const clipPathId = `audio-level-clip-${getUniqueClipId()}`;\n\n  return isTrackEnabled ? (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" data-test-audio-indicator>\n      <defs>\n        <clipPath id={clipPathId}>\n          <rect ref={SVGRectRef} x=\"0\" y=\"14\" width=\"24\" height=\"24\" />\n        </clipPath>\n      </defs>\n      <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(.5)\">\n        <rect\n          clipPath={`url(#${clipPathId})`}\n          width=\"5.2\"\n          height=\"10\"\n          x=\"9.5\"\n          y=\"3.5\"\n          rx=\"6\"\n          ry=\"3\"\n          fill=\"#23BF6E\"\n        ></rect>\n        <path\n          fill={color}\n          strokeWidth=\"0\"\n          d=\"M17.389 10.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V17.09C8.395 16.836 6 14.281 6 11.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM11.944 4c1.566 0 2.834 1.268 2.834 2.833v4.334c0 1.564-1.268 2.833-2.834 2.833-1.564 0-2.833-1.27-2.833-2.833V6.833C9.111 5.268 10.38 4 11.944 4zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334c0 1.012.822 1.833 1.833 1.833 1.013 0 1.834-.82 1.834-1.833V6.833c0-1.013-.82-1.833-1.834-1.833z\"\n        />\n      </g>\n    </svg>\n  ) : (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      transform=\"translate(-0.5, 0)\"\n      data-test-audio-mute-icon\n    >\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          fill={color}\n          strokeWidth=\"0\"\n          d=\"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z\"\n          transform=\"translate(6.5 4)\"\n        />\n        <path\n          fill=\"red\"\n          strokeWidth=\"0\"\n          d=\"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z\"\n          transform=\"translate(6.5 4)\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default React.memo(AudioLevelIndicator);\n","import React from 'react';\nimport AudioLevelIndicator from '../../AudioLevelIndicator/AudioLevelIndicator';\nimport { LocalAudioTrack } from 'twilio-video';\nimport { FormControl, MenuItem, Typography, Select, Grid } from '@material-ui/core';\nimport { SELECTED_AUDIO_INPUT_KEY } from '../../../constants';\nimport useDevices from '../../../hooks/useDevices/useDevices';\nimport useMediaStreamTrack from '../../../hooks/useMediaStreamTrack/useMediaStreamTrack';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nexport default function AudioInputList() {\n  const { audioInputDevices } = useDevices();\n  const { localTracks } = useVideoContext();\n\n  const localAudioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\n  const mediaStreamTrack = useMediaStreamTrack(localAudioTrack);\n  const localAudioInputDeviceId = mediaStreamTrack?.getSettings().deviceId;\n\n  function replaceTrack(newDeviceId: string) {\n    window.localStorage.setItem(SELECTED_AUDIO_INPUT_KEY, newDeviceId);\n    localAudioTrack?.restart({ deviceId: { exact: newDeviceId } });\n  }\n\n  return (\n    <div>\n      <Typography variant=\"subtitle2\" gutterBottom>\n        Audio Input\n      </Typography>\n      <Grid container alignItems=\"center\" justify=\"space-between\">\n        <div className=\"inputSelect\">\n          {audioInputDevices.length > 1 ? (\n            <FormControl fullWidth>\n              <Select\n                onChange={e => replaceTrack(e.target.value as string)}\n                value={localAudioInputDeviceId || ''}\n                variant=\"outlined\"\n              >\n                {audioInputDevices.map(device => (\n                  <MenuItem value={device.deviceId} key={device.deviceId}>\n                    {device.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          ) : (\n            <Typography>{localAudioTrack?.mediaStreamTrack.label || 'No Local Audio'}</Typography>\n          )}\n        </div>\n        <AudioLevelIndicator audioTrack={localAudioTrack} color=\"black\" />\n      </Grid>\n    </div>\n  );\n}\n","import React from 'react';\nimport { FormControl, MenuItem, Typography, Select } from '@material-ui/core';\nimport { useAppState } from '../../../state';\nimport useDevices from '../../../hooks/useDevices/useDevices';\n\nexport default function AudioOutputList() {\n  const { audioOutputDevices } = useDevices();\n  const { activeSinkId, setActiveSinkId } = useAppState();\n  const activeOutputLabel = audioOutputDevices.find(device => device.deviceId === activeSinkId)?.label;\n\n  return (\n    <div className=\"inputSelect\">\n      {audioOutputDevices.length > 1 ? (\n        <FormControl fullWidth>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Audio Output\n          </Typography>\n          <Select onChange={e => setActiveSinkId(e.target.value as string)} value={activeSinkId} variant=\"outlined\">\n            {audioOutputDevices.map(device => (\n              <MenuItem value={device.deviceId} key={device.deviceId}>\n                {device.label}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      ) : (\n        <>\n          <Typography variant=\"subtitle2\">Audio Output</Typography>\n          <Typography>{activeOutputLabel || 'System Default Audio Output'}</Typography>\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from 'react';\nimport { IVideoTrack } from '../../types';\nimport { styled } from '@material-ui/core/styles';\nimport { Track } from 'twilio-video';\nimport useMediaStreamTrack from '../../hooks/useMediaStreamTrack/useMediaStreamTrack';\nimport useVideoTrackDimensions from '../../hooks/useVideoTrackDimensions/useVideoTrackDimensions';\n\nconst Video = styled('video')({\n  width: '100%',\n  height: '100%',\n});\n\ninterface VideoTrackProps {\n  track: IVideoTrack;\n  isLocal?: boolean;\n  priority?: Track.Priority | null;\n}\n\nexport default function VideoTrack({ track, isLocal, priority }: VideoTrackProps) {\n  const ref = useRef<HTMLVideoElement>(null!);\n  const mediaStreamTrack = useMediaStreamTrack(track);\n  const dimensions = useVideoTrackDimensions(track);\n  const isPortrait = (dimensions?.height ?? 0) > (dimensions?.width ?? 0);\n\n  useEffect(() => {\n    const el = ref.current;\n    el.muted = true;\n    if (track.setPriority && priority) {\n      track.setPriority(priority);\n    }\n    track.attach(el);\n    return () => {\n      track.detach(el);\n      if (track.setPriority && priority) {\n        // Passing `null` to setPriority will set the track's priority to that which it was published with.\n        track.setPriority(null);\n      }\n    };\n  }, [track, priority]);\n\n  // The local video track is mirrored if it is not facing the environment.\n  const isFrontFacing = mediaStreamTrack?.getSettings().facingMode !== 'environment';\n  const style = {\n    transform: isLocal && isFrontFacing ? 'rotateY(180deg)' : '',\n    objectFit: isPortrait || track.name.includes('screen') ? ('contain' as const) : ('cover' as const),\n  };\n\n  return <Video ref={ref} style={style} />;\n}\n","import { useState, useEffect } from 'react';\nimport { LocalVideoTrack, RemoteVideoTrack } from 'twilio-video';\n\ntype TrackType = LocalVideoTrack | RemoteVideoTrack;\n\nexport default function useVideoTrackDimensions(track?: TrackType) {\n  const [dimensions, setDimensions] = useState(track?.dimensions);\n\n  useEffect(() => {\n    setDimensions(track?.dimensions);\n\n    if (track) {\n      const handleDimensionsChanged = (newTrack: TrackType) =>\n        setDimensions({\n          width: newTrack.dimensions.width,\n          height: newTrack.dimensions.height,\n        });\n      track.on('dimensionsChanged', handleDimensionsChanged);\n      return () => {\n        track.off('dimensionsChanged', handleDimensionsChanged);\n      };\n    }\n  }, [track]);\n\n  return dimensions;\n}\n","import React, { useState } from 'react';\nimport { DEFAULT_VIDEO_CONSTRAINTS, SELECTED_VIDEO_INPUT_KEY } from '../../../constants';\nimport { FormControl, MenuItem, Typography, Select } from '@material-ui/core';\nimport { LocalVideoTrack } from 'twilio-video';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VideoTrack from '../../VideoTrack/VideoTrack';\nimport useDevices from '../../../hooks/useDevices/useDevices';\nimport useMediaStreamTrack from '../../../hooks/useMediaStreamTrack/useMediaStreamTrack';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles({\n  preview: {\n    width: '300px',\n    maxHeight: '200px',\n    margin: '0.5em auto',\n    '& video': {\n      maxHeight: '200px',\n    },\n  },\n});\n\nexport default function VideoInputList() {\n  const classes = useStyles();\n  const { videoInputDevices } = useDevices();\n  const { localTracks } = useVideoContext();\n\n  const localVideoTrack = localTracks.find(track => track.kind === 'video') as LocalVideoTrack | undefined;\n  const mediaStreamTrack = useMediaStreamTrack(localVideoTrack);\n  const [storedLocalVideoDeviceId, setStoredLocalVideoDeviceId] = useState(\n    window.localStorage.getItem(SELECTED_VIDEO_INPUT_KEY)\n  );\n  const localVideoInputDeviceId = mediaStreamTrack?.getSettings().deviceId || storedLocalVideoDeviceId;\n\n  function replaceTrack(newDeviceId: string) {\n    // Here we store the device ID in the component state. This is so we can re-render this component display\n    // to display the name of the selected device when it is changed while the users camera is off.\n    setStoredLocalVideoDeviceId(newDeviceId);\n    window.localStorage.setItem(SELECTED_VIDEO_INPUT_KEY, newDeviceId);\n    localVideoTrack?.restart({\n      ...(DEFAULT_VIDEO_CONSTRAINTS as {}),\n      deviceId: { exact: newDeviceId },\n    });\n  }\n\n  return (\n    <div>\n      {localVideoTrack && (\n        <div className={classes.preview}>\n          <VideoTrack isLocal track={localVideoTrack} />\n        </div>\n      )}\n      {videoInputDevices.length > 1 ? (\n        <FormControl fullWidth>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Video Input\n          </Typography>\n          <Select\n            onChange={e => replaceTrack(e.target.value as string)}\n            value={localVideoInputDeviceId || ''}\n            variant=\"outlined\"\n          >\n            {videoInputDevices.map(device => (\n              <MenuItem value={device.deviceId} key={device.deviceId}>\n                {device.label}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      ) : (\n        <>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Video Input\n          </Typography>\n          <Typography>{localVideoTrack?.mediaStreamTrack.label || 'No Local Video'}</Typography>\n        </>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nimport AudioInputList from './AudioInputList/AudioInputList';\nimport AudioOutputList from './AudioOutputList/AudioOutputList';\nimport {\n  DialogContent,\n  Typography,\n  Divider,\n  Dialog,\n  DialogActions,\n  Button,\n  Theme,\n  DialogTitle,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VideoInputList from './VideoInputList/VideoInputList';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    width: '600px',\n    minHeight: '400px',\n    [theme.breakpoints.down('xs')]: {\n      width: 'calc(100vw - 32px)',\n    },\n    '& .inputSelect': {\n      width: 'calc(100% - 35px)',\n    },\n  },\n  button: {\n    float: 'right',\n  },\n  paper: {\n    [theme.breakpoints.down('xs')]: {\n      margin: '16px',\n    },\n  },\n  headline: {\n    marginBottom: '1.3em',\n    fontSize: '1.1rem',\n  },\n  listSection: {\n    margin: '2em 0 0.8em',\n    '&:first-child': {\n      margin: '1em 0 2em 0',\n    },\n  },\n}));\n\nexport default function DeviceSelectionDialog({ open, onClose }: { open: boolean; onClose: () => void }) {\n  const classes = useStyles();\n\n  return (\n    <Dialog open={open} onClose={onClose} classes={{ paper: classes.paper }}>\n      <DialogTitle>Audio and Video Settings</DialogTitle>\n      <Divider />\n      <DialogContent className={classes.container}>\n        <div className={classes.listSection}>\n          <Typography variant=\"h6\" className={classes.headline}>\n            Video\n          </Typography>\n          <VideoInputList />\n        </div>\n        <Divider />\n        <div className={classes.listSection}>\n          <Typography variant=\"h6\" className={classes.headline}>\n            Audio\n          </Typography>\n          <AudioInputList />\n        </div>\n        <div className={classes.listSection}>\n          <AudioOutputList />\n        </div>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <Button color=\"primary\" variant=\"contained\" className={classes.button} onClick={onClose}>\n          Done\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\n\nexport default function FlipCameraIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"24\" viewBox=\"0 0 25 24\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <g fill=\"#707578\">\n          <path\n            d=\"M12 3.5c4.694 0 8.5 3.806 8.5 8.5s-3.806 8.5-8.5 8.5-8.5-3.806-8.5-8.5S7.306 3.5 12 3.5zm0 1c-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5 4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5zm1.367 3.429C14.959 8.492 16.1 10.215 16.1 12c0 1.16-.481 2.294-1.256 3.1h.356c.245 0 .45.177.492.41l.008.09c0 .245-.177.45-.41.492l-.09.008h-2.008l-.048-.003-.034-.005c-.088-.017-.167-.055-.233-.11l-.06-.06c-.037-.044-.067-.096-.087-.151l-.001-.004-.012-.04c-.004-.012-.007-.024-.009-.037v-.005c-.005-.024-.006-.042-.007-.06L12.7 13.6c0-.276.224-.5.5-.5.245 0 .45.177.492.41l.008.09v1.176c.833-.6 1.4-1.676 1.4-2.776 0-1.373-.886-2.71-2.067-3.129-.26-.092-.396-.377-.304-.638.092-.26.378-.396.638-.304zm-2.559-.03c.03.001.058.004.086.01l.062.016.018.006c.04.015.075.034.108.056.086.059.152.143.188.242l.001.004.008.025c.006.017.01.034.013.052l.008.09v2c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V9.224c-.833.6-1.4 1.676-1.4 2.776 0 1.373.886 2.71 2.067 3.129.26.092.396.377.304.638-.092.26-.378.396-.638.304C9.041 15.508 7.9 13.785 7.9 12c0-1.16.481-2.294 1.255-3.1H8.8c-.245 0-.45-.177-.492-.41L8.3 8.4c0-.245.177-.45.41-.492L8.8 7.9h2.008z\"\n            transform=\"translate(-233 -689) translate(-1 673) translate(37 16) translate(197.298)\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function InfoIconOutlined() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <g fill=\"#707578\">\n          <path\n            d=\"M10 2c4.418 0 8 3.582 8 8s-3.582 8-8 8-8-3.582-8-8 3.582-8 8-8zm0 1.25c-3.728 0-6.75 3.022-6.75 6.75s3.022 6.75 6.75 6.75 6.75-3.022 6.75-6.75S13.728 3.25 10 3.25zM10 9c.552 0 1 .448 1 1v3c0 .552-.448 1-1 1s-1-.448-1-1v-3c0-.552.448-1 1-1zm0-3c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z\"\n            transform=\"translate(-1107 -888) translate(1082 799) translate(1 81) translate(24 8)\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function SettingsIcon() {\n  return (\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M16.774 14.14L16.3413 13.2506C16.3286 13.2244 16.3173 13.1974 16.3075 13.17C16.1465 12.7274 16.3736 12.2377 16.8155 12.0749L17.7467 11.7347C18.5055 11.4566 19.0077 10.7311 19.0011 9.92278C18.9944 9.11441 18.4804 8.39788 17.7172 8.13314L16.7859 7.81039C16.758 7.80094 16.7306 7.7894 16.7056 7.77843C16.2794 7.57999 16.0942 7.07384 16.2915 6.64668L16.7082 5.74887C17.049 5.01563 16.8921 4.14738 16.3163 3.58049C15.7405 3.0136 14.8703 2.87065 14.1431 3.2235L13.246 3.65462C13.2199 3.66744 13.1931 3.67882 13.1658 3.68869C12.954 3.76821 12.7189 3.75812 12.5148 3.66073C12.3097 3.56606 12.1511 3.39306 12.0746 3.18044L12.0741 3.17844L11.7334 2.25081C11.4547 1.49408 10.7313 0.994061 9.92513 1.00105C9.119 1.00804 8.40369 1.52053 8.13727 2.28199L7.8091 3.22223C7.79964 3.25006 7.78863 3.27733 7.7761 3.30391C7.57656 3.73058 7.06934 3.91499 6.64288 3.71592L5.74485 3.29868C5.01263 2.96105 4.14713 3.11998 3.58195 3.69585C3.01677 4.27171 2.87367 5.14046 3.22434 5.86685L3.65571 6.76067C3.66851 6.78686 3.67999 6.81368 3.69009 6.84103C3.85069 7.28399 3.62314 7.77372 3.18105 7.9366L2.25109 8.27683C1.74395 8.46368 1.33939 8.85649 1.13749 9.3581C0.935598 9.8597 0.955223 10.4232 1.19151 10.9093C1.41059 11.3666 1.80499 11.7159 2.28525 11.878L3.21579 12.2005C3.24614 12.2114 3.27565 12.2233 3.30063 12.2343C3.72728 12.4329 3.91226 12.9399 3.7139 13.3671L3.29483 14.2675C3.07772 14.742 3.06371 15.2845 3.25603 15.7693C3.44835 16.2542 3.83032 16.6393 4.31342 16.8354C4.34216 16.847 4.3712 16.8578 4.40056 16.8679C4.87879 17.0366 5.40471 17.0069 5.86112 16.7853L6.75557 16.3531C6.78218 16.3402 6.81093 16.3286 6.8356 16.3194C7.04851 16.2445 7.282 16.2542 7.48788 16.3465C7.6933 16.4413 7.85223 16.6144 7.92922 16.8273L8.27064 17.7606C8.55155 18.5147 9.27456 19.0117 10.079 19.0036C10.8834 18.9955 11.5969 18.4841 11.8635 17.7245L12.1864 16.7928C12.1968 16.7627 12.2087 16.7332 12.2201 16.7083C12.4211 16.2836 12.9258 16.099 13.3529 16.2939L14.2494 16.7105C14.9825 17.0512 15.8508 16.8933 16.4177 16.3161C16.9845 15.7389 17.1272 14.8675 16.774 14.14ZM15.4272 15.7438C15.1965 15.8557 14.9279 15.8582 14.6953 15.7505L13.7992 15.334C13.3395 15.1185 12.8127 15.0956 12.3358 15.2705C11.8589 15.4453 11.4714 15.8035 11.2594 16.2653C11.2334 16.3231 11.21 16.381 11.1879 16.4434L10.8648 17.3755C10.7896 17.5889 10.6327 17.7637 10.4286 17.8613C10.2245 17.959 9.9901 17.9714 9.77695 17.8959C9.53792 17.8159 9.34868 17.6308 9.26323 17.3935L8.92318 16.4634C8.74891 15.9867 8.39229 15.5989 7.93192 15.3856C7.47155 15.1724 6.94522 15.1511 6.46891 15.3264C6.40896 15.349 6.35008 15.3734 6.29456 15.4005L5.4017 15.832C5.198 15.9306 4.96337 15.9438 4.75003 15.8685C4.53569 15.7956 4.36017 15.6387 4.26376 15.4338C4.15381 15.2059 4.15081 14.9409 4.25558 14.7105L4.6727 13.8138C4.88722 13.3534 4.9098 12.8267 4.73547 12.3499C4.56113 11.8731 4.20422 11.4855 3.74357 11.2726C3.71568 11.26 3.68725 11.2477 3.65813 11.2359C3.62824 11.2238 3.59766 11.2124 3.56562 11.2012L2.6307 10.8774C2.29028 10.7597 2.06067 10.4405 2.0571 10.0801C2.05353 9.71966 2.27677 9.39575 2.61479 9.2709L3.54421 8.93088C4.05237 8.74551 4.45826 8.35329 4.66113 7.8516C4.864 7.34991 4.8448 6.7858 4.60832 6.29933L4.17719 5.40605C4.0208 5.08228 4.08434 4.69501 4.33601 4.43805C4.58769 4.18109 4.97337 4.1097 5.30004 4.2596L6.19629 4.67569C6.65433 4.89215 7.1799 4.91661 7.65626 4.74364C8.13263 4.57067 8.52036 4.21458 8.73335 3.75445C8.7625 3.69314 8.78809 3.6302 8.80997 3.56594L9.13622 2.6316C9.29214 2.18707 9.77837 1.95273 10.2227 2.10793C10.4645 2.18868 10.6555 2.37645 10.7405 2.61689L11.0804 3.54291C11.2533 4.01887 11.6082 4.40647 12.067 4.62043C12.5257 4.83438 13.0507 4.85716 13.5265 4.68374C13.5885 4.66176 13.6492 4.63608 13.7082 4.60683L14.6033 4.17624C14.8065 4.07688 15.0408 4.06283 15.2542 4.13722C15.4693 4.20945 15.6456 4.36621 15.7425 4.57137C15.8549 4.80183 15.8573 5.07079 15.749 5.30333L15.3321 6.20153C15.1187 6.66179 15.0968 7.18798 15.2714 7.66415C15.446 8.14033 15.8026 8.52742 16.2627 8.74013C16.3185 8.76535 16.3747 8.78849 16.4369 8.81002L17.3702 9.13315C17.7106 9.2515 17.9398 9.57117 17.9428 9.93176C17.9458 10.2924 17.722 10.6161 17.3836 10.7405L16.4524 11.0806C15.4631 11.4445 14.9535 12.54 15.3125 13.5312C15.335 13.5933 15.3607 13.6541 15.3895 13.7135L15.8224 14.6035C15.9214 14.807 15.9353 15.0416 15.8612 15.2555C15.787 15.4694 15.6309 15.6451 15.4272 15.7438L15.4272 15.7438ZM11.3877 6.5684C9.49155 5.80233 7.33291 6.71966 6.5662 8.61733C5.79949 10.515 6.71505 12.6744 8.61116 13.4405C10.5073 14.2065 12.6659 13.2892 13.4326 11.3915C14.197 9.49389 13.2821 7.33617 11.3877 6.5684ZM9.00779 12.4587C7.65343 11.9115 6.99946 10.3691 7.54711 9.01364C8.09476 7.65816 9.63664 7.00292 10.991 7.55012C12.3454 8.09732 12.9993 9.63974 12.4517 10.9952C11.9028 12.3495 10.3621 13.0042 9.00779 12.4587Z\"\n        fill=\"#606B85\"\n      />\n    </svg>\n  );\n}\n","import React, { useState, useRef } from 'react';\nimport AboutDialog from '../../AboutDialog/AboutDialog';\nimport Button from '@material-ui/core/Button';\nimport DeviceSelectionDialog from '../../DeviceSelectionDialog/DeviceSelectionDialog';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport FlipCameraIcon from '../../../icons/FlipCameraIcon';\nimport InfoIconOutlined from '../../../icons/InfoIconOutlined';\nimport MenuContainer from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport SettingsIcon from '../../../icons/SettingsIcon';\nimport Typography from '@material-ui/core/Typography';\nimport { styled, Theme, useMediaQuery } from '@material-ui/core';\nimport useFlipCameraToggle from '../../../hooks/useFlipCameraToggle/useFlipCameraToggle';\n\nexport const IconContainer = styled('div')({\n  display: 'flex',\n  justifyContent: 'center',\n  width: '1.5em',\n  marginRight: '0.3em',\n});\n\nexport default function Menu(props: { buttonClassName?: string }) {\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const [aboutOpen, setAboutOpen] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [settingsOpen, setSettingsOpen] = useState(false);\n\n  const anchorRef = useRef<HTMLButtonElement>(null);\n  const { flipCameraDisabled, toggleFacingMode, flipCameraSupported } = useFlipCameraToggle();\n\n  return (\n    <>\n      <Button onClick={() => setMenuOpen(isOpen => !isOpen)} ref={anchorRef} className={props.buttonClassName}>\n        {isMobile ? (\n          <MoreIcon />\n        ) : (\n          <>\n            Settings\n            <ExpandMoreIcon />\n          </>\n        )}\n      </Button>\n      <MenuContainer\n        open={menuOpen}\n        onClose={() => setMenuOpen(isOpen => !isOpen)}\n        anchorEl={anchorRef.current}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: isMobile ? -55 : 'bottom',\n          horizontal: 'center',\n        }}\n      >\n        {flipCameraSupported && (\n          <MenuItem disabled={flipCameraDisabled} onClick={toggleFacingMode}>\n            <IconContainer>\n              <FlipCameraIcon />\n            </IconContainer>\n            <Typography variant=\"body1\">Flip Camera</Typography>\n          </MenuItem>\n        )}\n\n        <MenuItem onClick={() => setSettingsOpen(true)}>\n          <IconContainer>\n            <SettingsIcon />\n          </IconContainer>\n          <Typography variant=\"body1\">Audio and Video Settings</Typography>\n        </MenuItem>\n\n        <MenuItem onClick={() => setAboutOpen(true)}>\n          <IconContainer>\n            <InfoIconOutlined />\n          </IconContainer>\n          <Typography variant=\"body1\">About</Typography>\n        </MenuItem>\n      </MenuContainer>\n      <AboutDialog\n        open={aboutOpen}\n        onClose={() => {\n          setAboutOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n      <DeviceSelectionDialog\n        open={settingsOpen}\n        onClose={() => {\n          setSettingsOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n    </>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\nimport { DEFAULT_VIDEO_CONSTRAINTS } from '../../constants';\nimport { LocalVideoTrack } from 'twilio-video';\nimport useDevices from '../useDevices/useDevices';\nimport useMediaStreamTrack from '../useMediaStreamTrack/useMediaStreamTrack';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useFlipCameraToggle() {\n  const { localTracks } = useVideoContext();\n  const [supportsFacingMode, setSupportsFacingMode] = useState(false);\n  const videoTrack = localTracks.find(track => track.name.includes('camera')) as LocalVideoTrack | undefined;\n  const mediaStreamTrack = useMediaStreamTrack(videoTrack);\n  const { videoInputDevices } = useDevices();\n\n  useEffect(() => {\n    // The 'supportsFacingMode' variable determines if this component is rendered\n    // If 'facingMode' exists, we will set supportsFacingMode to true.\n    // However, if facingMode is ever undefined again (when the user unpublishes video), we\n    // won't set 'supportsFacingMode' to false. This prevents the icon from briefly\n    // disappearing when the user switches their front/rear camera.\n    const currentFacingMode = mediaStreamTrack?.getSettings().facingMode;\n    if (currentFacingMode && supportsFacingMode === false) {\n      setSupportsFacingMode(true);\n    }\n  }, [mediaStreamTrack, supportsFacingMode]);\n\n  const toggleFacingMode = useCallback(() => {\n    const newFacingMode = mediaStreamTrack?.getSettings().facingMode === 'user' ? 'environment' : 'user';\n    videoTrack?.restart({\n      ...(DEFAULT_VIDEO_CONSTRAINTS as {}),\n      facingMode: newFacingMode,\n    });\n  }, [mediaStreamTrack, videoTrack]);\n\n  return {\n    flipCameraDisabled: !videoTrack,\n    toggleFacingMode,\n    flipCameraSupported: supportsFacingMode && videoInputDevices.length > 1,\n  };\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\ntype RoomStateType = 'disconnected' | 'connected' | 'reconnecting';\n\nexport default function useRoomState() {\n  const { room } = useVideoContext();\n  const [state, setState] = useState<RoomStateType>('disconnected');\n\n  useEffect(() => {\n    if (room) {\n      const setRoomState = () => setState(room.state as RoomStateType);\n      setRoomState();\n      room\n        .on('disconnected', setRoomState)\n        .on('reconnected', setRoomState)\n        .on('reconnecting', setRoomState);\n      return () => {\n        room\n          .off('disconnected', setRoomState)\n          .off('reconnected', setRoomState)\n          .off('reconnecting', setRoomState);\n      };\n    }\n  }, [room]);\n\n  return state;\n}\n","import React from 'react';\n\nexport default function MicOffIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"24\" viewBox=\"0 0 25 24\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          fill=\"#707578\"\n          d=\"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z\"\n          transform=\"translate(6.5 4)\"\n        />\n        <path\n          fill=\"red\"\n          d=\"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z\"\n          transform=\"translate(6.5 4)\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport MicIcon from '../../../icons/MicIcon';\nimport MicOffIcon from '../../../icons/MicOffIcon';\n\nimport useLocalAudioToggle from '../../../hooks/useLocalAudioToggle/useLocalAudioToggle';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\nimport micIcon from '../../../assets/icon_mic.png'\nexport default function ToggleAudioButton(props: { disabled?: boolean; className?: string }) {\n  const [isAudioEnabled, toggleAudioEnabled] = useLocalAudioToggle();\n  const { localTracks } = useVideoContext();\n  const hasAudioTrack = localTracks.some(track => track.kind === 'audio');\n\n  return (\n    <Button\n      className={props.className}\n      onClick={toggleAudioEnabled}\n      disabled={!hasAudioTrack || props.disabled}\n      startIcon={isAudioEnabled ?<img src={micIcon} style={{ width:20,\n        height:20}} alt='user'/>: <MicOffIcon />}\n      data-cy-audio-toggle\n    >\n      {/* {!hasAudioTrack ? 'No Audio' : isAudioEnabled ? 'Mute' : 'Unmute'} */}\n      {!hasAudioTrack ? 'No Audio' : null}\n\n    </Button>\n  );\n}\n","import { LocalAudioTrack } from 'twilio-video';\nimport { useCallback } from 'react';\nimport useIsTrackEnabled from '../useIsTrackEnabled/useIsTrackEnabled';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useLocalAudioToggle() {\n  const { localTracks } = useVideoContext();\n  const audioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\n  const isEnabled = useIsTrackEnabled(audioTrack);\n\n  const toggleAudioEnabled = useCallback(() => {\n    if (audioTrack) {\n      audioTrack.isEnabled ? audioTrack.disable() : audioTrack.enable();\n    }\n  }, [audioTrack]);\n\n  return [isEnabled, toggleAudioEnabled] as const;\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAoCAYAAAALz1FrAAAAAXNSR0IArs4c6QAAArZJREFUSA3tlktrFEEURie+H6hBF6JglKiZnQRxoYILUUFcxLgQRP+A4NLf4W9QN6JkYXAhLhQXgiA+kCDBFxKCIgSUEFETH9Fzxq5Q6ameqcHtfHBSt2/dR7qquqd7annqI+ww7Ia18BXewH2YhJbqaTlbqy1h/iicgKWJ2N/4bsNdmE/MN1ypxDj2JBfHwWYp6a/DCniZCtBXlezcdnCJcmSc8Um1ajJMRqv5uKBxxidVVWQ10f3JjGqn8eY1qarJRiKr5pqKFA7jzWtSVaFVTZF5jmReVZO8kplR3SaZC/UvrLtc3eXqaAU6Cl5G9BD4y/cZrkPljw9zufLUngHfZZM2OQZBdzBs9r/qpcCBoki9/Jy0+znObb6oTrlJbpGO4mwyF2WsLOw/ka8TM+SFOubO2WQmqrKhsL9Fvk7MkBfqmDtjk6moys7CdvN/Rv4c0/hwaEId86ZsMq5VaJDRTfsBLwpf7mC8eeZbJ2jcJmPgR5raDHsbVq02yjhb2O0G44xX5ltHWXfMJtPwCIJOYawHb/1mcLYZjTPePPODrDsdviA/cLEfloMfA7vgObyDSRiA+MRw2ZCH5jI8gzVwHsJdfMe+ArOhibfrAQhL1Ys9CDZ5C4/hC/wCk9/DQ7hR2NsYL8BWCLqKMeHFoieT6yMw7EQhz/1TsKANw95hNj7A+xkPwj4dkUax74XrchP9Jp0G32uxvNtP4LPg0myC8neWdzoC/lMLSjVxcguchR2QqwkCr8HHckJVkxBXxzgEA5D6znV/XsMDeAVJtWsSkjzqfXAxOBgvgSdvPvIlTZNzZKH49WOO120bGFje3HX4hiD1TITjbp46B/Fpazj541v9FnjkGyo3cQ98KHO0p0WQ+/MkzJeXq9M3b6hTHhfVKW+8rxWf+tRylQtVXbtcvmYWGv0Fx+9x68GuqQ0AAAAASUVORK5CYII=\"","import React from 'react';\n\nexport default function ChatIcon() {\n  return (\n    <svg width=\"19\" height=\"17\" viewBox=\"0 0 19 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M0 1C0 0.723858 0.223858 0.5 0.5 0.5H18.5C18.7761 0.5 19 0.723858 19 1V13C19 13.2761 18.7761 13.5 18.5 13.5H9.3096L6.32421 16.361C6.1796 16.4996 5.96624 16.5385 5.78202 16.4599C5.59779 16.3813 5.47826 16.2003 5.47826 16V13.5H0.5C0.223858 13.5 0 13.2761 0 13V1ZM1 1.5V12.5H5.97826C6.2544 12.5 6.47826 12.7239 6.47826 13V14.8283L8.76274 12.639C8.85583 12.5498 8.97977 12.5 9.1087 12.5H18V1.5H1Z\"\n        fill=\"#707578\"\n      />\n    </svg>\n  );\n}\n","import React, { createContext, useCallback, useEffect, useRef, useState } from 'react';\nimport { Client } from '@twilio/conversations';\nimport { Conversation } from '@twilio/conversations/lib/conversation';\nimport { Message } from '@twilio/conversations/lib/message';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\n\ntype ChatContextType = {\n  isChatWindowOpen: boolean;\n  setIsChatWindowOpen: (isChatWindowOpen: boolean) => void;\n  connect: (token: string) => void;\n  hasUnreadMessages: boolean;\n  messages: Message[];\n  conversation: Conversation | null;\n};\n\nexport const ChatContext = createContext<ChatContextType>(null!);\n\nexport const ChatProvider: React.FC = ({ children }) => {\n  const { room, onError } = useVideoContext();\n  const isChatWindowOpenRef = useRef(false);\n  const [isChatWindowOpen, setIsChatWindowOpen] = useState(false);\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n  const [chatClient, setChatClient] = useState<Client>();\n\n  const connect = useCallback(\n    (token: string) => {\n      Client.create(token)\n        .then(client => {\n          //@ts-ignore\n          window.chatClient = client;\n          setChatClient(client);\n        })\n        .catch(() => {\n          onError(new Error(\"There was a problem connecting to Twilio's conversation service.\"));\n        });\n    },\n    [onError]\n  );\n\n  useEffect(() => {\n    if (conversation) {\n      const handleMessageAdded = (message: Message) => setMessages(oldMessages => [...oldMessages, message]);\n      conversation.getMessages().then(newMessages => setMessages(newMessages.items));\n      conversation.on('messageAdded', handleMessageAdded);\n      return () => {\n        conversation.off('messageAdded', handleMessageAdded);\n      };\n    }\n  }, [conversation]);\n\n  useEffect(() => {\n    // If the chat window is closed and there are new messages, set hasUnreadMessages to true\n    if (!isChatWindowOpenRef.current && messages.length) {\n      setHasUnreadMessages(true);\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    isChatWindowOpenRef.current = isChatWindowOpen;\n    if (isChatWindowOpen) setHasUnreadMessages(false);\n  }, [isChatWindowOpen]);\n\n  useEffect(() => {\n    if (room && chatClient) {\n      chatClient\n        .getConversationByUniqueName(room.sid)\n        .then(newConversation => {\n          //@ts-ignore\n          window.chatConversation = newConversation;\n          setConversation(newConversation);\n        })\n        .catch(() => {\n          onError(new Error('There was a problem getting the Conversation associated with this room.'));\n        });\n    }\n  }, [room, chatClient, onError]);\n\n  return (\n    <ChatContext.Provider\n      value={{ isChatWindowOpen, setIsChatWindowOpen, connect, hasUnreadMessages, messages, conversation }}\n    >\n      {children}\n    </ChatContext.Provider>\n  );\n};\n","import { useContext } from 'react';\nimport { ChatContext } from '../../components/ChatProvider';\n\nexport default function useChatContext() {\n  const context = useContext(ChatContext);\n  if (!context) {\n    throw new Error('useChatContext must be used within a ChatProvider');\n  }\n  return context;\n}\n","import React, { useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ChatIcon from '../../../icons/ChatIcon';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core';\nimport useChatContext from '../../../hooks/useChatContext/useChatContext';\n\nexport const ANIMATION_DURATION = 700;\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    position: 'relative',\n    display: 'flex',\n  },\n  circle: {\n    width: '10px',\n    height: '10px',\n    backgroundColor: '#5BB75B',\n    borderRadius: '50%',\n    position: 'absolute',\n    top: '-3px',\n    left: '13px',\n    opacity: 0,\n    transition: `opacity ${ANIMATION_DURATION * 0.5}ms ease-in`,\n  },\n  hasUnreadMessages: {\n    opacity: 1,\n  },\n  ring: {\n    border: '3px solid #5BB75B',\n    borderRadius: '30px',\n    height: '14px',\n    width: '14px',\n    position: 'absolute',\n    left: '11px',\n    top: '-5px',\n    opacity: 0,\n  },\n  animateRing: {\n    animation: `$expand ${ANIMATION_DURATION}ms ease-out`,\n    animationIterationCount: 1,\n  },\n  '@keyframes expand': {\n    '0%': {\n      transform: 'scale(0.1, 0.1)',\n      opacity: 0,\n    },\n    '50%': {\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(1.4, 1.4)',\n      opacity: 0,\n    },\n  },\n});\n\nexport default function ToggleChatButton() {\n  const classes = useStyles();\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const { isChatWindowOpen, setIsChatWindowOpen, conversation, hasUnreadMessages } = useChatContext();\n\n  const toggleChatWindow = () => {\n    setIsChatWindowOpen(!isChatWindowOpen);\n  };\n\n  useEffect(() => {\n    if (shouldAnimate) {\n      setTimeout(() => setShouldAnimate(false), ANIMATION_DURATION);\n    }\n  }, [shouldAnimate]);\n\n  useEffect(() => {\n    if (conversation && !isChatWindowOpen) {\n      const handleNewMessage = () => setShouldAnimate(true);\n      conversation.on('messageAdded', handleNewMessage);\n      return () => {\n        conversation.off('messageAdded', handleNewMessage);\n      };\n    }\n  }, [conversation, isChatWindowOpen]);\n\n  return (\n    <Button\n      data-cy-chat-button\n      onClick={toggleChatWindow}\n      disabled={!conversation}\n      startIcon={\n        <div className={classes.iconContainer}>\n          <ChatIcon />\n          <div className={clsx(classes.ring, { [classes.animateRing]: shouldAnimate })} />\n          <div className={clsx(classes.circle, { [classes.hasUnreadMessages]: hasUnreadMessages })} />\n        </div>\n      }\n    >\n      Details\n    </Button>\n  );\n}\n","import React from 'react';\n\nexport default function VideoOffIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          fill=\"#707578\"\n          d=\"M10.503.85c.32 0 .611.125.827.329l-.696.697c-.025-.018-.053-.032-.084-.038l-.047-.006H1.207c-.102 0-.19.071-.216.165l-.008.059v7.866c0 .101.07.189.165.215l.059.008h1.156l-.983.983h-.173c-.624 0-1.139-.476-1.2-1.083L0 9.922V2.056C0 1.433.476.917 1.084.856l.123-.007h9.296zm5.49 1.124l.007.082v7.866c0 .337-.328.566-.635.47l-.076-.03-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H4.16l.984-.983h5.359c.101 0 .189-.07.215-.164l.008-.06V4.564l.983-.982.353-.353 3.227-1.612c.301-.15.652.04.704.358zm-.977.876L11.71 4.504v2.967l3.307 1.654V2.85z\"\n          transform=\"translate(4 6)\"\n        />\n        <path\n          fill=\"red\"\n          fillRule=\"nonzero\"\n          d=\"M13.06.144c.192-.192.503-.192.695 0 .171.17.19.436.057.627l-.057.068-12.29 12.29c-.192.193-.503.193-.695 0-.171-.17-.19-.435-.057-.626l.057-.069L13.06.144z\"\n          transform=\"translate(4 6)\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import React, { useCallback, useRef } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport VideoOffIcon from '../../../icons/VideoOffIcon';\nimport VideoOnIcon from '../../../icons/VideoOnIcon';\n\nimport useDevices from '../../../hooks/useDevices/useDevices';\nimport useLocalVideoToggle from '../../../hooks/useLocalVideoToggle/useLocalVideoToggle';\nimport videoIcon  from '../../../assets/icon_video-camera.png'\nexport default function ToggleVideoButton(props: { disabled?: boolean; className?: string }) {\n  const [isVideoEnabled, toggleVideoEnabled] = useLocalVideoToggle();\n  const lastClickTimeRef = useRef(0);\n  const { hasVideoInputDevices } = useDevices();\n\n  const toggleVideo = useCallback(() => {\n    if (Date.now() - lastClickTimeRef.current > 500) {\n      lastClickTimeRef.current = Date.now();\n      toggleVideoEnabled();\n    }\n  }, [toggleVideoEnabled]);\n\n  return (\n    <Button\n      className={props.className}\n      onClick={toggleVideo}\n      disabled={!hasVideoInputDevices || props.disabled}\n      startIcon={isVideoEnabled ? <img src={videoIcon} style={{ width:20,\n        height:20}} alt='user'/> : <VideoOffIcon />}\n    >\n      {/* {!hasVideoInputDevices ? 'No Video' : isVideoEnabled ? 'Stop Video' : 'Start Video'} */}\n      {!hasVideoInputDevices ? 'No Video' : null}\n\n    </Button>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAbCAYAAAADDr0pAAAAAXNSR0IArs4c6QAAAUpJREFUWAntmD9rwkAYh+MfBBehFIdObo5uXToVagti7YcSBD+AY8eOnYpbSwdBh479AIVOnUTo0kFtfX6BK5QELlzFu0BeeDScd3mfe73kNKUoiirQhTM4gkPEiiQLeIRvl4RG+prBdZcTOI5Rrjas4c3lHGUGqdK+wjm3xI99Wf8nd9WjtGvqFgMHeRI/QbgPHc04D+Jayj04hRLEEbJ4A8Mr0AWc8Ew0xNPx+6Jb5QWcQw1SIzTxLpaXYN1TQhO/SS1vSqPu47mMQvzQX1tR8aLiGStQLJWMhbJ1e6DDl62TPg9tA3rCaQ7WLT/EpaKKT2EIM9hAIkIUN5KfHNzDCF7gB34jZHEjueTgDsbwahpDW+PGK+39g8ZbiP+6qeKaka9wyf2O7ETiejDjK5xz64GQZrCFJlh/wNNnH6EnWc+g29+fiy7ryXcI6iW8/7EqSwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport EndCallButton from '../Buttons/EndCallButton/EndCallButton';\nimport { isMobile } from '../../utils';\nimport Menu from './Menu/Menu';\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport { Typography, Grid, Hidden } from '@material-ui/core';\nimport ToggleAudioButton from '../Buttons/ToggleAudioButton/ToggleAudioButton';\nimport ToggleChatButton from '../Buttons/ToggleChatButton/ToggleChatButton';\nimport ToggleVideoButton from '../Buttons/ToggleVideoButton/ToggleVideoButton';\n// import ToggleScreenShareButton from '../Buttons/ToogleScreenShareButton/ToggleScreenShareButton';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      backgroundColor: `white`,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      height: `${theme.footerHeight}px`,\n      position: 'fixed',\n      display: 'flex',\n      padding: '0 1.43em',\n      zIndex: 10,\n      [theme.breakpoints.down('sm')]: {\n        height: `${theme.mobileFooterHeight}px`,\n        padding: 0,\n      },\n      \n    },\n    screenShareBanner: {\n      position: 'fixed',\n      zIndex: 10,\n      bottom: `${theme.footerHeight}px`,\n      left: 0,\n      right: 0,\n      height: '104px',\n      background: 'rgba(0, 0, 0, 0.5)',\n      '& h6': {\n        color: 'white',\n      },\n      '& button': {\n        background: 'white',\n        color: theme.brand,\n        border: `2px solid ${theme.brand}`,\n        margin: '0 2em',\n        '&:hover': {\n          color: '#600101',\n          border: `2px solid #600101`,\n          background: '#FFE9E7',\n        },\n      },\n    },\n    hideMobile: {\n      display: 'initial',\n      [theme.breakpoints.down('sm')]: {\n        display: 'none',\n      },\n    },\n  })\n);\n\nexport default function MenuBar() {\n  const classes = useStyles();\n  const { isSharingScreen, toggleScreenShare } = useVideoContext();\n  const roomState = useRoomState();\n  const isReconnecting = roomState === 'reconnecting';\n  const { room } = useVideoContext();\n\n  return (\n    <>\n      {isSharingScreen && (\n        <Grid container justify=\"center\" alignItems=\"center\" className={classes.screenShareBanner}>\n          <Typography variant=\"h6\">You are sharing your screen</Typography>\n          <Button onClick={() => toggleScreenShare()}>Stop Sharing</Button>\n        </Grid>\n      )}\n      <footer className={classes.container}>\n        <Grid container justify=\"space-around\" alignItems=\"center\">\n          <Hidden smDown>\n            <Grid style={{ flex: 1 }}>\n              <Typography variant=\"body1\">{room!.name}</Typography>\n            </Grid>\n          </Hidden>\n          <Grid item>\n            <Grid container justify=\"center\">\n              <ToggleAudioButton disabled={isReconnecting} />\n              <ToggleVideoButton disabled={isReconnecting} />\n              {/* {!isSharingScreen && !isMobile && <ToggleScreenShareButton disabled={isReconnecting} />} */}\n              {process.env.REACT_APP_DISABLE_TWILIO_CONVERSATIONS !== 'true' && <ToggleChatButton />}\n            </Grid>\n          </Grid>\n          <Hidden smDown>\n            <Grid style={{ flex: 1 }}>\n              <Grid container justify=\"flex-end\">\n                <Menu />\n                <EndCallButton />\n              </Grid>\n            </Grid>\n          </Hidden>\n        </Grid>\n      </footer>\n    </>\n  );\n}\n","import { Grid, makeStyles, Theme, Typography } from '@material-ui/core';\nimport React from 'react';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport EndCallButton from '../Buttons/EndCallButton/EndCallButton';\nimport Menu from '../MenuBar/Menu/Menu';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    background: 'white',\n    paddingLeft: '1em',\n    display: 'none',\n    height: `${theme.mobileTopBarHeight}px`,\n    [theme.breakpoints.down('sm')]: {\n      display: 'flex',\n    },\n  },\n  endCallButton: {\n    height: '28px',\n    fontSize: '0.85rem',\n    padding: '0 0.6em',\n  },\n  settingsButton: {\n    [theme.breakpoints.down('sm')]: {\n      height: '28px',\n      minWidth: '28px',\n      border: '1px solid rgb(136, 140, 142)',\n      padding: 0,\n      margin: '0 1em',\n    },\n  },\n}));\n\nexport default function MobileTopMenuBar() {\n  const classes = useStyles();\n  const { room } = useVideoContext();\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"space-between\" className={classes.container}>\n      <Typography variant=\"subtitle1\">{room!.name}</Typography>\n      <div>\n        <EndCallButton className={classes.endCallButton} />\n        <Menu buttonClassName={classes.settingsButton} />\n      </div>\n    </Grid>\n  );\n}\n","import React from 'react';\n\nexport default function AvatarIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"73\" height=\"73\" viewBox=\"0 0 73 73\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <circle cx=\"36.5\" cy=\"36.5\" r=\"36.5\" fill=\"#FFF\" />\n        <path\n          fill=\"#282A2B\"\n          strokeLinejoin=\"round\"\n          d=\"M30.973 23.925c-3.162 3.794-3.162 9.886 0 13.68l.262.301c.266.293.548.564.842.812l.192.154v2.95l-6.71 2.397-.213.082c-2.03.834-3.346 2.793-3.346 4.97v2.766c0 .532.431.963.963.963h27.874c.531 0 .962-.431.962-.963V49.27l-.005-.228-.015-.233c-.187-2.092-1.562-3.883-3.539-4.59l-6.71-2.397v-2.95l.192-.154c.393-.33.762-.702 1.104-1.112 3.162-3.795 3.162-9.887 0-13.681-3.25-3.9-8.603-3.9-11.853 0zm10.374 1.232c2.567 3.08 2.567 8.135 0 11.216-.404.484-.85.894-1.328 1.226-.26.18-.414.476-.414.791v4.111c0 .407.255.77.639.907l7.348 2.625c1.314.47 2.213 1.687 2.278 3.077l.004.183v1.781h-25.95l.002-1.804c0-1.394.843-2.65 2.131-3.18l.172-.065 7.327-2.617c.383-.137.639-.5.639-.907v-4.11c0-.316-.155-.612-.415-.792-.478-.332-.924-.742-1.328-1.226-2.567-3.08-2.567-8.135 0-11.216 2.427-2.912 6.248-2.974 8.735-.186l.16.186z\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\nimport { LocalAudioTrack } from 'twilio-video';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator';\n\nexport default function LocalAudioLevelIndicator() {\n  const { localTracks } = useVideoContext();\n  const audioTrack = localTracks.find(track => track.kind === 'audio') as LocalAudioTrack;\n\n  return <AudioLevelIndicator audioTrack={audioTrack} />;\n}\n","import React from 'react';\nimport AvatarIcon from '../../../../icons/AvatarIcon';\nimport { makeStyles, Theme, Typography } from '@material-ui/core';\nimport LocalAudioLevelIndicator from '../../../LocalAudioLevelIndicator/LocalAudioLevelIndicator';\nimport { LocalVideoTrack } from 'twilio-video';\nimport VideoTrack from '../../../VideoTrack/VideoTrack';\nimport useVideoContext from '../../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    position: 'relative',\n    height: 0,\n    overflow: 'hidden',\n    paddingTop: `${(9 / 16) * 100}%`,\n    background: 'black',\n  },\n  innerContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n  },\n  identityContainer: {\n    position: 'absolute',\n    bottom: 0,\n    zIndex: 1,\n  },\n  identity: {\n    background: 'rgba(0, 0, 0, 0.5)',\n    color: 'white',\n    padding: '0.18em 0.3em',\n    margin: 0,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  avatarContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'black',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n    [theme.breakpoints.down('sm')]: {\n      '& svg': {\n        transform: 'scale(0.7)',\n      },\n    },\n  },\n}));\n\nexport default function LocalVideoPreview({ identity }: { identity: string }) {\n  const classes = useStyles();\n  const { localTracks } = useVideoContext();\n\n  const videoTrack = localTracks.find(track => track.name.includes('camera')) as LocalVideoTrack;\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.innerContainer}>\n        {videoTrack ? (\n          <VideoTrack track={videoTrack} isLocal />\n        ) : (\n          <div className={classes.avatarContainer}>\n            <AvatarIcon />\n          </div>\n        )}\n      </div>\n\n      <div className={classes.identityContainer}>\n        <span className={classes.identity}>\n          <LocalAudioLevelIndicator />\n          <Typography variant=\"body1\" color=\"inherit\" component=\"span\">\n            {identity}\n          </Typography>\n        </span>\n      </div>\n    </div>\n  );\n}\n","import { VideoTrack } from 'twilio-video';\n\nexport type RenderDimensionValue =\n  | 'low'\n  | 'cif'\n  | 'vga'\n  | 'wvga'\n  | '540p'\n  | '720p'\n  | '960p'\n  | 'standard1080p'\n  | 'wide1080p'\n  | 'default';\n\nexport interface RenderDimension {\n  label: string;\n  value: RenderDimensionValue;\n  resolution?: VideoTrack.Dimensions;\n}\n\nexport const RenderDimensions: RenderDimension[] = [\n  {\n    label: 'Low (160 x 90)',\n    value: 'low',\n    resolution: { width: 160, height: 90 },\n  },\n  {\n    label: 'CIF (352 x 288)',\n    value: 'cif',\n    resolution: { width: 352, height: 288 },\n  },\n  {\n    label: 'VGA (640 x 480)',\n    value: 'vga',\n    resolution: { width: 640, height: 480 },\n  },\n  {\n    label: 'WVGA (800 x 480)',\n    value: 'wvga',\n    resolution: { width: 800, height: 480 },\n  },\n  {\n    label: 'HD 540P (960 x 540)',\n    value: '540p',\n    resolution: { width: 960, height: 540 },\n  },\n  {\n    label: 'HD 720P (1280 x 720)',\n    value: '720p',\n    resolution: { width: 1280, height: 720 },\n  },\n  {\n    label: 'HD 960P (1280 x 960)',\n    value: '960p',\n    resolution: { width: 1280, height: 960 },\n  },\n  {\n    label: 'HD Standard 1080P (1440 x 1080)',\n    value: 'standard1080p',\n    resolution: { width: 1440, height: 1080 },\n  },\n  {\n    label: 'HD Widescreen 1080P (1920 x 1080)',\n    value: 'wide1080p',\n    resolution: { width: 1920, height: 1080 },\n  },\n  {\n    label: 'Server Default',\n    value: 'default',\n    resolution: undefined,\n  },\n];\n\nexport function getResolution(value?: RenderDimensionValue) {\n  if (typeof value === 'undefined') {\n    return undefined;\n  }\n\n  return RenderDimensions.find(item => item.value === value)?.resolution;\n}\n","import React, { useCallback } from 'react';\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { inputLabels, Settings } from '../../state/settings/settingsReducer';\nimport { RenderDimensions } from '../../state/settings/renderDimensions';\nimport { useAppState } from '../../state';\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    width: '600px',\n    minHeight: '400px',\n    [theme.breakpoints.down('xs')]: {\n      width: 'calc(100vw - 32px)',\n    },\n    '& .inputSelect': {\n      width: 'calc(100% - 35px)',\n    },\n  },\n  button: {\n    float: 'right',\n  },\n  paper: {\n    [theme.breakpoints.down('xs')]: {\n      margin: '16px',\n    },\n  },\n  formControl: {\n    display: 'block',\n    margin: '1.5em 0',\n    '&:first-child': {\n      margin: '0 0 1.5em 0',\n    },\n  },\n  label: {\n    width: '133%', // Labels have scale(0.75) applied to them, so this effectively makes the width 100%\n  },\n}));\n\nconst withDefault = (val?: string) => (typeof val === 'undefined' ? 'default' : val);\n\nconst RenderDimensionItems = RenderDimensions.map(({ label, value }) => (\n  <MenuItem value={value} key={value}>\n    {label}\n  </MenuItem>\n));\n\nexport default function ConnectionOptionsDialog({ open, onClose }: { open: boolean; onClose: () => void }) {\n  const classes = useStyles();\n  const { settings, dispatchSetting } = useAppState();\n  const roomState = useRoomState();\n  const isDisabled = roomState !== 'disconnected';\n\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<{ value: unknown; name?: string }>) => {\n      dispatchSetting({ name: e.target.name as keyof Settings, value: e.target.value as string });\n    },\n    [dispatchSetting]\n  );\n\n  const handleNumberChange = useCallback(\n    (e: React.ChangeEvent<{ value: unknown; name?: string }>) => {\n      if (!/[^\\d]/.test(e.target.value as string)) handleChange(e);\n    },\n    [handleChange]\n  );\n\n  return (\n    <Dialog open={open} onClose={onClose} classes={{ paper: classes.paper }}>\n      <DialogTitle>Connection Settings</DialogTitle>\n      <Divider />\n      <DialogContent className={classes.container}>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <Typography hidden={!isDisabled} variant=\"body2\">\n              These settings cannot be changed when connected to a room.\n            </Typography>\n          </Grid>\n\n          <Grid item sm={6} xs={12}>\n            <FormControl className={classes.formControl}>\n              <InputLabel id={inputLabels.dominantSpeakerPriority}>Dominant Speaker Priority:</InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.dominantSpeakerPriority}\n                label={inputLabels.dominantSpeakerPriority}\n                value={withDefault(settings.dominantSpeakerPriority)}\n                onChange={handleChange}\n              >\n                <MenuItem value=\"low\">Low</MenuItem>\n                <MenuItem value=\"standard\">Standard</MenuItem>\n                <MenuItem value=\"high\">High</MenuItem>\n                <MenuItem value=\"default\">Server Default</MenuItem>\n              </Select>\n            </FormControl>\n\n            <FormControl className={classes.formControl}>\n              <InputLabel id={inputLabels.trackSwitchOffMode}>Track Switch Off Mode:</InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.trackSwitchOffMode}\n                label={inputLabels.trackSwitchOffMode}\n                value={withDefault(settings.trackSwitchOffMode)}\n                onChange={handleChange}\n              >\n                <MenuItem value=\"predicted\">Predicted</MenuItem>\n                <MenuItem value=\"detected\">Detected</MenuItem>\n                <MenuItem value=\"disabled\">Disabled</MenuItem>\n                <MenuItem value=\"default\">Server Default</MenuItem>\n              </Select>\n            </FormControl>\n\n            <FormControl className={classes.formControl}>\n              <InputLabel id={inputLabels.bandwidthProfileMode}>Mode:</InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.bandwidthProfileMode}\n                label={inputLabels.bandwidthProfileMode}\n                value={withDefault(settings.bandwidthProfileMode)}\n                onChange={handleChange}\n              >\n                <MenuItem value=\"grid\">Grid</MenuItem>\n                <MenuItem value=\"collaboration\">Collaboration</MenuItem>\n                <MenuItem value=\"presentation\">Presentation</MenuItem>\n                <MenuItem value=\"default\">Server Default</MenuItem>\n              </Select>\n            </FormControl>\n\n            <FormControl className={classes.formControl}>\n              <TextField\n                disabled={isDisabled}\n                fullWidth\n                id={inputLabels.maxTracks}\n                label=\"Max Tracks\"\n                placeholder=\"Leave blank for no limit\"\n                name={inputLabels.maxTracks}\n                value={withDefault(settings.maxTracks)}\n                onChange={handleNumberChange}\n              />\n            </FormControl>\n\n            <FormControl className={classes.formControl}>\n              <TextField\n                disabled={isDisabled}\n                fullWidth\n                id={inputLabels.maxAudioBitrate}\n                label=\"Max Audio Bitrate\"\n                placeholder=\"Leave blank for no limit\"\n                name={inputLabels.maxAudioBitrate}\n                value={withDefault(settings.maxAudioBitrate)}\n                onChange={handleNumberChange}\n              />\n            </FormControl>\n          </Grid>\n          <Grid item sm={6} xs={12}>\n            <FormControl fullWidth className={classes.formControl}>\n              <InputLabel id={inputLabels.renderDimensionLow} className={classes.label}>\n                Render Dimension (Low Priority):\n              </InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.renderDimensionLow}\n                label={inputLabels.renderDimensionLow}\n                value={withDefault(settings.renderDimensionLow)}\n                onChange={handleChange}\n              >\n                {RenderDimensionItems}\n              </Select>\n            </FormControl>\n\n            <FormControl fullWidth className={classes.formControl}>\n              <InputLabel id={inputLabels.renderDimensionStandard} className={classes.label}>\n                Render Dimension (Standard Priority):\n              </InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.renderDimensionStandard}\n                label={inputLabels.renderDimensionStandard}\n                value={withDefault(settings.renderDimensionStandard)}\n                onChange={handleChange}\n              >\n                {RenderDimensionItems}\n              </Select>\n            </FormControl>\n\n            <FormControl fullWidth className={classes.formControl}>\n              <InputLabel id={inputLabels.renderDimensionHigh} className={classes.label}>\n                Render Dimension (High Priority):\n              </InputLabel>\n              <Select\n                fullWidth\n                disabled={isDisabled}\n                name={inputLabels.renderDimensionHigh}\n                label={inputLabels.renderDimensionHigh}\n                value={withDefault(settings.renderDimensionHigh)}\n                onChange={handleChange}\n              >\n                {RenderDimensionItems}\n              </Select>\n            </FormControl>\n          </Grid>\n        </Grid>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <Button className={classes.button} color=\"primary\" variant=\"contained\" onClick={onClose}>\n          Done\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport MenuContainer from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles, Theme, useMediaQuery } from '@material-ui/core';\n\nimport AboutDialog from '../../../AboutDialog/AboutDialog';\nimport ConnectionOptionsDialog from '../../../ConnectionOptionsDialog/ConnectionOptionsDialog';\nimport DeviceSelectionDialog from '../../../DeviceSelectionDialog/DeviceSelectionDialog';\nimport SettingsIcon from '../../../../icons/SettingsIcon';\nimport { useAppState } from '../../../../state';\n\nconst useStyles = makeStyles({\n  settingsButton: {\n    margin: '1.8em 0 0',\n  },\n});\n\nexport default function SettingsMenu({ mobileButtonClass }: { mobileButtonClass?: string }) {\n  const classes = useStyles();\n  const { roomType } = useAppState();\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [aboutOpen, setAboutOpen] = useState(false);\n  const [deviceSettingsOpen, setDeviceSettingsOpen] = useState(false);\n  const [connectionSettingsOpen, setConnectionSettingsOpen] = useState(false);\n\n  const anchorRef = useRef<HTMLButtonElement>(null);\n\n  return (\n    <>\n      {isMobile ? (\n        <Button\n          ref={anchorRef}\n          onClick={() => setMenuOpen(true)}\n          startIcon={<MoreIcon />}\n          className={mobileButtonClass}\n        >\n          More\n        </Button>\n      ) : (\n        <Button\n          ref={anchorRef}\n          onClick={() => setMenuOpen(true)}\n          startIcon={<SettingsIcon />}\n          className={classes.settingsButton}\n        >\n          Settings\n        </Button>\n      )}\n      <MenuContainer\n        open={menuOpen}\n        onClose={() => setMenuOpen(isOpen => !isOpen)}\n        anchorEl={anchorRef.current}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: isMobile ? 'left' : 'right',\n        }}\n        transformOrigin={{\n          vertical: isMobile ? -55 : -45,\n          horizontal: 'center',\n        }}\n      >\n        <MenuItem onClick={() => setAboutOpen(true)}>\n          <Typography variant=\"body1\">About</Typography>\n        </MenuItem>\n        <MenuItem onClick={() => setDeviceSettingsOpen(true)}>\n          <Typography variant=\"body1\">Audio and Video Settings</Typography>\n        </MenuItem>\n        {roomType !== 'peer-to-peer' && roomType !== 'go' && (\n          <MenuItem onClick={() => setConnectionSettingsOpen(true)}>\n            <Typography variant=\"body1\">Connection Settings</Typography>\n          </MenuItem>\n        )}\n      </MenuContainer>\n      <AboutDialog\n        open={aboutOpen}\n        onClose={() => {\n          setAboutOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n      <DeviceSelectionDialog\n        open={deviceSettingsOpen}\n        onClose={() => {\n          setDeviceSettingsOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n      <ConnectionOptionsDialog\n        open={connectionSettingsOpen}\n        onClose={() => {\n          setConnectionSettingsOpen(false);\n          setMenuOpen(false);\n        }}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport { makeStyles, Typography, Grid, Button, Theme, Hidden } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport LocalVideoPreview from './LocalVideoPreview/LocalVideoPreview';\nimport SettingsMenu from './SettingsMenu/SettingsMenu';\nimport { Steps } from '../PreJoinScreens';\nimport ToggleAudioButton from '../../Buttons/ToggleAudioButton/ToggleAudioButton';\nimport ToggleVideoButton from '../../Buttons/ToggleVideoButton/ToggleVideoButton';\nimport { useAppState } from '../../../state';\nimport useChatContext from '../../../hooks/useChatContext/useChatContext';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  gutterBottom: {\n    marginBottom: '1em',\n  },\n  marginTop: {\n    marginTop: '1em',\n  },\n  deviceButton: {\n    width: '100%',\n    border: '2px solid #aaa',\n    margin: '1em 0',\n  },\n  localPreviewContainer: {\n    paddingRight: '2em',\n    [theme.breakpoints.down('sm')]: {\n      padding: '0 2.5em',\n    },\n  },\n  joinButtons: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    [theme.breakpoints.down('sm')]: {\n      flexDirection: 'column-reverse',\n      width: '100%',\n      '& button': {\n        margin: '0.5em 0',\n      },\n    },\n  },\n  mobileButtonBar: {\n    [theme.breakpoints.down('sm')]: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      margin: '1.5em 0 1em',\n    },\n  },\n  mobileButton: {\n    padding: '0.8em 0',\n    margin: 0,\n  },\n}));\n\ninterface DeviceSelectionScreenProps {\n  name: string;\n  roomName: string;\n  setStep: (step: Steps) => void;\n}\n\nexport default function DeviceSelectionScreen({ name, roomName, setStep }: DeviceSelectionScreenProps) {\n  const classes = useStyles();\n  const { getToken, isFetching } = useAppState();\n  const { connect: chatConnect } = useChatContext();\n  const { connect: videoConnect, isAcquiringLocalTracks, isConnecting } = useVideoContext();\n  const disableButtons = isFetching || isAcquiringLocalTracks || isConnecting;\n\n  const handleJoin = () => {\n    getToken(name, roomName).then(token => {\n      videoConnect(token);\n      process.env.REACT_APP_DISABLE_TWILIO_CONVERSATIONS !== 'true' && chatConnect(token);\n    });\n  };\n\n  if (isFetching || isConnecting) {\n    return (\n      <Grid container justify=\"center\" alignItems=\"center\" direction=\"column\" style={{ height: '100%' }}>\n        <div>\n          <CircularProgress variant=\"indeterminate\" />\n        </div>\n        <div>\n          <Typography variant=\"body2\" style={{ fontWeight: 'bold', fontSize: '16px' }}>\n            Joining Meeting\n          </Typography>\n        </div>\n      </Grid>\n    );\n  }\n\n  return (\n    <>\n      <Typography variant=\"h5\" className={classes.gutterBottom}>\n        Join {roomName}\n      </Typography>\n\n      <Grid container justify=\"center\">\n        <Grid item md={7} sm={12} xs={12}>\n          <div className={classes.localPreviewContainer}>\n            <LocalVideoPreview identity={name} />\n          </div>\n          <div className={classes.mobileButtonBar}>\n            <Hidden mdUp>\n              <ToggleAudioButton className={classes.mobileButton} disabled={disableButtons} />\n              <ToggleVideoButton className={classes.mobileButton} disabled={disableButtons} />\n            </Hidden>\n            <SettingsMenu mobileButtonClass={classes.mobileButton} />\n          </div>\n        </Grid>\n        <Grid item md={5} sm={12} xs={12}>\n          <Grid container direction=\"column\" justify=\"space-between\" style={{ height: '100%' }}>\n            <div>\n              <Hidden smDown>\n                <ToggleAudioButton className={classes.deviceButton} disabled={disableButtons} />\n                <ToggleVideoButton className={classes.deviceButton} disabled={disableButtons} />\n              </Hidden>\n            </div>\n            <div className={classes.joinButtons}>\n              <Button variant=\"outlined\" color=\"primary\" onClick={() => setStep(Steps.roomNameStep)}>\n                Cancel\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                data-cy-join-now\n                onClick={handleJoin}\n                disabled={disableButtons}\n              >\n                Join Now\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function VideoLogo() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"96\" height=\"96\" viewBox=\"0 0 96 96\">\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <path\n          fill=\"#FFF\"\n          d=\"M43.86 0h8.28c11.661 0 18.564 1.74 24.675 5.01 6.112 3.267 10.908 8.063 14.175 14.175C94.26 25.295 96 32.197 96 43.86v8.28c0 11.661-1.74 18.564-5.01 24.675-3.267 6.112-8.063 10.908-14.175 14.175C70.704 94.26 63.801 96 52.14 96h-8.28c-11.661 0-18.564-1.74-24.675-5.01-6.112-3.267-10.908-8.063-14.175-14.175C1.74 70.705 0 63.803 0 52.14v-8.28c0-11.661 1.74-18.564 5.01-24.675C8.277 13.073 13.073 8.277 19.185 5.01 25.295 1.74 32.197 0 43.86 0z\"\n        />\n        <path\n          fill=\"#5571C6\"\n          d=\"M53.25 63h-25.5C25.679 63 24 61.321 24 59.25v-22.5c0-2.071 1.679-3.75 3.75-3.75h25.5c2.071 0 3.75 1.679 3.75 3.75v5.82l9.57-4.785c1.164-.583 2.546-.521 3.653.164 1.107.685 1.78 1.894 1.777 3.196V54.87c.008 1.3-.66 2.512-1.766 3.198-1.105.686-2.487.747-3.65.162L57 53.49v5.76C57 61.321 55.32 63 53.25 63zm-25.5-27c-.414 0-.75.336-.75.75v22.5c0 .414.336.75.75.75h25.5c.414 0 .75-.336.75-.75v-8.175c-.001-.518.266-1 .705-1.275.44-.275.99-.303 1.455-.075L67.92 55.5c.224.123.496.123.72 0 .22-.141.356-.383.36-.645v-13.71c-.004-.262-.14-.504-.36-.645-.224-.123-.496-.123-.72 0l-11.745 5.865c-.47.236-1.028.21-1.473-.069-.445-.28-.711-.77-.702-1.296v-8.25c0-.414-.336-.75-.75-.75h-25.5z\"\n        />\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport Person from '@material-ui/icons/Person';\nimport { StateContextType } from '../../../../state';\n\nconst useStyles = makeStyles({\n  red: {\n    color: 'white',\n    backgroundColor: '#F22F46',\n  },\n});\n\nexport function getInitials(name: string) {\n  return name\n    .split(' ')\n    .map(text => text[0])\n    .join('')\n    .toUpperCase();\n}\n\nexport default function UserAvatar({ user }: { user: StateContextType['user'] }) {\n  const classes = useStyles();\n  const { displayName, photoURL } = user!;\n\n  return photoURL ? (\n    <Avatar src={photoURL} />\n  ) : (\n    <Avatar className={classes.red}>{displayName ? getInitials(displayName) : <Person />}</Avatar>\n  );\n}\n","import React, { useState, useRef, useCallback } from 'react';\nimport { makeStyles, Typography, Button, MenuItem, Link } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useAppState } from '../../../state';\nimport UserAvatar from './UserAvatar/UserAvatar';\nimport Menu from '@material-ui/core/Menu';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nconst useStyles = makeStyles({\n  userContainer: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    margin: '1em',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  userButton: {\n    color: 'white',\n  },\n  logoutLink: {\n    color: 'white',\n    cursor: 'pointer',\n    padding: '10px 20px',\n  },\n});\n\nconst UserMenu: React.FC = () => {\n  const classes = useStyles();\n  const { user, signOut } = useAppState();\n  const { localTracks } = useVideoContext();\n\n  const [menuOpen, setMenuOpen] = useState(false);\n  const anchorRef = useRef<HTMLButtonElement>(null);\n\n  const handleSignOut = useCallback(() => {\n    localTracks.forEach(track => track.stop());\n    signOut?.();\n  }, [localTracks, signOut]);\n\n  if (process.env.REACT_APP_SET_AUTH === 'passcode') {\n    return (\n      <div className={classes.userContainer}>\n        <Link onClick={handleSignOut} className={classes.logoutLink}>\n          Logout\n        </Link>\n      </div>\n    );\n  }\n\n  if (process.env.REACT_APP_SET_AUTH === 'firebase') {\n    return (\n      <div className={classes.userContainer}>\n        <UserAvatar user={user} />\n        <Button onClick={() => setMenuOpen(isOpen => !isOpen)} ref={anchorRef} className={classes.userButton}>\n          {user!.displayName}\n          <ExpandMoreIcon />\n        </Button>\n        <Menu\n          open={menuOpen}\n          onClose={() => setMenuOpen(isOpen => !isOpen)}\n          anchorEl={anchorRef.current}\n          getContentAnchorEl={null}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n        >\n          <MenuItem onClick={handleSignOut}>\n            <Typography variant=\"body1\">Logout</Typography>\n          </MenuItem>\n        </Menu>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default UserMenu;\n","import React from 'react';\nimport { makeStyles, Theme, Typography } from '@material-ui/core';\nimport Swoosh from './swoosh';\nimport VideoLogo from './VideoLogo';\nimport TwilioLogo from './TwilioLogo';\nimport { useAppState } from '../../state';\nimport UserMenu from './UserMenu/UserMenu';\nimport { useLocation } from 'react-router-dom';\nimport logo from '../../assets/logo_TM2U.jpg';\nconst useStyles = makeStyles((theme: Theme) => ({\n  background: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'white',\n    height: '100%',\n  },\n  container: {\n    position: 'relative',\n    flex: '1',\n  },\n  innerContainer: {\n    display: 'flex',\n    width: '888px',\n    height: '379px',\n    borderRadius: '8px',\n    boxShadow: '0px 2px 4px 0px rgba(40, 42, 43, 0.3)',\n    overflow: 'hidden',\n    position: 'relative',\n    margin: 'auto',\n    [theme.breakpoints.down('sm')]: {\n      display: 'block',\n      height: 'auto',\n      width: 'calc(100% - 40px)',\n      margin: 'auto',\n      maxWidth: '400px',\n    },\n  },\n  swooshContainer: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    // backgroundImage: Swoosh,\n    backgroundColor:'#5571C6',\n    backgroundSize: 'cover',\n    width: '296px',\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n      height: '100px',\n      backgroundPositionY: '140px',\n    },\n  },\n  logoContainer: {\n    position: 'absolute',\n    width: '210px',\n    textAlign: 'center',\n    [theme.breakpoints.down('sm')]: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '90%',\n      textAlign: 'initial',\n      '& svg': {\n        height: '64px',\n      },\n    },\n  },\n  twilioLogo: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    margin: '20px',\n  },\n  content: {\n    background: 'white',\n    width: '100%',\n    padding: '4em',\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      padding: '2em',\n    },\n  },\n  title: {\n    color: 'white',\n    margin: '1em 0 0',\n    [theme.breakpoints.down('sm')]: {\n      margin: 0,\n      fontSize: '1.1rem',\n    },\n  },\n}));\n\ninterface IntroContainerProps {\n  children: React.ReactNode;\n}\n\nconst IntroContainer = (props: IntroContainerProps) => {\n  const classes = useStyles();\n  const { user } = useAppState();\n  const location = useLocation();\n\n  return (\n    <div className={classes.background}>\n      {/* <TwilioLogo className={classes.twilioLogo} /> */}\n      <img src={logo} className={classes.twilioLogo} alt='user'/>\n      {user && location.pathname !== '/login' && <UserMenu />}\n      <div className={classes.container}>\n        <div className={classes.innerContainer}>\n          <div className={classes.swooshContainer}>\n            <div className={classes.logoContainer}>\n              <VideoLogo />\n              <Typography variant=\"h6\" className={classes.title}>\n               Demo App\n              </Typography>\n            </div>\n          </div>\n          <div className={classes.content}>{props.children}</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default IntroContainer;\n","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAiKADAAQAAAABAAAAPgAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAPgCIAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/dAAQAEf/aAAwDAQACEQMRAD8A/v4oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/0P7+KACgAoAKAPyZ/wCC3P7QHxj/AGYf+Cc3xi+NHwF8c33w5+KHhbxJ8IIdA8WafYaPqdxYRa58WfBuh6tC1hr2n6ppV1b3+k6heWNzDd2M6vBcSBNj7HX6fg/A4TMc/wAJg8bRjiMPVp4vnpSlOKk4YWrOD5oShJNTjFq0o7fKXnZrWq0MFVq0ZOFSMqSjJWbV6kE97rVPt63PlPw1F/wcV/DLw3oHibSPGn7A37aWg6vomk6zBpnirQ/FfwO+IEttqVhBexQPc6BD4e8FxXojmCyzPPLAZNrBNpcJ6dT/AFCxFSpTlRzvKJwnOHNSnTxtBOLavabqVrXTdt7aXVve54rO6ai1PB4qLUX7ylSnZ69Eo3afn6R1Nz/h6z/wUF+DgMX7Vv8AwRn/AGkrGys8f2n4z/Zf8a+E/wBoXQkjXAlu49G0SK3vLa36yKLjWndQREWkkBao/wBWcixeuW8W5e2/ho5jRq4Gd2no5zdm/NU7dfd3k/7QxtL/AHjK66tvLDzhXj90de29++mqOx8H/wDBw5/wTS1TUE0L4peNvi3+zN4l3CKfw/8AtFfA/wCIfgW7tLgf6yG6vdM0rxNo1uY2JDyT6nFEnV2XOKyq8CcQxXPhqOFzCn0ngMbh6yku8VKdKT36Qb122ZUM6wLfLUlVoS00rUpw1f8A261+Xf8Auw/R/wCEn7cP7G/x5itpPg5+1H8BviLLdhTBp/hn4peD77WjuGQsmhf2sutQSAH5op9PikU8MFOA3z+KyfNcE39by3G4dJ2cqmGqxh8p8nI991J+aWil3U8Xhav8LEUZ3/lqQb77b3t008+8vqRWV1V0ZXR1DK6kMrKwyrKwyCpByCDgjkZyK806B1ABQAUAFABQAUAFAH//0f7+KAKt9e2um2V3qN9OlrZWFrcXt5cynEVva2sTz3E8hGSEihjeRyBwqnrTjFyajFXcmopLq27JdN2+/wBwN216LU/Lhf8Agt5/wSbeMyr+3Z8C2jXbukXWdVKLu+7ucaQVGe2Tz2x1r6T/AFP4m2/sXG3/AMEf/ln9fI8/+1cu/wCguj9/9fj+jP0F+Dvxk+F/7QPw28L/ABg+DHjXRPiL8MvGttd3vhTxn4cnkuNF1y1sNSvdHvJ7GaWG3kdLfU9OvbKQtEuJraUDgAt4WLwmJwOIqYXF0Z4fEUmlUo1FacHKKklJa2bjJP0fS9jspVadanGpSmp05axlHZ2dvzX9XPz0/wCC1Hwu8A/GP/gnd8ZPAPxN+OPhD9nPwbqmu/Ci61T4t+O9G1vX/DPh19J+Kng/U7C2vtL8Pf8AE1nk1y/tbbQ7NrcMsN5qEE048lHr3uEMTXwmfYSvh8FVzCtCGJUcLRnCnUqc2Gqxk1Kp7q5Itzd7XUbLWylx5pThUwVSE6saMXKm3UmnKK5akWk1Gz1ato/uuz9K/AVjDpngbwXptvfQ6nBp/hPw5YwalbxvFb6hDaaPZwRX0EUmZI4btI1nijkO9EkVXywNfPV5OVatJpxcqtSTi94tzbs7aXV7aHdBWhBXulGKuutktfmdZWRR4+0HwN/aF0fxBp+oaL8P/i3oXh3xJrPgrxHp3iPw3pHinTtN8S6DKkOs6HfWHiDTrmFbqxknQTIYGiYSq8bOjq7erisFnGRVML9Zp4vLamMweHzHCSVR0pV8Fiot4fE05Upq9Oqoy5XdPRpqLTOalWwuNjU9lKniI0a1ShVVuZQrU7KpTkpJWlFtX0+8/Nz4g/8ABIj/AII+/tF+L/HPhe9/ZU+DNr8QvBLaMfGR+FEOufCjXvC9z4ltZ9R0SW6f4cah4W09bvULW3lvYEeG4O1BJPEPMUP9As642yfAZdmNXF4+GXZp9Z/s6ti/Z4ijjI4OpGlifZe39tUcaNSapzfuq7tGStI4fqmUYqvXoRpUXXwrp+3hS5qcqTqwcqSnyckbyinJeWr3ufHH/BF74b6X+z5+3b/wVZ/Zi8B+KPiDqXwe+Cnin4E6X8OPDHjnx94i8cf8IvZ654R1TXdRisZtevbj7O1xe38ivLFFFPNawWcN1LcG2SSuvi7ESx2TcNZjWpUI4rF08bKvUo0IUfauFWMIuShvZLZtpOTatdozyumqGLzChCU3TpyoqEZzlLlThfTmb3bfRduh/SVX5+e2ed6L8VPBWtWHjvVV1VdL0r4b+INT8OeLtU13ZpGnabe6PpmnavqFw15dvHB/ZsFlqdtI187pDnzVO3yjXp4/KcZlv9n/AFmMP+FPA08wwqpT9o5YerVrUYOdkuSpz4epeD1Ss3bmUY8sMZh5wxNR1FTp4SrOlXnVahCEqcIVJtylZcijUj7703unax4J4E/b7/Y3+JnjW2+Hfgj9oLwFrvi+/uzYabpSXWoWKatehmQWmj6nqen2Wk6tcSONsEWnXty1yxUW/m7lDc88BjKcHUnh6kYJXb0dlvdpOUlZb3St1t9nx8Jxbw3jsTHB4XOMJVxM5ckKfPKHtJfy051IRp1JPZKEpNvRXekvV9M/aI+Cus/HDxD+zbpfxC0W8+OXhXwdY/EDxD8OIk1D+3NK8G6lejTrHX7h3s0042dzekW8axXsk4f70KqQ1OWAxkMFTzCVCccFVrSoU8Q+XknWjHmlBa811HXZL7lze6q9J1XQU060Y88qet1G9lJ9LN/1uJ4t/aJ+CngT4ufDf4D+LviFouh/F74vWeu3/wANvAt2moHV/Ftn4Ygjuden014LKaxVNMglSSf7Xd2rFWxGJD90pYDGVsLiMbSoTnhcK4LEVly8tJ1HaCldp+81Zcql52vcJVqUKkKMppVKibhB7yUd7bbeb+TPaa4zUKAP/9L+/igCOWKKeKSCeOOaGaN4poZUWSKWKRSkkckbAq8boSrowKspIIIJFCdtVo1qmugH83H7WPwH+BWjf8FwP+CW3g7Tfgr8I9O8G+Ivg5+1xd+JPCll8NfBdt4b1640z4f3UunXOtaHDoyaZqtxpsqibTZr61nksJ/31pJDL87foeV4zGz4N4krSxeKlWp4vK1TqyxFV1KalWfMoTc3KClpzcrSklZ3sjxMRRpLNcvgqVNRlSxPNFU4KMrU5NXjs7PVXfpaxu/Bv9qb/gpd+13e/HTUv+CbvgD9hP4E/sofs7/Gbx98BvAulfGrQfiNceJfid4k+Hl1HJ4r1HS9L+F82leGvA2g6hqOoxT2Mf8AZjSqdT86Wa/nS8lXLF5bw9lf1GOf186xuZ4/CUMbXnhJ4dU8PCumqUZSxClUrVIxjZ+/y+7ZKOnM6WIx+JdV4KGEo4ahVqUYqrGbdSUH7zSg4qCbd0/Pzaj85ft7ftp67+3H/wAEFv2nfiD478AWfwu+Lvw1+N/hP4FfGnwNpWozatoGjfE74afHz4b2OvyeGdRuS13c+HtQjvLO908XjS3NqZZ7GS6vvsq3116GR5RDJuNsvoUa7xOFxGBr43CVpR5Zzw+IwGIcPaRSSU4tSTsrO17Ru4xxxeKeLymtOUPZ1KdaNGrFO6U4VYX5X1i0121utbXP0r/bJ/bY+P8A8G/EX7En7H37HvgX4beLv2n/ANrDQNUufD+v/GW91+3+F3w28B/DbwZpmseLfF3iKy8LyQa9rVykNyP7P06wnQbbO7aSO6me0tJ/ncpyfA4unnGa5rWxFLLssnFThhFB4nEV8RWnClSpuopQirpuUpJbxSuuaUezEYqtTeEw2GjCWIxEbqVW/s4QhFOUpW1b7JefdGB8EP2wf28fgv8Atp/CP9jH/goT4e/Zv8TL+0p4K8feJfgX8a/2Z4fHmg6P/wAJJ8NLK31bxT4I8Z+FviBeX17HN/ZFxBcafqemyRRme6tI2F0k1x/ZumMynJcXlGKzfIqmYU/7PrUKeNweY+xnP2eIbhSr0atBJWc4tShNaJN3VoqZSxOLpYqnhsaqDVeM3Rq0FOK5oayhOM5btWs0+u0teX0X9lbxXafBn4p/H651+/Fn4J+Lfjb9oLx5b3F1NIbWw8bfBzx5q1n4piTOVhbWfAmo6NqAjXbuj8H38w3EPt/SuOMBU4iyPhWGFp+0zLIMt4TyucKcY89XLeIsroVcC3s5fV80o4mnzdHmNKDvZM+eyevHAYzM3Vly4fHYjMsTFyd4wxGCxE/bq/T2mHqU5WsrRw7avdqPOfs6+ONU+Da/ti/HTxRpc2peLfGPgn4SfHC/0K5upIJG1Tx+fiTN4L8JzzyBzYx6X4dj8JeHbhkizbva3EnkvKGVuzi7LKHET8PuGMFXjRwGXZnn/DVPFQgpL2GVLJo5lj4xTtVdfGSx+MjrHmjUguayM8rxE8As+zGtFzr16GBzGdJu3v4r626FBtuShyUlQpPWXLZt30R9Iz6D8TP2c9Sl+OXiBPgBqcnxF8W+AtJ+OcPgL4Kx/DzxXeL4g1fTfCena1F8Q7fxXq+seN5PBlxq1usMfjSwnm1DRYLpbObR7l4YK+Dw1HhfiaWIyTK8FxBgcVhcFmWJyTFY3O6WZUK8sBha2NlQxeXrLsLTwn12lh5RU8FiOWhXlT5oV4JuPs1JZll/s8ZiauBrwqV6FPGUqODlQnTjXqRpc9Kv9YqSq+xlOOlWDc4RbvTfunot14w+N/xU+JvxN8J/Crxd4G+GvhP4RanofhnUta8R+BNQ+IOt+LvF+qeH7HxTe21vbReMPCWn6F4f0jS9Y0a3eUHUtTv7+4vNpsIbSI3HHDL+GsjyXJcdnmX5pnOPz+jicbRw+EzSjlOGwGX0MXVwVOcpvL8wq4rFYivh8RNJ+yo0qUKd1VlUapauvmGMxeLoYKth8JRwM6dGdSrhp4mpWrzpKtJKKxFGNOnThOmr+9KcpSty8l5fPXgH4K6j+0n8C/2nfhF8XfEM3hK88R/tA+ILPxlrHw3ZLO3vLfSNJ8C3LjTY/EcGsG00rX7G1h/tGwvWvXtYLy6slvZ/LS7ru49qYLCY3hWrlSrzwX+qWAnhI41wliacamMzJunWnQjTpzqUZuUI1YQpqooxqeyhzOB5NLLHneVZzl2PrSw7r5pWjiKmDaipKnDCu0VWVS1OrGC54S5mlJxUpW5j5I/bG8Rfs+/FrSfhl+xp+yL4Q0f4kfGTwl418Drb+Ivhr4cs30b4SaZ4U1GyOrarr/jrS7SHTbO6mtraWDUkt72cedNcS6nLHOuyf5DCRr0nVxmLnKnRlCpeFWT5qsp3SUYP3nZu6vF7JK+ko/L8SVsnzCngeGuHsNTxuZYfFYRRrYGhCVLLYYecfaVK2KpqEIycYOM0ptNybqNNcpS+CMM9t/wcEftH291N9puYP2DfhpDcXBz/AKRPF43iSabnB/eyK0nIz83OOa9vGW/1Gy6ysv7ar2XZew2PvqCaziqpPmawVNOX8zUkm/m9S1+2v/ym4/4JT/8AYj/tG/8Apg0qlk//ACSHEv8A19wH/pcjTFf8jTL/APBV/Jn77V8QeuFAH//T/v4oAKAPwG/bGKt/wXl/4JOwh0EsvwS/bHCIWAZv+Ld3gyFzkgZ5IHHfPG37rKP+SJ4nfbGZS/8Ayu/6/wCHPIxP/I3y7/r1iv8A03L+v+HPw6/Y/wDht/wTr8Jal+2X4D/b2/bf/aE/Y5+Pvw7/AGvvjzd33wu8OftMeNvgN4c1nwHqus22p+FvFnhzwtp1o1n4q1PXVk1BnvdJW61TUNOj0V1tZbR7GaX6/NsRn1WOU1skybA5tga+VYJLE1MupY2cK0YuNWlUqyd6Uafu6StGL53o+ZHj4engo/WYY3F18NWhiKt6arypRcG7xajyrmb11vdrl3Vj3X4w6T+zhB/wbx/tc+M/2W/Bvx/8KfCL4iftMeHfEuk69+0f4lh8T+NPijdW3xs+EugXnxU0rVBBb3j+FfF02k79O/tdP7Wkv7TVJb7ErkLx4OWYPjvLKOZVsFVxWHy2tTlDAU/ZUcOng8VNYaUdV7Slz2fK+XlcUkrI6JqgsnxEsPGtGlPERalXknKpapCPtE91GXLpza6O+x77/wAFjPBXwpg/a9/4JN/E79pz4gfE34KfsvXXw0+Kfwv8cfHL4X+LNd+H2reAfFeu+EPDOpeD4bzx/wCHba6v/DFlrV9AsF9KYlju9Fg1lZG+xwXzwcPCdbFPKeJsNl1DD4zMY4jDYmjgsTShiI16cKlWNVxoVHFVJQUtEtpuDupOKlpmUaf1jLZ4idSlh3SqUpVacnBwlKEXH3kpON2rPa6vqrXju/sieEP+CW1x/wAFLP2d/D/7KHxu/a1/bc+Lfgnwl8S/HP8AwtXUP2kdQ+OHwT+BWlTeHJ9Hu4PGF/4httgufGUd4unWFt4au5CurR6UmqFJWtI2zzWrxIuHsfUzPB5Zk+FrVcPR+qxy9YPF42XtFKLpRpyelJx526m8FJx5rSHhqeX/AF6hHDVsTiqkYzqe0eIdWlS0cfebiviWnu21sne6R+uPhL9nvS/2i/g54q8N3ut3Ph+Tw/8AthfGDxA2p2GftN1oK/EfWtL8a+GHeNlcWni3wdqOueHbtS3lhdQWWSOTyVRffx/FlfhDiLBYynhoYtYvw+4ewipVbclPFPJsLXy3GpNNOpl+Y0cNi6b3bpOKa5m48dHLKea4CrRlUdP2ed4yo5xvzOmsVOGIo3WqVehOpSkr2967Ure7gfH/AMN3HiC9/wCCgeh6TY3VyYfg7+z/AHJ07SFuEvjpukN8R7+7h02OwaO7S5TT7OcWa2RW5Eixi2IkCFevhTGRwlPwpxVepThzcQ8WQ9riOR0vbYiOT0qcqzq81Nw9tUi6ntPcs5c943RlmVF1XxPShGTtgsrfLC/NyU1i5y5eVqSajF8vK+a6tG7O81jwl+xodO+Hupaf4x8bfFdvG/jDwLa+CfCel/tKfFLx1Jr2p3+u6bcabqj+FtU+J91ZX2l+GmRfEeuNqFnNDpen6Vd3F1DvtvKby8Pj/ET22b0auX5ZkSyzL8zqZlj63BuR5WsLRpYatCtQWOo5LGrTr4xP6phVSqxnWrV6cISfOpw6alDIVHCzhWxGMeIr4dYehDNsZiHUnKpFwn7Gpi5RnCi/3tXni1CEJSl8PKejfCjx34L+HXxu/av8K+OvFfh3whq2o+PvDPxI0qHxPrOn6CdX8H6p8NfCmif25pf9qXNqL/TrHV/DOradf3Nq8qWd1biO58gywh/Iz7K8yzfhvgXH5ZgMZmGHpZVjMnrywWHrYpUMwoZzjsR9Vr+whUdKtVw+Nw9alCcYOpCd4c3LLl6cDicPhMwzqjiK9KhOWJo4qCrVI0/aYeeEo0vaQ52uaMalGpCTjzcslZtXjKXwX8fPjd9m/Ya/bP8AiB8OvEU1np/ir9oTUvC9h4o02d7cyaFrkXw/8Natqem3YEcnkXVi14+n31sWWe3eG8tJZIZY3bq4yyyvl+Z8I5fjqTp4nDcI4GVahK3NSqPFZlVVKorvlqQclGpB+9CadOaU4yUflc9zJw4V4ixeErOEa+ayoRrQly/uqywdGpOEtHaUOZxkt4yTTadz3D9mP9rn/gmp8C/hf4F+Gnw5+NXwq8O3A0fQrbVorK11OHVte8T3FpbR397rV6uiCbUdUu9RklDS3NxKI9ywQ7IEjRPz/E4XMa9SdWpRqtXdrtWUb6WWtkl5+tzsyPiHgnKsDhMDgszy+i/Z0ozUFNVKteUVzyqyVO86kpt35pStsrRSjH4R+MPxx+F/7Cn/AAXE1X47/tOeKbf4WfA39pT9kHRfAngT4u+I7a/g8Bx+OPCnittXvvDmra7DZzWmmXMuni3kge8aNN95CZXSEPLF9bhcHiM64Nhg8upvE4zL81nXrYWm063sKlLkVSEXJOa5r35U3o0tbI+iqVaeEzX21eXJRxGGUYVWnyc0ZXcW1zWbVrXa9fsmbqH7Q/wc/b9/4LWfsWeIP2SPG+m/GzwF+y98JfjPr3xi+JXgqO81TwF4bm8Yada6d4d0X/hJVtY9Nu9Uv7y2WAR2txPGr3EAEjsZVSo4DF5Hwjm9PNKMsHXzHFYSnhMPWtGtUVKTlUnyX5lFJ31jF6N9UP29LGZphpYaSqwoU6jqTgnyR5laKb2u2++3c/pfr88PcCgD/9T+/igAoA5m/wDBXg3VPE2h+NNT8JeGdR8Y+Gbe/tPDfiy/0HSrvxN4ftNViMGp2uh67cWkuq6Tb6jCTDfw2F3bx3kRMdwsqHFaRrVo050Y1akaVRp1KUaklTqOLvFzgmoycXqnJOz2toS4xclJxi5RuoyaXMr72e6ut7bnB+Ov2d/2f/ihrdv4l+JfwM+DvxE8R2kcUVr4g8c/DLwV4t1u2igBEMUGq69ol/fQxwhj5SR3CrHu+RRk1vRx+Ow8HTw+MxdCm73hRxFalB33vGE4xd+v43vYidGjUalUpUpy6SnThJq21m03+KPz2/4LR/GHUv2Xv+CbXxZ+IvgLwJ8JPE0/hDVvg/o+j+Cvil8OdE8f/DL+z9U+KXgzw/5F54D1EQaPcpplleGfRF2xppWoW1leWyb7WNK93hHCxzLiDC4evWxVNVo4qU62GxE6GI5o4arUuq0bTXM01P8AmjKSd7tHHmlT2GBqThClLllSShUpqdPWpFfA1Z2T00Vnrpofovpvhvwn8VvhL4T0z4ieDfB/i/QPEXhHwvqGq+FvEHhrSNa8Kzy3GkWN55Q8Para3umfZbeZ/wDRIHt5EtkVFj+4u7wZVKuFxVWVCtVpTp1asY1KdScKllOUb+0i4yu1u769bX97tUY1KcVOMZRlGLcXFOO38ruvz+ZP4D+Efwb+C+n6jF8MPhl8M/hPpd5tuNXj8B+DPC3gWwuvIDFJ9SXw/p2lW8/kh32yXQbywzYZcncq2KxeLlH6xiMTipR0h7arVrSV+kfaSqNXfb8b2iQp0qSfs6dOmt3yQjBfOyivv/DeXzj8UP8AgoF/wT+/ZwgvofiT+1V+zh8OpFury/v9DT4ieD5Ndkv7qRri+upvC/h29vtenv7ydnlnk/suS6u52Zm82U16VLJ+IM1lCVPAZni3GnClCpUpV5RjSpR5KdONWtyxjTpxSjCKlywirKMUrS55YrA4ZNOth6V5Sk4xlBPmbvKTjF3cm223a7eretj85vE//Bw//wAE2rDxBqVl8DtO+O37UXjXUltrOeH9nj9nvxbrt5rbWRmTTrW41fxLaeEPttvAbi4WzbfeRW32iZYgplcN78OCOJJ0aUMdWw2X4WhKpOnDMMxhCnQlU5faSp0oSqxpyqckHNxgm+WLk5csTiecYBSm6MalepKyl7Gg+afLdRUpNK6V3a97XfdqHov/AAS4+Mv7RP7Rfxn/AGqvij8Xv2Krv9lD4QS33gmb9m//AITv4F6R8Lvi3rWk6pZaonjUeLtfgC33ie5bU7S3vvMEFvBaW+pQ2ry3kyyyVXFVeVHLsqy6PE2MzqVONVYzDrN8TjsvoypuHsPYYecnSoqMbxVr3cW0opKMVlsFPEYnEPLqWDUuX2U/q1OjXnzL3+ecYKU7vu9Fo03dn6/eKPh58P8AxvNp9x408DeDvF8+kyebpU/ijwzouvzaZKWVzLp8mq2N29nIWRG325jbcqnOQDXyeCzfNcsjVhl2Z5hl8MQuWvHBY3E4WNaNrctWNCpBVFZtWnfR20uenWwuGxDi8Rh6Fdwd4OtRp1XB9488Zcr9H99vds3/AII8F6rpV5oWqeEPC+paJqFzFeaho1/oGlXmlX13AsCQ3V5p1xaS2lzcwpbWyRTzQySxrbwKjKsSbeapicTVlGdXEV6k6ceSE6lWc5Qg5Sm4RlJycY805y5Yu3NOT1cpcrnhsNUpypVMPRqUpNSlTnShOnKSSScoSjytpKKTalZRSvojkY/gR8D4ZElh+DXwpilidZI5Y/h34RSSN0O5HR10dWR1YAqykEHkdBU+3r/8/qv/AIMl/wAD8/uOZZVlaaay3AJp3TWDwyafdNU7p/10Ol8a/Dr4ffErQz4Z+I3gXwd4/wDDbSRynw/418MaJ4q0MyxArHIdJ12yvrAyRqdsbm33ICQpGadHEV8PP2mHrVqFTb2lGpOlOz3XNBxf4o7ZwhNcs4RnH+WcVJfc01/XXaVTwB8LPhj8KNMm0X4W/DnwH8NtGuZVnuNJ8A+EPD/g7TbidF2JNPY+HtP061mmVSVWSSJ3CsQGAJDOvisTipKeJxFfETWilXq1Ksknuk6kpNJ9vz+yoU6dNWpwhTT1tCMYr7opfivvsd5WBYUAf//V/v4oAKACgAoA/MX/AILCfsq/F39tL9gn4r/s7/Ay18O3fxK8aa/8LbvRY/FmuDw7oEdv4X+J3hPxPrFxqGq/Zb14I7fSdIvZkjhtLme4lRLeGFpJUFfRcK5lhcozvDY/GOosPRhiVP2UHOo3Vw1WnBRjeK+Ka1bSXX+aPBmWHqYrB1KNG3tJSptcz5V7tSMnrrayV9vLU+GND/Yk/wCC7nxS0LRdA+Lv/BTj4Mfs3eFrDStP0pPDn7LnwLt/EWuWdhYWcNlFbjxh4xsvC2speCCBQ9xa6vKiTZlgfaTHXtTzjgvDTnUwvDuMzCrKcpOpmWMdOm225X9lRdSNrvZxjdaPfmjyLC5vUSVTHUqEUrctClzNKyS96XK7q26ve/2dObYg/wCDe/4R/ESePUv2v/21f27/ANrrUy4kurHx58ctS8N+D7li26RE8NaLDc3tpbyEsDBb+IkVAQYmjIJaHx1iqCccqyjJcrj0dHBRqVV5upOVpPzcE31v9mlk1OeuJxWLxN9Wp1mo/wDgKs123fpqz7I+EH/BFz/glx8EHtbnwX+xd8G9Q1K02ldY+IWj3nxV1SSVf+W8lx8Sb7xSglY4ZjDFEpYB9u/JrycXxdxJjb+2zfFxi/sUJrDRS7JYeNPT5v1aOmnlmApaxwtNvvNOo/8Ayo56vrZa7n6M+FPBHgvwJpsej+B/CHhfwbpESqkWleFNA0rw9psaqMKsdjpFpZ2yKoACqsQAAwMYxXgVa1atLmrValWT3lVqSqSv6ycn/XXVR7YwjBWjGMV2jFJfhZf11tc6isygoAKACgAoAKACgAoA/9b+/igAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA//Z\"","import React from 'react';\n\nexport default function ErrorIcon() {\n  return (\n    <svg width=\"14px\" height=\"14px\" viewBox=\"0 0 14 14\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-299.000000, -723.000000)\" fill=\"#D61F1F\">\n          <g transform=\"translate(276.000000, 704.000000)\">\n            <g transform=\"translate(23.000000, 19.000000)\">\n              <path\n                d=\"M8.03935839,0.763849674 L13.2361503,5.96064161 C13.8101721,6.5346634 13.8101721,7.4653366 13.2361503,8.03935839 L8.03935839,13.2361503 C7.4653366,13.8101721 6.5346634,13.8101721 5.96064161,13.2361503 L0.763849674,8.03935839 C0.189827887,7.4653366 0.189827887,6.5346634 0.763849674,5.96064161 L5.96064161,0.763849674 C6.5346634,0.189827887 7.4653366,0.189827887 8.03935839,0.763849674 Z M7,8.66666667 C6.53976271,8.66666667 6.16666667,9.03976271 6.16666667,9.5 C6.16666667,9.96023729 6.53976271,10.3333333 7,10.3333333 C7.46023729,10.3333333 7.83333333,9.96023729 7.83333333,9.5 C7.83333333,9.03976271 7.46023729,8.66666667 7,8.66666667 Z M7.00842529,4.5 L6.99145559,4.5 C6.48802096,4.5 6.09771771,4.99363437 6.17690967,5.53663218 L6.53327351,7.40140326 C6.56721292,7.64822044 6.76519283,7.83333333 6.99711216,7.83333333 L7.00276873,7.83333333 C7.23468805,7.83333333 7.43266796,7.64822044 7.46660737,7.40140326 L7.82297121,5.53663218 C7.90216317,4.99363437 7.51751649,4.50617043 7.00842529,4.5 Z\"\n                id=\"Error\"\n              ></path>\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function WarningIcon() {\n  return (\n    <svg width=\"16px\" height=\"14px\" viewBox=\"0 0 16 14\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-273.000000, -162.000000)\" fill=\"#E46216\">\n          <g transform=\"translate(251.000000, 143.000000)\">\n            <g transform=\"translate(22.000000, 19.000000)\">\n              <path d=\"M6.68405227,0.743750848 C7.26590697,-0.247916949 8.73410873,-0.247916949 9.31596344,0.743750848 L9.31596344,0.743750848 L15.7980583,11.7915293 C16.3754418,12.775573 15.6458879,14 14.4821027,14 L14.4821027,14 L1.5178827,14 C0.354135396,14 -0.375441293,12.775573 0.201934693,11.7915293 L0.201934693,11.7915293 Z M8,10 C7.44771525,10 7,10.4477153 7,11 C7,11.5522847 7.44771525,12 8,12 C8.55228475,12 9,11.5522847 9,11 C9,10.4477153 8.55228475,10 8,10 Z M8.01011035,5 L7.98974671,5 L7.87816923,5.00681158 C7.32928042,5.07427655 6.92320065,5.63308608 7.01229161,6.24395862 L7.01229161,6.24395862 L7.43992821,8.48168391 L7.46058982,8.57746523 C7.53403676,8.82448556 7.74990819,9 8.00332247,9 L8.00332247,9 L8.09436762,8.9919759 C8.33199007,8.94972242 8.5237268,8.74495557 8.55992884,8.48168391 L8.55992884,8.48168391 L8.98756545,6.24395862 L8.99896034,6.12268979 C9.02431547,5.52149772 8.58283795,5.00694173 8.01011035,5 L8.01011035,5 Z\"></path>\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ErrorIcon from '../../icons/ErrorIcon';\nimport { IconButton, makeStyles, Theme, Typography } from '@material-ui/core';\nimport MUISnackbar from '@material-ui/core/Snackbar';\nimport WarningIcon from '../../icons/WarningIcon';\n\ninterface SnackbarProps {\n  headline: string;\n  message: string;\n  variant?: 'error' | 'warning';\n  open: boolean;\n  handleClose?: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    display: 'flex',\n    alignItems: 'baseline',\n    justifyContent: 'space-between',\n    width: '400px',\n    minHeight: '50px',\n    background: 'white',\n    padding: '1em',\n    borderRadius: '3px',\n    boxShadow: '0 12px 24px 4px rgba(40,42,43,0.2)',\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n  },\n  contentContainer: {\n    display: 'flex',\n  },\n  iconContainer: {\n    display: 'flex',\n    padding: '0 1.3em 0 0.3em',\n    transform: 'translateY(4px)',\n  },\n  headline: {\n    fontWeight: 'bold',\n  },\n  error: {\n    borderLeft: '4px solid #D61F1F',\n  },\n  warning: {\n    borderLeft: '4px solid #E46216',\n  },\n}));\n\nexport default function Snackbar({ headline, message, variant, open, handleClose }: SnackbarProps) {\n  const classes = useStyles();\n\n  const handleOnClose = (_: React.SyntheticEvent | React.MouseEvent, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    handleClose?.();\n  };\n\n  return (\n    <MUISnackbar\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      open={open}\n      onClose={handleOnClose}\n    >\n      <div\n        className={clsx(classes.container, {\n          [classes.error]: variant === 'error',\n          [classes.warning]: variant === 'warning',\n        })}\n      >\n        <div className={classes.contentContainer}>\n          <div className={classes.iconContainer}>\n            {variant === 'warning' && <WarningIcon />}\n            {variant === 'error' && <ErrorIcon />}\n          </div>\n          <div>\n            <Typography variant=\"body1\" className={classes.headline} component=\"span\">\n              {headline}\n            </Typography>\n            <Typography variant=\"body1\" component=\"span\">\n              {' '}\n              {message}\n            </Typography>\n          </div>\n        </div>\n        <div>\n          {handleClose && (\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\n              <CloseIcon fontSize=\"small\" />\n            </IconButton>\n          )}\n        </div>\n      </div>\n    </MUISnackbar>\n  );\n}\n","import React, { useState } from 'react';\nimport Snackbar from '../../Snackbar/Snackbar';\nimport useDevices from '../../../hooks/useDevices/useDevices';\nimport useVideoContext from '../../../hooks/useVideoContext/useVideoContext';\n\nexport function getSnackbarContent(hasAudio: boolean, hasVideo: boolean, error?: Error) {\n  let headline = '';\n  let message = '';\n\n  switch (true) {\n    // This error is emitted when the user or the user's system has denied permission to use the media devices\n    case error?.name === 'NotAllowedError':\n      headline = 'Unable to Access Media:';\n\n      if (error!.message === 'Permission denied by system') {\n        // Chrome only\n        message =\n          'The operating system has blocked the browser from accessing the microphone or camera. Please check your operating system settings.';\n      } else {\n        message =\n          'The user has denied permission to use audio and video. Please grant permission to the browser to access the microphone and camera.';\n      }\n\n      break;\n\n    // This error is emitted when input devices are not connected or disabled in the OS settings\n    case error?.name === 'NotFoundError':\n      headline = 'Cannot Find Microphone or Camera:';\n      message =\n        'The browser cannot access the microphone or camera. Please make sure all input devices are connected and enabled.';\n      break;\n\n    // Other getUserMedia errors are less likely to happen in this app. Here we will display\n    // the system's error message directly to the user.\n    case Boolean(error):\n      headline = 'Error Acquiring Media:';\n      message = `${error!.name} ${error!.message}`;\n      break;\n\n    case !hasAudio && !hasVideo:\n      headline = 'No Camera or Microphone Detected:';\n      message = 'Other participants in the room will be unable to see and hear you.';\n      break;\n\n    case !hasVideo:\n      headline = 'No Camera Detected:';\n      message = 'Other participants in the room will be unable to see you.';\n      break;\n\n    case !hasAudio:\n      headline = 'No Microphone Detected:';\n      message = 'Other participants in the room will be unable to hear you.';\n  }\n\n  return {\n    headline,\n    message,\n  };\n}\n\nexport default function MediaErrorSnackbar({ error }: { error?: Error }) {\n  const { hasAudioInputDevices, hasVideoInputDevices } = useDevices();\n\n  const { isAcquiringLocalTracks } = useVideoContext();\n\n  const [isSnackbarDismissed, setIsSnackbarDismissed] = useState(false);\n\n  const isSnackbarOpen =\n    !isSnackbarDismissed &&\n    !isAcquiringLocalTracks &&\n    (Boolean(error) || !hasAudioInputDevices || !hasVideoInputDevices);\n\n  const { headline, message } = getSnackbarContent(hasAudioInputDevices, hasVideoInputDevices, error);\n\n  return (\n    <Snackbar\n      open={isSnackbarOpen}\n      handleClose={() => setIsSnackbarDismissed(true)}\n      headline={headline}\n      message={message}\n      variant=\"warning\"\n    />\n  );\n}\n","import React, { ChangeEvent, FormEvent } from 'react';\nimport { Typography, makeStyles, TextField, Grid, Button, InputLabel, Theme } from '@material-ui/core';\nimport { useAppState } from '../../../state';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  gutterBottom: {\n    marginBottom: '1em',\n  },\n  inputContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    margin: '1.5em 0 3.5em',\n    '& div:not(:last-child)': {\n      marginRight: '1em',\n    },\n    [theme.breakpoints.down('sm')]: {\n      margin: '1.5em 0 2em',\n    },\n  },\n  textFieldContainer: {\n    width: '100%',\n  },\n  continueButton: {\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n  },\n}));\n\ninterface RoomNameScreenProps {\n  name: string;\n  roomName: string;\n  setName: (name: string) => void;\n  setRoomName: (roomName: string) => void;\n  handleSubmit: (event: FormEvent<HTMLFormElement>) => void;\n}\n\nexport default function RoomNameScreen({ name, roomName, setName, setRoomName, handleSubmit }: RoomNameScreenProps) {\n  const classes = useStyles();\n  const { user } = useAppState();\n\n  const handleNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  const handleRoomNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setRoomName(event.target.value);\n  };\n\n  const hasUsername = !window.location.search.includes('customIdentity=true') && user?.displayName;\n\n  return (\n    <>\n      <Typography variant=\"h5\" className={classes.gutterBottom}>\n       Create/Join a Room\n      </Typography>\n      <Typography variant=\"body1\">\n        {hasUsername\n          ? \"Enter the name of a room you'd like to join.\"\n          : \"Enter your name and the name of a room you'd like to join\"}\n      </Typography>\n      <form onSubmit={handleSubmit}>\n        <div className={classes.inputContainer}>\n          {!hasUsername && (\n            <div className={classes.textFieldContainer}>\n              <InputLabel shrink htmlFor=\"input-user-name\">\n                Your Name\n              </InputLabel>\n              <TextField\n                id=\"input-user-name\"\n                variant=\"outlined\"\n                fullWidth\n                size=\"small\"\n                value={name}\n                onChange={handleNameChange}\n              />\n            </div>\n          )}\n          <div className={classes.textFieldContainer}>\n            <InputLabel shrink htmlFor=\"input-room-name\">\n              Room Name\n            </InputLabel>\n            <TextField\n              autoCapitalize=\"false\"\n              id=\"input-room-name\"\n              variant=\"outlined\"\n              fullWidth\n              size=\"small\"\n              value={roomName}\n              onChange={handleRoomNameChange}\n            />\n          </div>\n        </div>\n        <Grid container justify=\"flex-end\">\n          <Button\n            variant=\"contained\"\n            type=\"submit\"\n            color=\"primary\"\n            disabled={!name || !roomName}\n            className={classes.continueButton}\n          >\n            Continue\n          </Button>\n        </Grid>\n      </form>\n    </>\n  );\n}\n","import React, { useState, useEffect, FormEvent } from 'react';\nimport DeviceSelectionScreen from './DeviceSelectionScreen/DeviceSelectionScreen';\nimport IntroContainer from '../IntroContainer/IntroContainer';\nimport MediaErrorSnackbar from './MediaErrorSnackbar/MediaErrorSnackbar';\nimport RoomNameScreen from './RoomNameScreen/RoomNameScreen';\nimport { useAppState } from '../../state';\nimport { useParams } from 'react-router-dom';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\n\nexport enum Steps {\n  roomNameStep,\n  deviceSelectionStep,\n}\n\nexport default function PreJoinScreens() {\n  const { user } = useAppState();\n  const { getAudioAndVideoTracks } = useVideoContext();\n  const { URLRoomName } = useParams();\n  const [step, setStep] = useState(Steps.roomNameStep);\n\n  const [name, setName] = useState<string>(user?.displayName || '');\n  const [roomName, setRoomName] = useState<string>('');\n\n  const [mediaError, setMediaError] = useState<Error>();\n\n  useEffect(() => {\n    if (URLRoomName) {\n      setRoomName(URLRoomName);\n      if (user?.displayName) {\n        setStep(Steps.deviceSelectionStep);\n      }\n    }\n  }, [user, URLRoomName]);\n\n  useEffect(() => {\n    if (step === Steps.deviceSelectionStep && !mediaError) {\n      getAudioAndVideoTracks().catch(error => {\n        console.log('Error acquiring local media:');\n        console.dir(error);\n        setMediaError(error);\n      });\n    }\n  }, [getAudioAndVideoTracks, step, mediaError]);\n\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    // If this app is deployed as a twilio function, don't change the URL because routing isn't supported.\n    if (!window.location.origin.includes('twil.io')) {\n      window.history.replaceState(null, '', window.encodeURI(`/room/${roomName}${window.location.search || ''}`));\n    }\n    setStep(Steps.deviceSelectionStep);\n  };\n\n  return (<>\n     <IntroContainer>\n      <MediaErrorSnackbar error={mediaError} />\n      {step === Steps.roomNameStep && (\n        <RoomNameScreen\n          name={name}\n          roomName={roomName}\n          setName={setName}\n          setRoomName={setRoomName}\n          handleSubmit={handleSubmit}\n        />\n      )}\n\n      {step === Steps.deviceSelectionStep && (\n        <DeviceSelectionScreen name={name} roomName={roomName} setStep={setStep} />\n      )}\n     </IntroContainer>\n    </>\n  );\n}\n","import React from 'react';\nimport Snackbar from '../Snackbar/Snackbar';\nimport useRoomState from '../../hooks/useRoomState/useRoomState';\n\nexport default function ReconnectingNotification() {\n  const roomState = useRoomState();\n\n  return (\n    <Snackbar\n      variant=\"error\"\n      headline=\"Connection Lost:\"\n      message=\"Reconnecting to room...\"\n      open={roomState === 'reconnecting'}\n    />\n  );\n}\n","import React from 'react';\n\nexport default function CloseIcon() {\n  return (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M2.64645 2.64645C2.84171 2.45118 3.15829 2.45118 3.35355 2.64645L21.3536 20.6464C21.5488 20.8417 21.5488 21.1583 21.3536 21.3536C21.1583 21.5488 20.8417 21.5488 20.6464 21.3536L2.64645 3.35355C2.45118 3.15829 2.45118 2.84171 2.64645 2.64645Z\"\n        fill=\"#707578\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M21.3536 2.64645C21.5488 2.84171 21.5488 3.15829 21.3536 3.35355L3.35355 21.3536C3.15829 21.5488 2.84171 21.5488 2.64645 21.3536C2.45118 21.1583 2.45118 20.8417 2.64645 20.6464L20.6464 2.64645C20.8417 2.45118 21.1583 2.45118 21.3536 2.64645Z\"\n        fill=\"#707578\"\n      />\n    </svg>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/user.4a000e6c.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAdCAYAAAC0T3x2AAAAAXNSR0IArs4c6QAAAqNJREFUSA21lktIVUEYx+8pqTQoCxKkheWmh8usdYimixRRSty1CwkqA6GQ6BatWrkREWwdLW4SRUQgiEKCtHHRC8EMpNBCsIeGPU6//+Wey8x0Ds713j74MTPfY76Zud/cOUGqSAnDcAtTNMNpOAg7YB4ew2gQBCFtKsCxmvY87JdiE7KHmG1wD17DHzgMXbAIaZItKdFdBp9gHAqRAOcrMAOa7JsZzLzljPthL1xIoXgONaaTT5+YFngEuyJ/+s3CGJczzkBHGUqt7HdkLKBtxFe/wRcjZpZ+9jeRDtsaSe7TbVWivKBU0uOwPa9M7hzFlHHMDbnxiKF/Q7/HSoSiFgbgPWwklTi48XEx8ll3HbeiXGPL3XERpo7djzHWriZNfUxfPnNuop8oK5jkSUyAq6pA0YlvhoV9do0aY9tNo0UPqryn6JzBeYFWxkM0uhcbiRZ1DnSPrhO/RKyOPqT/jr7KOg260Jf/SYTSW5hMRXMT6uEh6MKqgo9AG6gQbpB4xTo6Ag9gaAQfWWaCBzheJa6J9hboVH7BKqxDLz7ZcrcSYdgJ+8BHVDiRvMp1zmpiRDvsj5LIZiXC8BKdKLlYiVjJSTJc9MyyyMJ6Enzfoh8ybVYiDNOgs/aRlSQnFvAV2zPTrtIruXAyVXDHnNjd0QmM3keHb+zRsSPdqWuJiXAYxyiKEpKoeo/BRDSRtSMc6jDoovmI7tFwgqMubC/EJ8LwHfTa+siyj1PkY+2IFc5jMN+SyK/o9r9UXdyqSpqIE8k/424yHd0CtFMIT11jAeOW3DyJIUp0G/qgA7RD/fX/AF/RLj6A5vETdlUNU1DUkRJfD6NmVu3IFJWs3pFWHF+YhgL6+pLS+/TRjJHSEhKcQnEJ9BRvVuYI1NervvOy8hcVLO86GJNR9wAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport CloseIcon from '../../../icons/CloseIcon';\n\nimport useChatContext from '../../../hooks/useChatContext/useChatContext';\nimport logo from '../../../assets/user.svg'\nimport {Accordion,AccordionDetails,AccordionSummary,Step,Stepper,StepLabel,StepContent,Paper,Button} from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport historylogo from '../../../assets/icon_file.png';\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    container: {\n      // height: '100px',\n      background: '#F4F4F6',\n      // borderBottom: '1px solid #E4E7E9',\n      display: 'flex',\n      justifyContent: 'center',\n      // alignItems: 'center',\n      padding: '0.5em',\n      flexDirection:'column'\n    },\n    text: {\n      fontWeight: 'bold',\n      marginRight:2\n    },\n    closeChatWindow: {\n      cursor: 'pointer',\n      display: 'flex',\n      background: 'transparent',\n      border: '0',\n      padding: '0.4em',\n    },\n    profile:{\n      display:'flex',\n      flexDirection:'row'\n    },\n    imag:{\n      width:60,\n      height:60\n    },\n    imag1:{\n      width:20,\n      height:20,\n      marginRight:'0.2em'\n    },\n    root: {\n      // width: '100%',\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      // flexBasis: '33.33%',\n      flexShrink: 0,\n      color:'white'\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary,\n    },\n    topH:{\n      backgroundColor:'#5571C6'\n\n    },\n    statusBar:{\n      width: '200px',\n      display: 'inline-table',\n      verticalAlign: 'top'\n    },\n    button: {\n      marginTop: theme.spacing(1),\n      marginRight: theme.spacing(1),\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing(2),\n    },\n    resetContainer: {\n      padding: theme.spacing(3),\n    },\n    scrollableView:{\n      overflowY: 'scroll',\n  // border:'1px solid red',\n  // width:'500px',\n  float: 'left',\n  height:'44.5em',\n  position:'relative',\n  marginTop:'1em'\n    },\n    mainProfileContiner:{\njustifyContent:'space-between',display:'flex'\n    }\n  })\n);\n\nfunction getSteps() {\n  return ['Feb 10 2021, 10:00 am (First visit)  ', 'Mar 15', 'Mar 21 (Today)'];\n}\nfunction getStepContent(step: number) {\n  switch (step) {\n    case 0:\n      return `Details.....`;\n    case 1:\n      return 'Details....';\n    case 2:\n      return `Details...`;\n    default:\n      return 'Unknown step';\n  }\n}\n\nexport default function ChatWindowHeader() {\n  const classes = useStyles();\n  const { setIsChatWindowOpen } = useChatContext();\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = () => {\nif(steps.length!==activeStep )\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n  const [expanded, setExpanded] = React.useState<string | false>(false);\n  const handleChange = (panel: string) => (event: React.ChangeEvent<{}>, isExpanded: boolean) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n\n  interface chatProps {\n   \n    name?: () => void;\n    icon?: () => void;\n \n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.mainProfileContiner}>\n      \n<div className={classes.profile} >\n  <div style={{alignSelf:'center',marginRight:'0.5em'}}>\n<img src={logo} className={classes.imag} alt='user'/>\n</div>\n\n    <div >\n\n      <span className={classes.profile}>\n     <span className={classes.text}>Patient name : </span>\n     <span>Sophia, Iva </span>\n      </span>\n      <span className={classes.profile}>\n     <span className={classes.text}>Age : </span>\n     <span>65 </span>\n      </span>\n      <span className={classes.profile}>\n     <span className={classes.text}>Last visit : </span>\n     <span>Feb 10 2021 </span>\n      </span>\n\n    </div>\n     \n    \n      </div>\n      <button className={classes.closeChatWindow} onClick={() => setIsChatWindowOpen(false)}>\n        <CloseIcon />\n      </button>\n      </div>\n      \n      <div \n      className={classes.scrollableView}>\n\n   {/* history */}\n\n   <div style={{marginTop:'1em'}}>\n      <Accordion expanded={expanded === 'panel1'} onChange={handleChange('panel1')} >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon style={{color:'white'}}  />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n        className={classes.topH}\n      >\n        <img src={historylogo} className={classes.imag1} alt='history'/>\n        <Typography className={classes.heading}>History Note</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n      <div style={{overflow:'hidden'}}>\n  \n  \n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n      {steps.map((label, index) => (\n        <Step key={label}>\n      \n           <StepLabel onClick={handleNext}>{label}</StepLabel>\n          <StepContent>\n            <Typography>{getStepContent(index)}</Typography>\n            <div className={classes.actionsContainer}>\n              <div>\n                <Button\n                  disabled={activeStep === 0}\n                  onClick={handleBack}\n                  className={classes.button}\n                >\n                  Back\n                </Button>\n                {/* {activeStep === steps.length - 1 &&  <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  Finish\n                </Button>} */}\n              </div>\n            </div>\n          </StepContent>\n        </Step>\n      ))}\n    </Stepper>\n    {activeStep === steps.length && (\n      <Paper square elevation={0} className={classes.resetContainer}>\n        <Typography>All steps completed - you&apos;re finished</Typography>\n        <Button onClick={handleReset} className={classes.button}>\n          Reset\n        </Button>\n      </Paper>\n    )}\n  </div>\n      </AccordionDetails>\n    </Accordion>\n      </div>\n      {/* history ends */}\n      {/* patients h */}\n      <div style={{marginTop:'1em'}}>\n      <Accordion  expanded={expanded === 'panel2'} onChange={handleChange('panel2')}>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon style={{color:'white'}}  />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n        className={classes.topH}\n      >\n        <img src={historylogo} className={classes.imag1} alt='history'/>\n        <Typography className={classes.heading}>Patient History</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n      <div style={{overflow:'hidden'}}>\n  \n  \n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n      {steps.map((label, index) => (\n        <Step key={label}>\n      \n           <StepLabel onClick={handleNext}>{label}</StepLabel>\n          <StepContent>\n            <Typography>{getStepContent(index)}</Typography>\n            <div className={classes.actionsContainer}>\n              <div>\n                <Button\n                  disabled={activeStep === 0}\n                  onClick={handleBack}\n                  className={classes.button}\n                >\n                  Back\n                </Button>\n                {/* {activeStep === steps.length - 1 &&  <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  Finish\n                </Button>} */}\n              </div>\n            </div>\n          </StepContent>\n        </Step>\n      ))}\n    </Stepper>\n    {activeStep === steps.length && (\n      <Paper square elevation={0} className={classes.resetContainer}>\n        <Typography>All steps completed - you&apos;re finished</Typography>\n        <Button onClick={handleReset} className={classes.button}>\n          Reset\n        </Button>\n      </Paper>\n    )}\n  </div>\n      </AccordionDetails>\n    </Accordion>\n      </div>\n    {/* patients h ends */}\n    {/* lab orders */}\n    <div style={{marginTop:'1em'}}>\n      <Accordion expanded={expanded === 'panel3'} onChange={handleChange('panel3')} >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon style={{color:'white'}}  />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n        className={classes.topH}\n      >\n        <img src={historylogo} className={classes.imag1} alt='history'/>\n        <Typography className={classes.heading}>Lab Order</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n      <div style={{overflow:'hidden'}}>\n  \n  \n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n      {steps.map((label, index) => (\n        <Step key={label}>\n      \n           <StepLabel onClick={handleNext}>{label}</StepLabel>\n          <StepContent>\n            <Typography>{getStepContent(index)}</Typography>\n            <div className={classes.actionsContainer}>\n              <div>\n                <Button\n                  disabled={activeStep === 0}\n                  onClick={handleBack}\n                  className={classes.button}\n                >\n                  Back\n                </Button>\n                {/* {activeStep === steps.length - 1 &&  <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  Finish\n                </Button>} */}\n              </div>\n            </div>\n          </StepContent>\n        </Step>\n      ))}\n    </Stepper>\n    {activeStep === steps.length && (\n      <Paper square elevation={0} className={classes.resetContainer}>\n        <Typography>All steps completed - you&apos;re finished</Typography>\n        <Button onClick={handleReset} className={classes.button}>\n          Reset\n        </Button>\n      </Paper>\n    )}\n  </div>\n      </AccordionDetails>\n    </Accordion>\n      </div>\n    {/* lab orders ends */}\n    {/* prescriptions */}\n    <div style={{marginTop:'1em'}}>\n      <Accordion expanded={expanded === 'panel4'} onChange={handleChange('panel4')} >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon style={{color:'white'}}  />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n        className={classes.topH}\n      >\n        <img src={historylogo} className={classes.imag1} alt='history'/>\n        <Typography className={classes.heading}>Prescriptions</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n      <div style={{overflow:'hidden'}}>\n  \n  \n      <Stepper activeStep={activeStep} orientation=\"vertical\">\n      {steps.map((label, index) => (\n        <Step key={label}>\n      \n           <StepLabel onClick={handleNext}>{label}</StepLabel>\n          <StepContent>\n            <Typography>{getStepContent(index)}</Typography>\n            <div className={classes.actionsContainer}>\n              <div>\n                <Button\n                  disabled={activeStep === 0}\n                  onClick={handleBack}\n                  className={classes.button}\n                >\n                  Back\n                </Button>\n                {/* {activeStep === steps.length - 1 &&  <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={handleNext}\n                  className={classes.button}\n                >\n                  Finish\n                </Button>} */}\n              </div>\n            </div>\n          </StepContent>\n        </Step>\n      ))}\n    </Stepper>\n    {activeStep === steps.length && (\n      <Paper square elevation={0} className={classes.resetContainer}>\n        <Typography>All steps completed - you&apos;re finished</Typography>\n        <Button onClick={handleReset} className={classes.button}>\n          Reset\n        </Button>\n      </Paper>\n    )}\n  </div>\n      </AccordionDetails>\n    </Accordion>\n      </div>\n    {/* prescriptions ends */}\n      </div>\n     \n    \n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport ChatWindowHeader from './ChatWindowHeader/ChatWindowHeader';\nimport ChatInput from './ChatInput/ChatInput';\nimport clsx from 'clsx';\nimport MessageList from './MessageList/MessageList';\nimport useChatContext from '../../hooks/useChatContext/useChatContext';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chatWindowContainer: {\n      background: '#F4F4F6',\n      zIndex: 100,\n      display: 'flex',\n      flexDirection: 'column',\n      borderLeft: '1px solid #E4E7E9',\n      [theme.breakpoints.down('sm')]: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n      },\n    },\n    hide: {\n      display: 'none',\n    },\n  })\n);\n\n// In this component, we are toggling the visibility of the ChatWindow with CSS instead of\n// conditionally rendering the component in the DOM. This is done so that the ChatWindow is\n// not unmounted while a file upload is in progress.\n\nexport default function ChatWindow() {\n  const classes = useStyles();\n  const { isChatWindowOpen, messages, conversation } = useChatContext();\n\n  return (\n    <aside className={clsx(classes.chatWindowContainer, { [classes.hide]: !isChatWindowOpen })}>\n      <ChatWindowHeader />\n      {/* <MessageList messages={messages} /> */}\n      {/* <ChatInput conversation={conversation!} isChatWindowOpen={isChatWindowOpen} /> */}\n    </aside>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Participant } from 'twilio-video';\nimport useParticipantNetworkQualityLevel from '../../hooks/useParticipantNetworkQualityLevel/useParticipantNetworkQualityLevel';\n\nconst useStyles = makeStyles({\n  outerContainer: {\n    width: '2em',\n    height: '2em',\n    padding: '0.9em',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'rgba(0, 0, 0, 0.5)',\n  },\n  innerContainer: {\n    display: 'flex',\n    alignItems: 'flex-end',\n    '& div': {\n      width: '2px',\n      marginRight: '1px',\n      '&:not(:last-child)': {\n        borderRight: 'none',\n      },\n    },\n  },\n});\n\nconst STEP = 3;\nconst BARS_ARRAY = [0, 1, 2, 3, 4];\n\nexport default function NetworkQualityLevel({ participant }: { participant: Participant }) {\n  const classes = useStyles();\n  const networkQualityLevel = useParticipantNetworkQualityLevel(participant);\n\n  if (networkQualityLevel === null) return null;\n\n  return (\n    <div className={classes.outerContainer}>\n      <div className={classes.innerContainer}>\n        {BARS_ARRAY.map(level => (\n          <div\n            key={level}\n            style={{\n              height: `${STEP * (level + 1)}px`,\n              background: networkQualityLevel > level ? 'green' : 'rgba(255, 255, 255, 0.2)',\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { Participant } from 'twilio-video';\n\nexport default function useParticipantNetworkQualityLevel(participant: Participant) {\n  const [networkQualityLevel, setNetworkQualityLevel] = useState(participant.networkQualityLevel);\n\n  useEffect(() => {\n    const handleNewtorkQualityLevelChange = (newNetworkQualityLevel: number) =>\n      setNetworkQualityLevel(newNetworkQualityLevel);\n\n    setNetworkQualityLevel(participant.networkQualityLevel);\n    participant.on('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\n    return () => {\n      participant.off('networkQualityLevelChanged', handleNewtorkQualityLevelChange);\n    };\n  }, [participant]);\n\n  return networkQualityLevel;\n}\n","import React from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default function PinIcon() {\n  return (\n    <Tooltip title=\"Participant is pinned. Click to un-pin.\" placement=\"top\">\n      <SvgIcon\n        style={{ float: 'right', background: 'rgba(0, 0, 0, 0.5)', padding: '0.1em', boxSizing: 'content-box' }}\n        width=\"26\"\n        height=\"26\"\n        viewBox=\"0 0 26 26\"\n      >\n        <path\n          fill=\"#FFF\"\n          fillRule=\"evenodd\"\n          strokeWidth=\"0\"\n          d=\"M15.808 4.489c.208-.207.544-.207.75 0l4.953 4.952c.207.207.207.543 0 .75l-1.415 1.415c-.207.208-.543.208-.75 0l-.333-.333-3.007 3.007v2.611c0 .113-.035.222-.1.312l-.055.063-1.06 1.062c-.208.207-.544.207-.751 0l-2.809-2.81-5.992 5.993c-.207.207-.543.207-.75 0-.184-.184-.205-.47-.062-.677l.062-.073 5.991-5.993-2.808-2.808c-.184-.184-.204-.47-.061-.677l.061-.073 1.062-1.061c.1-.1.234-.156.375-.156h2.61l3.007-3.007-.332-.332c-.185-.184-.205-.47-.062-.677l.062-.073zm.376 1.125l-.666.664.333.333c.185.184.205.47.062.677l-.062.074-3.537 3.537c-.1.1-.234.155-.375.155h-2.61l-.531.531 2.803 2.803.005.006.005.005 2.804 2.803.53-.531v-2.61c0-.112.036-.221.102-.311l.054-.064 3.537-3.537c.208-.208.544-.208.75 0l.333.332.664-.666-4.201-4.201z\"\n        />\n      </SvgIcon>\n    </Tooltip>\n  );\n}\n","import React from 'react';\n\nexport default function ScreenShareIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path\n        fill=\"#707578\"\n        fillRule=\"evenodd\"\n        d=\"M17.657 6.343c3.124 3.124 3.124 8.19 0 11.314-3.124 3.124-8.19 3.124-11.314 0-3.124-3.124-3.124-8.19 0-11.314 3.124-3.124 8.19-3.124 11.314 0zm-10.444.87c-2.643 2.644-2.643 6.93 0 9.574 2.644 2.643 6.93 2.643 9.574 0 2.57-2.57 2.641-6.693.214-9.35l-.214-.224L16.563 7c-2.657-2.427-6.78-2.356-9.35.214zm4.865.484l.02.003.026.005.041.01c.025.007.045.014.063.021l.043.019c.018.009.036.019.053.03.01.005.02.012.03.02.027.019.053.04.077.063l2.773 2.774c.24.24.24.63 0 .87-.213.214-.545.237-.785.071l-.085-.07-1.719-1.72v5.9c0 .34-.275.615-.615.615-.302 0-.553-.218-.605-.505l-.01-.11-.001-5.9-1.718 1.72c-.24.24-.63.24-.87 0-.214-.215-.238-.546-.072-.786l.072-.085 2.769-2.77.015-.014c.02-.018.04-.035.062-.05l.005-.004.008-.006c.027-.018.055-.034.085-.048l.034-.015.059-.02.032-.008c.021-.005.044-.008.068-.011l.038-.003H12.025l.027.002.026.002z\"\n      />\n    </svg>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { LocalVideoTrack, RemoteVideoTrack } from 'twilio-video';\n\ntype TrackType = RemoteVideoTrack | LocalVideoTrack | undefined | null;\n\n// The 'switchedOff' event is emitted when there is not enough bandwidth to support\n// a track. See: https://www.twilio.com/docs/video/tutorials/using-bandwidth-profile-api#understanding-track-switch-offs\n\nexport default function useIsTrackSwitchedOff(track: TrackType) {\n  const [isSwitchedOff, setIsSwitchedOff] = useState(track && track.isSwitchedOff);\n\n  useEffect(() => {\n    // Reset the value if the 'track' variable changes\n    setIsSwitchedOff(track && track.isSwitchedOff);\n\n    if (track) {\n      const handleSwitchedOff = () => setIsSwitchedOff(true);\n      const handleSwitchedOn = () => setIsSwitchedOff(false);\n      track.on('switchedOff', handleSwitchedOff);\n      track.on('switchedOn', handleSwitchedOn);\n      return () => {\n        track.off('switchedOff', handleSwitchedOff);\n        track.off('switchedOn', handleSwitchedOn);\n      };\n    }\n  }, [track]);\n\n  return !!isSwitchedOff;\n}\n","import { useEffect, useState } from 'react';\nimport { LocalTrackPublication, Participant, RemoteTrackPublication } from 'twilio-video';\n\ntype TrackPublication = LocalTrackPublication | RemoteTrackPublication;\n\nexport default function usePublications(participant: Participant) {\n  const [publications, setPublications] = useState<TrackPublication[]>([]);\n\n  useEffect(() => {\n    // Reset the publications when the 'participant' variable changes.\n    setPublications(Array.from(participant.tracks.values()) as TrackPublication[]);\n\n    const publicationAdded = (publication: TrackPublication) =>\n      setPublications(prevPublications => [...prevPublications, publication]);\n    const publicationRemoved = (publication: TrackPublication) =>\n      setPublications(prevPublications => prevPublications.filter(p => p !== publication));\n\n    participant.on('trackPublished', publicationAdded);\n    participant.on('trackUnpublished', publicationRemoved);\n    return () => {\n      participant.off('trackPublished', publicationAdded);\n      participant.off('trackUnpublished', publicationRemoved);\n    };\n  }, [participant]);\n\n  return publications;\n}\n","import { useEffect, useState } from 'react';\nimport { LocalTrackPublication, RemoteTrackPublication } from 'twilio-video';\n\nexport default function useTrack(publication: LocalTrackPublication | RemoteTrackPublication | undefined) {\n  const [track, setTrack] = useState(publication && publication.track);\n\n  useEffect(() => {\n    // Reset the track when the 'publication' variable changes.\n    setTrack(publication && publication.track);\n\n    if (publication) {\n      const removeTrack = () => setTrack(null);\n\n      publication.on('subscribed', setTrack);\n      publication.on('unsubscribed', removeTrack);\n      return () => {\n        publication.off('subscribed', setTrack);\n        publication.off('unsubscribed', removeTrack);\n      };\n    }\n  }, [publication]);\n\n  return track;\n}\n","import { useEffect, useState } from 'react';\nimport { Participant } from 'twilio-video';\n\nexport default function useParticipantIsReconnecting(participant: Participant) {\n  const [isReconnecting, setIsReconnecting] = useState(false);\n\n  useEffect(() => {\n    const handleReconnecting = () => setIsReconnecting(true);\n    const handleReconnected = () => setIsReconnecting(false);\n\n    handleReconnected(); // Reset state when there is a new participant\n\n    participant.on('reconnecting', handleReconnecting);\n    participant.on('reconnected', handleReconnected);\n    return () => {\n      participant.off('reconnecting', handleReconnecting);\n      participant.off('reconnected', handleReconnected);\n    };\n  }, [participant]);\n\n  return isReconnecting;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { LocalAudioTrack, LocalVideoTrack, Participant, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\n\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator';\nimport AvatarIcon from '../../icons/AvatarIcon';\nimport NetworkQualityLevel from '../NetworkQualityLevel/NetworkQualityLevel';\nimport PinIcon from './PinIcon/PinIcon';\nimport ScreenShareIcon from '../../icons/ScreenShareIcon';\nimport Typography from '@material-ui/core/Typography';\n\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport useParticipantIsReconnecting from '../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      height: 0,\n      overflow: 'hidden',\n      marginBottom: '2em',\n      '& video': {\n        filter: 'none',\n        objectFit: 'contain !important',\n      },\n      borderRadius: '4px',\n      border: `${theme.participantBorderWidth}px solid rgb(245, 248, 255)`,\n      paddingTop: `calc(${(9 / 16) * 100}% - ${theme.participantBorderWidth}px)`,\n      background: 'black',\n      [theme.breakpoints.down('sm')]: {\n        height: theme.sidebarMobileHeight,\n        width: `${(theme.sidebarMobileHeight * 16) / 9}px`,\n        marginRight: '8px',\n        marginBottom: '0',\n        fontSize: '10px',\n        paddingTop: `${theme.sidebarMobileHeight - 2}px`,\n      },\n    },\n    innerContainer: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n    },\n    infoContainer: {\n      position: 'absolute',\n      zIndex: 2,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      height: '100%',\n      width: '100%',\n      background: 'transparent',\n      top: 0,\n    },\n    avatarContainer: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: 'black',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      zIndex: 1,\n      [theme.breakpoints.down('sm')]: {\n        '& svg': {\n          transform: 'scale(0.7)',\n        },\n      },\n    },\n    reconnectingContainer: {\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: 'rgba(40, 42, 43, 0.75)',\n      zIndex: 1,\n    },\n    screenShareIconContainer: {\n      background: 'rgba(0, 0, 0, 0.5)',\n      padding: '0.18em 0.3em',\n      marginRight: '0.3em',\n      display: 'flex',\n      '& path': {\n        fill: 'white',\n      },\n    },\n    identity: {\n      background: 'rgba(0, 0, 0, 0.5)',\n      color: 'white',\n      padding: '0.18em 0.3em',\n      margin: 0,\n      display: 'flex',\n      alignItems: 'center',\n    },\n    infoRowBottom: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      position: 'absolute',\n      bottom: 0,\n      left: 0,\n    },\n    typeography: {\n      color: 'white',\n      [theme.breakpoints.down('sm')]: {\n        fontSize: '0.75rem',\n      },\n    },\n    hideParticipant: {\n      display: 'none',\n    },\n    cursorPointer: {\n      cursor: 'pointer',\n    },\n  })\n);\n\ninterface ParticipantInfoProps {\n  participant: Participant;\n  children: React.ReactNode;\n  onClick?: () => void;\n  isSelected?: boolean;\n  isLocalParticipant?: boolean;\n  hideParticipant?: boolean;\n}\n\nexport default function ParticipantInfo({\n  participant,\n  onClick,\n  isSelected,\n  children,\n  isLocalParticipant,\n  hideParticipant,\n}: ParticipantInfoProps) {\n  const publications = usePublications(participant);\n\n  const audioPublication = publications.find(p => p.kind === 'audio');\n  const videoPublication = publications.find(p => p.trackName.includes('camera'));\n\n  const isVideoEnabled = Boolean(videoPublication);\n  const isScreenShareEnabled = publications.find(p => p.trackName.includes('screen'));\n\n  const videoTrack = useTrack(videoPublication);\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\n\n  const audioTrack = useTrack(audioPublication) as LocalAudioTrack | RemoteAudioTrack | undefined;\n  const isParticipantReconnecting = useParticipantIsReconnecting(participant);\n\n  const classes = useStyles();\n\n  return (\n    <div\n      className={clsx(classes.container, {\n        [classes.hideParticipant]: hideParticipant,\n        [classes.cursorPointer]: Boolean(onClick),\n      })}\n      onClick={onClick}\n      data-cy-participant={participant.identity}\n    >\n      <div className={classes.infoContainer}>\n        <NetworkQualityLevel participant={participant} />\n        <div className={classes.infoRowBottom}>\n          {isScreenShareEnabled && (\n            <span className={classes.screenShareIconContainer}>\n              <ScreenShareIcon />\n            </span>\n          )}\n          <span className={classes.identity}>\n            <AudioLevelIndicator audioTrack={audioTrack} />\n            <Typography variant=\"body1\" className={classes.typeography} component=\"span\">\n              {participant.identity}\n              {isLocalParticipant && ' (You)'}\n            </Typography>\n          </span>\n        </div>\n        <div>{isSelected && <PinIcon />}</div>\n      </div>\n      <div className={classes.innerContainer}>\n        {(!isVideoEnabled || isVideoSwitchedOff) && (\n          <div className={classes.avatarContainer}>\n            <AvatarIcon />\n          </div>\n        )}\n        {isParticipantReconnecting && (\n          <div className={classes.reconnectingContainer}>\n            <Typography variant=\"body1\" className={classes.typeography}>\n              Reconnecting...\n            </Typography>\n          </div>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef } from 'react';\nimport { AudioTrack as IAudioTrack } from 'twilio-video';\nimport { useAppState } from '../../state';\n\ninterface AudioTrackProps {\n  track: IAudioTrack;\n}\n\nexport default function AudioTrack({ track }: AudioTrackProps) {\n  const { activeSinkId } = useAppState();\n  const audioEl = useRef<HTMLAudioElement>();\n\n  useEffect(() => {\n    audioEl.current = track.attach();\n    audioEl.current.setAttribute('data-cy-audio-track-name', track.name);\n    document.body.appendChild(audioEl.current);\n    return () => track.detach().forEach(el => el.remove());\n  }, [track]);\n\n  useEffect(() => {\n    audioEl.current?.setSinkId?.(activeSinkId);\n  }, [activeSinkId]);\n\n  return null;\n}\n","import React from 'react';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport AudioTrack from '../AudioTrack/AudioTrack';\nimport VideoTrack from '../VideoTrack/VideoTrack';\n\nimport { IVideoTrack } from '../../types';\nimport {\n  AudioTrack as IAudioTrack,\n  LocalTrackPublication,\n  Participant,\n  RemoteTrackPublication,\n  Track,\n} from 'twilio-video';\n\ninterface PublicationProps {\n  publication: LocalTrackPublication | RemoteTrackPublication;\n  participant: Participant;\n  isLocalParticipant?: boolean;\n  videoOnly?: boolean;\n  videoPriority?: Track.Priority | null;\n}\n\nexport default function Publication({ publication, isLocalParticipant, videoOnly, videoPriority }: PublicationProps) {\n  const track = useTrack(publication);\n\n  if (!track) return null;\n\n  switch (track.kind) {\n    case 'video':\n      return (\n        <VideoTrack\n          track={track as IVideoTrack}\n          priority={videoPriority}\n          isLocal={track.name.includes('camera') && isLocalParticipant}\n        />\n      );\n    case 'audio':\n      return videoOnly ? null : <AudioTrack track={track as IAudioTrack} />;\n    default:\n      return null;\n  }\n}\n","import React from 'react';\nimport { Participant, Track } from 'twilio-video';\nimport Publication from '../Publication/Publication';\nimport usePublications from '../../hooks/usePublications/usePublications';\n\ninterface ParticipantTracksProps {\n  participant: Participant;\n  videoOnly?: boolean;\n  enableScreenShare?: boolean;\n  videoPriority?: Track.Priority | null;\n  isLocalParticipant?: boolean;\n}\n\n/*\n *  The object model for the Room object (found here: https://www.twilio.com/docs/video/migrating-1x-2x#object-model) shows\n *  that Participant objects have TrackPublications, and TrackPublication objects have Tracks.\n *\n *  The React components in this application follow the same pattern. This ParticipantTracks component renders Publications,\n *  and the Publication component renders Tracks.\n */\n\nexport default function ParticipantTracks({\n  participant,\n  videoOnly,\n  enableScreenShare,\n  videoPriority,\n  isLocalParticipant,\n}: ParticipantTracksProps) {\n  const publications = usePublications(participant);\n\n  let filteredPublications;\n\n  if (enableScreenShare && publications.some(p => p.trackName.includes('screen'))) {\n    filteredPublications = publications.filter(p => !p.trackName.includes('camera'));\n  } else {\n    filteredPublications = publications.filter(p => !p.trackName.includes('screen'));\n  }\n\n  return (\n    <>\n      {filteredPublications.map(publication => (\n        <Publication\n          key={publication.kind}\n          publication={publication}\n          participant={participant}\n          isLocalParticipant={isLocalParticipant}\n          videoOnly={videoOnly}\n          videoPriority={videoPriority}\n        />\n      ))}\n    </>\n  );\n}\n","import React from 'react';\nimport ParticipantInfo from '../ParticipantInfo/ParticipantInfo';\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\nimport { Participant as IParticipant } from 'twilio-video';\n\ninterface ParticipantProps {\n  participant: IParticipant;\n  videoOnly?: boolean;\n  enableScreenShare?: boolean;\n  onClick?: () => void;\n  isSelected?: boolean;\n  isDominantSpeaker?: boolean;\n  isLocalParticipant?: boolean;\n  hideParticipant?: boolean;\n}\n\nexport default function Participant({\n  participant,\n  videoOnly,\n  enableScreenShare,\n  onClick,\n  isSelected,\n  isLocalParticipant,\n  hideParticipant,\n}: ParticipantProps) {\n  return (\n    <ParticipantInfo\n      participant={participant}\n      onClick={onClick}\n      isSelected={isSelected}\n      isLocalParticipant={isLocalParticipant}\n      hideParticipant={hideParticipant}\n    >\n      <ParticipantTracks\n        participant={participant}\n        videoOnly={videoOnly}\n        enableScreenShare={enableScreenShare}\n        isLocalParticipant={isLocalParticipant}\n      />\n    </ParticipantInfo>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\nimport { RemoteParticipant } from 'twilio-video';\n\nexport default function useDominantSpeaker() {\n  const { room } = useVideoContext();\n  const [dominantSpeaker, setDominantSpeaker] = useState(room?.dominantSpeaker ?? null);\n\n  useEffect(() => {\n    if (room) {\n      // Sometimes, the 'dominantSpeakerChanged' event can emit 'null', which means that\n      // there is no dominant speaker. If we change the main participant when 'null' is\n      // emitted, the effect can be jarring to the user. Here we ignore any 'null' values\n      // and continue to display the previous dominant speaker as the main participant.\n      const handleDominantSpeakerChanged = (newDominantSpeaker: RemoteParticipant) => {\n        if (newDominantSpeaker !== null) {\n          setDominantSpeaker(newDominantSpeaker);\n        }\n      };\n\n      // Since 'null' values are ignored, we will need to listen for the 'participantDisconnected'\n      // event, so we can set the dominantSpeaker to 'null' when they disconnect.\n      const handleParticipantDisconnected = (participant: RemoteParticipant) => {\n        setDominantSpeaker(prevDominantSpeaker => {\n          return prevDominantSpeaker === participant ? null : prevDominantSpeaker;\n        });\n      };\n\n      room.on('dominantSpeakerChanged', handleDominantSpeakerChanged);\n      room.on('participantDisconnected', handleParticipantDisconnected);\n      return () => {\n        room.off('dominantSpeakerChanged', handleDominantSpeakerChanged);\n        room.off('participantDisconnected', handleParticipantDisconnected);\n      };\n    }\n  }, [room]);\n\n  return dominantSpeaker;\n}\n","import { useEffect, useState } from 'react';\nimport { RemoteParticipant } from 'twilio-video';\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nexport default function useParticipants() {\n  const { room } = useVideoContext();\n  const dominantSpeaker = useDominantSpeaker();\n  const [participants, setParticipants] = useState(Array.from(room?.participants.values() ?? []));\n\n  // When the dominant speaker changes, they are moved to the front of the participants array.\n  // This means that the most recent dominant speakers will always be near the top of the\n  // ParticipantStrip component.\n  useEffect(() => {\n    if (dominantSpeaker) {\n      setParticipants(prevParticipants => [\n        dominantSpeaker,\n        ...prevParticipants.filter(participant => participant !== dominantSpeaker),\n      ]);\n    }\n  }, [dominantSpeaker]);\n\n  useEffect(() => {\n    if (room) {\n      const participantConnected = (participant: RemoteParticipant) =>\n        setParticipants(prevParticipants => [...prevParticipants, participant]);\n      const participantDisconnected = (participant: RemoteParticipant) =>\n        setParticipants(prevParticipants => prevParticipants.filter(p => p !== participant));\n      room.on('participantConnected', participantConnected);\n      room.on('participantDisconnected', participantDisconnected);\n      return () => {\n        room.off('participantConnected', participantConnected);\n        room.off('participantDisconnected', participantDisconnected);\n      };\n    }\n  }, [room]);\n\n  return participants;\n}\n","import { useEffect, useState } from 'react';\nimport useVideoContext from '../useVideoContext/useVideoContext';\n\nimport { Participant, TrackPublication } from 'twilio-video';\n\n/*\n  Returns the participant that is sharing their screen (if any). This hook assumes that only one participant\n  can share their screen at a time.\n*/\nexport default function useScreenShareParticipant() {\n  const { room } = useVideoContext();\n  const [screenShareParticipant, setScreenShareParticipant] = useState<Participant>();\n\n  useEffect(() => {\n    if (room) {\n      const updateScreenShareParticipant = () => {\n        setScreenShareParticipant(\n          Array.from<Participant>(room.participants.values())\n            // the screenshare participant could be the localParticipant\n            .concat(room.localParticipant)\n            .find((participant: Participant) =>\n              Array.from<TrackPublication>(participant.tracks.values()).find(track =>\n                track.trackName.includes('screen')\n              )\n            )\n        );\n      };\n      updateScreenShareParticipant();\n\n      room.on('trackPublished', updateScreenShareParticipant);\n      room.on('trackUnpublished', updateScreenShareParticipant);\n      room.on('participantDisconnected', updateScreenShareParticipant);\n\n      // the room object does not emit 'trackPublished' events for the localParticipant,\n      // so we need to listen for them here.\n      room.localParticipant.on('trackPublished', updateScreenShareParticipant);\n      room.localParticipant.on('trackUnpublished', updateScreenShareParticipant);\n      return () => {\n        room.off('trackPublished', updateScreenShareParticipant);\n        room.off('trackUnpublished', updateScreenShareParticipant);\n        room.off('participantDisconnected', updateScreenShareParticipant);\n\n        room.localParticipant.off('trackPublished', updateScreenShareParticipant);\n        room.localParticipant.off('trackUnpublished', updateScreenShareParticipant);\n      };\n    }\n  }, [room]);\n\n  return screenShareParticipant;\n}\n","import useVideoContext from '../useVideoContext/useVideoContext';\nimport useDominantSpeaker from '../useDominantSpeaker/useDominantSpeaker';\nimport useParticipants from '../useParticipants/useParticipants';\nimport useScreenShareParticipant from '../useScreenShareParticipant/useScreenShareParticipant';\nimport useSelectedParticipant from '../../components/VideoProvider/useSelectedParticipant/useSelectedParticipant';\n\nexport default function useMainParticipant() {\n  const [selectedParticipant] = useSelectedParticipant();\n  const screenShareParticipant = useScreenShareParticipant();\n  const dominantSpeaker = useDominantSpeaker();\n  const participants = useParticipants();\n  const { room } = useVideoContext();\n  const localParticipant = room?.localParticipant;\n  const remoteScreenShareParticipant = screenShareParticipant !== localParticipant ? screenShareParticipant : null;\n\n  // The participant that is returned is displayed in the main video area. Changing the order of the following\n  // variables will change the how the main speaker is determined.\n  return selectedParticipant || remoteScreenShareParticipant || dominantSpeaker || participants[0] || localParticipant;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Participant from '../Participant/Participant';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport useMainParticipant from '../../hooks/useMainParticipant/useMainParticipant';\nimport useParticipants from '../../hooks/useParticipants/useParticipants';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\nimport useScreenShareParticipant from '../../hooks/useScreenShareParticipant/useScreenShareParticipant';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      overflowY: 'auto',\n      background: 'rgb(79, 83, 85)',\n      gridArea: '1 / 2 / 1 / 3',\n      zIndex: 5,\n      [theme.breakpoints.down('sm')]: {\n        gridArea: '2 / 1 / 3 / 3',\n        overflowY: 'initial',\n        overflowX: 'auto',\n        display: 'flex',\n      },\n    },\n    transparentBackground: {\n      background: 'transparent',\n    },\n    scrollContainer: {\n      display: 'flex',\n      justifyContent: 'center',\n    },\n    innerScrollContainer: {\n      width: `calc(${theme.sidebarWidth}px - 4em)`,\n      padding: '2em 0',\n      [theme.breakpoints.down('sm')]: {\n        width: 'auto',\n        padding: `${theme.sidebarMobilePadding}px`,\n        display: 'flex',\n      },\n    },\n  })\n);\n\nexport default function ParticipantList() {\n  const classes = useStyles();\n  const { room } = useVideoContext();\n  const localParticipant = room!.localParticipant;\n  const participants = useParticipants();\n  const [selectedParticipant, setSelectedParticipant] = useSelectedParticipant();\n  const screenShareParticipant = useScreenShareParticipant();\n  const mainParticipant = useMainParticipant();\n  const isRemoteParticipantScreenSharing = screenShareParticipant && screenShareParticipant !== localParticipant;\n\n  if (participants.length === 0) return null; // Don't render this component if there are no remote participants.\n\n  return (\n    <aside\n      className={clsx(classes.container, {\n        [classes.transparentBackground]: !isRemoteParticipantScreenSharing,\n      })}\n    >\n      <div className={classes.scrollContainer}>\n        <div className={classes.innerScrollContainer}>\n          <Participant participant={localParticipant} isLocalParticipant={true} />\n          {participants.map(participant => {\n            const isSelected = participant === selectedParticipant;\n            const hideParticipant =\n              participant === mainParticipant && participant !== screenShareParticipant && !isSelected;\n\n\n            return (\n              <Participant\n                key={participant.sid}\n                participant={participant}\n                isSelected={participant === selectedParticipant}\n                onClick={() => setSelectedParticipant(participant)}\n                hideParticipant={hideParticipant}\n              />\n            );\n          })}\n        </div>\n      </div>\n    </aside>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { LocalAudioTrack, LocalVideoTrack, Participant, RemoteAudioTrack, RemoteVideoTrack } from 'twilio-video';\n\nimport AvatarIcon from '../../icons/AvatarIcon';\nimport Typography from '@material-ui/core/Typography';\n\nimport useIsTrackSwitchedOff from '../../hooks/useIsTrackSwitchedOff/useIsTrackSwitchedOff';\nimport usePublications from '../../hooks/usePublications/usePublications';\nimport useScreenShareParticipant from '../../hooks/useScreenShareParticipant/useScreenShareParticipant';\nimport useTrack from '../../hooks/useTrack/useTrack';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\nimport useParticipantIsReconnecting from '../../hooks/useParticipantIsReconnecting/useParticipantIsReconnecting';\nimport AudioLevelIndicator from '../AudioLevelIndicator/AudioLevelIndicator';\nimport NetworkQualityLevel from '../NetworkQualityLevel/NetworkQualityLevel';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  identity: {\n    background: 'rgba(0, 0, 0, 0.5)',\n    color: 'white',\n    padding: '0.1em 0.3em 0.1em 0',\n    display: 'inline-flex',\n    '& svg': {\n      marginLeft: '0.3em',\n    },\n    marginRight: '0.4em',\n    alignItems: 'center',\n  },\n  infoContainer: {\n    position: 'absolute',\n    zIndex: 2,\n    height: '100%',\n    width: '100%',\n  },\n  reconnectingContainer: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'rgba(40, 42, 43, 0.75)',\n    zIndex: 1,\n  },\n  fullWidth: {\n    gridArea: '1 / 1 / 2 / 3',\n    [theme.breakpoints.down('sm')]: {\n      gridArea: '1 / 1 / 3 / 3',\n    },\n  },\n  avatarContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    background: 'black',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n    '& svg': {\n      transform: 'scale(2)',\n    },\n  },\n}));\n\ninterface MainParticipantInfoProps {\n  participant: Participant;\n  children: React.ReactNode;\n}\n\nexport default function MainParticipantInfo({ participant, children }: MainParticipantInfoProps) {\n  const classes = useStyles();\n  const { room } = useVideoContext();\n  const localParticipant = room!.localParticipant;\n  const isLocal = localParticipant === participant;\n\n  const screenShareParticipant = useScreenShareParticipant();\n  const isRemoteParticipantScreenSharing = screenShareParticipant && screenShareParticipant !== localParticipant;\n\n  const publications = usePublications(participant);\n  const videoPublication = publications.find(p => p.trackName.includes('camera'));\n  const screenSharePublication = publications.find(p => p.trackName.includes('screen'));\n\n  const videoTrack = useTrack(screenSharePublication || videoPublication);\n  const isVideoEnabled = Boolean(videoTrack);\n\n  const audioPublication = publications.find(p => p.kind === 'audio');\n  const audioTrack = useTrack(audioPublication) as LocalAudioTrack | RemoteAudioTrack | undefined;\n\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack as LocalVideoTrack | RemoteVideoTrack);\n  const isParticipantReconnecting = useParticipantIsReconnecting(participant);\n\n  return (\n    <div\n      data-cy-main-participant\n      data-cy-participant={participant.identity}\n      className={clsx(classes.container, {\n        [classes.fullWidth]: !isRemoteParticipantScreenSharing,\n      })}\n    >\n      <div className={classes.infoContainer}>\n        <div style={{ display: 'flex' ,position:'sticky',top:'90%'}}>\n          <div className={classes.identity}>\n            <AudioLevelIndicator audioTrack={audioTrack} />\n            <Typography variant=\"body1\" color=\"inherit\">\n              {participant.identity}\n              {isLocal && ' (You)'}\n              {screenSharePublication && ' - Screen'}\n            </Typography>\n          </div>\n          <NetworkQualityLevel participant={localParticipant} />\n        </div>\n      </div>\n      {(!isVideoEnabled || isVideoSwitchedOff) && (\n        <div className={classes.avatarContainer}>\n          <AvatarIcon />\n        </div>\n      )}\n      {isParticipantReconnecting && (\n        <div className={classes.reconnectingContainer}>\n          <Typography variant=\"body1\" style={{ color: 'white' }}>\n            Reconnecting...\n          </Typography>\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n","import MainParticipantInfo from '../MainParticipantInfo/MainParticipantInfo';\nimport ParticipantTracks from '../ParticipantTracks/ParticipantTracks';\nimport React from 'react';\nimport useMainParticipant from '../../hooks/useMainParticipant/useMainParticipant';\nimport useSelectedParticipant from '../VideoProvider/useSelectedParticipant/useSelectedParticipant';\nimport useScreenShareParticipant from '../../hooks/useScreenShareParticipant/useScreenShareParticipant';\nimport useVideoContext from '../../hooks/useVideoContext/useVideoContext';\n\nexport default function MainParticipant() {\n  const mainParticipant = useMainParticipant();\n  const { room } = useVideoContext();\n  const localParticipant = room!.localParticipant;\n  const [selectedParticipant] = useSelectedParticipant();\n  const screenShareParticipant = useScreenShareParticipant();\n\n  const videoPriority =\n    (mainParticipant === selectedParticipant || mainParticipant === screenShareParticipant) &&\n    mainParticipant !== localParticipant\n      ? 'high'\n      : null;\n\n  return (\n    /* audio is disabled for this participant component because this participant's audio \n       is already being rendered in the <ParticipantStrip /> component.  */\n    <MainParticipantInfo participant={mainParticipant}>\n      <ParticipantTracks\n        participant={mainParticipant}\n        videoOnly\n        enableScreenShare={mainParticipant !== localParticipant}\n        videoPriority={videoPriority}\n        isLocalParticipant={mainParticipant === localParticipant}\n      />\n    </MainParticipantInfo>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core';\nimport ChatWindow from '../ChatWindow/ChatWindow';\nimport ParticipantList from '../ParticipantList/ParticipantList';\nimport MainParticipant from '../MainParticipant/MainParticipant';\nimport useChatContext from '../../hooks/useChatContext/useChatContext';\n\nconst useStyles = makeStyles((theme: Theme) => {\n  const totalMobileSidebarHeight = `${theme.sidebarMobileHeight +\n    theme.sidebarMobilePadding * 2 +\n    theme.participantBorderWidth}px`;\nconsole.log('theme.sidebarWidth',theme.sidebarWidth,theme);\n\n  return {\n    container: {\n      position: 'relative',\n      height: '100%',\n      display: 'grid',\n      gridTemplateColumns: `1fr ${theme.sidebarWidth}px`,\n      gridTemplateRows: '100%',\n      [theme.breakpoints.down('sm')]: {\n        gridTemplateColumns: `100%`,\n        gridTemplateRows: `calc(100% - ${totalMobileSidebarHeight}) ${totalMobileSidebarHeight}`,\n      },\n    },\n    chatWindowOpen: { gridTemplateColumns: `1fr ${theme.sidebarWidth}px ${theme.chatWindowWidth}px` },\n  };\n});\n\nexport default function Room() {\n  const classes = useStyles();\n  const { isChatWindowOpen } = useChatContext();\n\n  return (\n    <div className={clsx(classes.container, { [classes.chatWindowOpen]: isChatWindowOpen })}>\n      <MainParticipant />\n      <ParticipantList />\n      <ChatWindow />\n      \n    </div>\n  );\n}\n","import React from 'react';\nimport { styled, Theme } from '@material-ui/core/styles';\n\nimport MenuBar from './components/MenuBar/MenuBar';\nimport MobileTopMenuBar from './components/MobileTopMenuBar/MobileTopMenuBar';\nimport PreJoinScreens from './components/PreJoinScreens/PreJoinScreens';\nimport ReconnectingNotification from './components/ReconnectingNotification/ReconnectingNotification';\nimport Room from './components/Room/Room';\n\nimport useHeight from './hooks/useHeight/useHeight';\nimport useRoomState from './hooks/useRoomState/useRoomState';\n\nconst Container = styled('div')({\n  display: 'grid',\n  gridTemplateRows: '1fr auto',\n});\n\nconst Main = styled('main')(({ theme }: { theme: Theme }) => ({\n  overflow: 'hidden',\n  paddingBottom: `${theme.footerHeight}px`, // Leave some space for the footer\n  background: 'black',\n  [theme.breakpoints.down('sm')]: {\n    paddingBottom: `${theme.mobileFooterHeight + theme.mobileTopBarHeight}px`, // Leave some space for the mobile header and footer\n  },\n}));\n\nexport default function App() {\n  const roomState = useRoomState();\n\n  // Here we would like the height of the main container to be the height of the viewport.\n  // On some mobile browsers, 'height: 100vh' sets the height equal to that of the screen,\n  // not the viewport. This looks bad when the mobile browsers location bar is open.\n  // We will dynamically set the height with 'window.innerHeight', which means that this\n  // will look good on mobile browsers even after the location bar opens or closes.\n  const height = useHeight();\n\n  return (\n    <Container style={{ height }}>\n      {roomState === 'disconnected' ? (\n        <PreJoinScreens />\n      ) : (\n        <Main>\n          <ReconnectingNotification />\n          <MobileTopMenuBar />\n          <Room />\n          <MenuBar />\n        </Main>\n      )}\n    </Container>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nexport default function useHeight() {\n  const [height, setHeight] = useState(window.innerHeight * (window.visualViewport?.scale || 1));\n\n  useEffect(() => {\n    const onResize = () => {\n      setHeight(window.innerHeight * (window.visualViewport?.scale || 1));\n    };\n\n    window.addEventListener('resize', onResize);\n    return () => {\n      window.removeEventListener('resize', onResize);\n    };\n  });\n\n  return height + 'px';\n}\n","import React, { PropsWithChildren } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport enhanceMessage from './enhanceMessage';\nimport { TwilioError } from 'twilio-video';\n\ninterface ErrorDialogProps {\n  dismissError: Function;\n  error: TwilioError | Error | null;\n}\n\nfunction ErrorDialog({ dismissError, error }: PropsWithChildren<ErrorDialogProps>) {\n  const { message, code } = error || {};\n  const enhancedMessage = enhanceMessage(message, code);\n\n  return (\n    <Dialog open={error !== null} onClose={() => dismissError()} fullWidth={true} maxWidth=\"xs\">\n      <DialogTitle>ERROR</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{enhancedMessage}</DialogContentText>\n        {Boolean(code) && (\n          <pre>\n            <code>Error Code: {code}</code>\n          </pre>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => dismissError()} color=\"primary\" autoFocus>\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default ErrorDialog;\n","// This function is used to provide error messages to the user that are\n// different than the error messages provided by the SDK.\nexport default function enhanceMessage(message = '', code?: number) {\n  switch (code) {\n    case 20101: // Invalid token error\n      return message + '. Please make sure you are using the correct credentials.';\n    default:\n      return message;\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"filter\", {\n  x: \"-50%\",\n  y: \"-50%\",\n  width: \"200%\",\n  height: \"200%\",\n  filterUnits: \"objectBoundingBox\",\n  id: \"filter-1\"\n}, /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 1,\n  \"in\": \"SourceAlpha\",\n  result: \"shadowOffsetOuter1\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  \"in\": \"shadowOffsetOuter1\",\n  result: \"shadowBlurOuter1\"\n}), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0\",\n  \"in\": \"shadowBlurOuter1\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter1\"\n}), /*#__PURE__*/React.createElement(\"feOffset\", {\n  dx: 0,\n  dy: 0,\n  \"in\": \"SourceAlpha\",\n  result: \"shadowOffsetOuter2\"\n}), /*#__PURE__*/React.createElement(\"feGaussianBlur\", {\n  stdDeviation: 0.5,\n  \"in\": \"shadowOffsetOuter2\",\n  result: \"shadowBlurOuter2\"\n}), /*#__PURE__*/React.createElement(\"feColorMatrix\", {\n  values: \"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0\",\n  \"in\": \"shadowBlurOuter2\",\n  type: \"matrix\",\n  result: \"shadowMatrixOuter2\"\n}), /*#__PURE__*/React.createElement(\"feMerge\", null, /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  \"in\": \"shadowMatrixOuter1\"\n}), /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  \"in\": \"shadowMatrixOuter2\"\n}), /*#__PURE__*/React.createElement(\"feMergeNode\", {\n  \"in\": \"SourceGraphic\"\n}))), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"path-2\",\n  x: 0,\n  y: 0,\n  width: 40,\n  height: 40,\n  rx: 2\n}));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Google-Button\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"9-PATCH\",\n  transform: \"translate(-608.000000, -160.000000)\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"btn_google_light_normal\",\n  transform: \"translate(-1.000000, -1.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"logo_googleg_48dp\",\n  transform: \"translate(15.000000, 15.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z\",\n  id: \"Shape\",\n  fill: \"#4285F4\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z\",\n  id: \"Shape\",\n  fill: \"#34A853\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z\",\n  id: \"Shape\",\n  fill: \"#FBBC05\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z\",\n  id: \"Shape\",\n  fill: \"#EA4335\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0,0 L18,0 L18,18 L0,18 L0,0 Z\",\n  id: \"Shape\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"handles_square\"\n})));\n\nfunction SvgGoogleLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"32px\",\n    height: \"32px\",\n    viewBox: \"7 7 32 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"btn_google_light_normal_ios\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGoogleLogo);\nexport default __webpack_public_path__ + \"static/media/google-logo.8d51f170.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ChangeEvent, useState, FormEvent } from 'react';\nimport { useAppState } from '../../state';\n\nimport Button from '@material-ui/core/Button';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport Grid from '@material-ui/core/Grid';\nimport { ReactComponent as GoogleLogo } from './google-logo.svg';\nimport { InputLabel, Theme } from '@material-ui/core';\nimport IntroContainer from '../IntroContainer/IntroContainer';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  googleButton: {\n    background: 'white',\n    color: 'rgb(0, 94, 166)',\n    borderRadius: '4px',\n    border: '2px solid rgb(2, 122, 197)',\n    margin: '1.8em 0 0.7em',\n    textTransform: 'none',\n    boxShadow: 'none',\n    padding: '0.3em 1em',\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n    '&:hover': {\n      background: 'white',\n      boxShadow: 'none',\n    },\n  },\n  errorMessage: {\n    color: 'red',\n    display: 'flex',\n    alignItems: 'center',\n    margin: '1em 0 0.2em',\n    '& svg': {\n      marginRight: '0.4em',\n    },\n  },\n  gutterBottom: {\n    marginBottom: '1em',\n  },\n  passcodeContainer: {\n    minHeight: '120px',\n  },\n  submitButton: {\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n  },\n}));\n\nexport default function LoginPage() {\n  const classes = useStyles();\n  const { signIn, user, isAuthReady } = useAppState();\n  const history = useHistory();\n  const location = useLocation<{ from: Location }>();\n  const [passcode, setPasscode] = useState('');\n  const [authError, setAuthError] = useState<Error | null>(null);\n\n  const isAuthEnabled = Boolean(process.env.REACT_APP_SET_AUTH);\n\n  const login = () => {\n    setAuthError(null);\n    signIn?.(passcode)\n      .then(() => {\n        history.replace(location?.state?.from || { pathname: '/' });\n      })\n      .catch(err => setAuthError(err));\n  };\n\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    login();\n  };\n\n  if (user || !isAuthEnabled) {\n    history.replace('/');\n  }\n\n  if (!isAuthReady) {\n    return null;\n  }\n\n  return (\n    <IntroContainer>\n      {process.env.REACT_APP_SET_AUTH === 'firebase' && (\n        <>\n          <Typography variant=\"h5\" className={classes.gutterBottom}>\n            Sign in to join a room\n          </Typography>\n          <Typography variant=\"body1\">Sign in using your Twilio Google Account</Typography>\n          <Button variant=\"contained\" className={classes.googleButton} onClick={login} startIcon={<GoogleLogo />}>\n            Sign in with Google\n          </Button>\n        </>\n      )}\n\n      {process.env.REACT_APP_SET_AUTH === 'passcode' && (\n        <>\n          <Typography variant=\"h5\" className={classes.gutterBottom}>\n            Enter passcode to join a room\n          </Typography>\n          <form onSubmit={handleSubmit}>\n            <Grid container justify=\"space-between\">\n              <div className={classes.passcodeContainer}>\n                <InputLabel shrink htmlFor=\"input-passcode\">\n                  Passcode\n                </InputLabel>\n                <TextField\n                  id=\"input-passcode\"\n                  onChange={(e: ChangeEvent<HTMLInputElement>) => setPasscode(e.target.value)}\n                  type=\"password\"\n                  variant=\"outlined\"\n                  size=\"small\"\n                />\n                <div>\n                  {authError && (\n                    <Typography variant=\"caption\" className={classes.errorMessage}>\n                      <ErrorOutlineIcon />\n                      {authError.message}\n                    </Typography>\n                  )}\n                </div>\n              </div>\n            </Grid>\n            <Grid container justify=\"flex-end\">\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n                disabled={!passcode.length}\n                className={classes.submitButton}\n              >\n                Submit\n              </Button>\n            </Grid>\n          </form>\n        </>\n      )}\n    </IntroContainer>\n  );\n}\n","import React from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\nimport { useAppState } from '../../state';\n\nexport default function PrivateRoute({ children, ...rest }: RouteProps) {\n  const { isAuthReady, user } = useAppState();\n    \n  const renderChildren = user || !process.env.REACT_APP_SET_AUTH;\n\n  if (!renderChildren && !isAuthReady) {\n    return null;\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        renderChildren ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n","import { createMuiTheme } from '@material-ui/core';\n\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    sidebarWidth: number;\n    sidebarMobileHeight: number;\n    brand: string;\n    footerHeight: number;\n    mobileTopBarHeight: number;\n    mobileFooterHeight: number;\n    sidebarMobilePadding: number;\n    participantBorderWidth: number;\n    chatWindowWidth: number;\n  }\n\n  // allow configuration using `createMuiTheme`\n  interface ThemeOptions {\n    sidebarWidth?: number;\n    sidebarMobileHeight?: number;\n    brand: string;\n    footerHeight: number;\n    mobileTopBarHeight: number;\n    mobileFooterHeight: number;\n    sidebarMobilePadding: number;\n    participantBorderWidth: number;\n    chatWindowWidth?: number;\n  }\n}\n\nconst defaultTheme = createMuiTheme();\n\nexport default createMuiTheme({\n  overrides: {\n    MuiCssBaseline: {\n      '@global': {\n        'html, body, #root': {\n          height: '100%',\n        },\n      },\n    },\n    MuiButton: {\n      root: {\n        borderRadius: '4px',\n        textTransform: 'none',\n        color: 'rgb(40, 42, 43)',\n        fontSize: '0.9rem',\n        transition: defaultTheme.transitions.create(['background-color', 'box-shadow', 'border', 'color'], {\n          duration: defaultTheme.transitions.duration.short,\n        }),\n      },\n      text: {\n        padding: '6px 14px',\n      },\n      contained: {\n        boxShadow: 'none',\n        '&:hover': {\n          boxShadow: 'none',\n        },\n      },\n      outlinedPrimary: {\n        border: '2px solid #027AC5',\n        '&:hover': {\n          border: '2px solid rgb(1, 85, 137)',\n        },\n      },\n      startIcon: {\n        marginRight: '6px',\n      },\n    },\n    MuiTypography: {\n      body1: {\n        color: 'rgb(40, 42, 43)',\n        fontSize: '0.9rem',\n      },\n    },\n    MuiInputBase: {\n      root: {\n        fontSize: '0.9rem',\n      },\n    },\n    MuiSelect: {\n      root: {\n        padding: '0.85em',\n      },\n    },\n    MuiDialogActions: {\n      root: {\n        padding: '16px',\n      },\n    },\n    MuiTextField: {\n      root: {\n        color: 'rgb(40, 42, 43)',\n      },\n    },\n    MuiInputLabel: {\n      root: {\n        color: 'rgb(40, 42, 43)',\n        fontSize: '1.1rem',\n        marginBottom: '0.2em',\n        fontWeight: 500,\n      },\n    },\n    MuiOutlinedInput: {\n      notchedOutline: {\n        borderColor: 'rgb(136, 140, 142)',\n      },\n    },\n  },\n  typography: {\n    fontFamily: 'Inter, sans-serif',\n  },\n  palette: {\n    primary: {\n      main: '#027AC5',\n    },\n  },\n  brand: '#E22525',\n  footerHeight: 72,\n  mobileFooterHeight: 56,\n  sidebarWidth: 355,\n  sidebarMobileHeight: 90,\n  sidebarMobilePadding: 8,\n  participantBorderWidth: 2,\n  mobileTopBarHeight: 52,\n  chatWindowWidth: 320,\n});\n","import { ConnectOptions } from 'twilio-video';\nimport { isMobile, removeUndefineds } from '..';\nimport { getResolution } from '../../state/settings/renderDimensions';\nimport { useAppState } from '../../state';\n\nexport default function useConnectionOptions() {\n  const { roomType, settings } = useAppState();\n\n  // See: https://sdk.twilio.com/js/video/releases/2.0.0/docs/global.html#ConnectOptions\n  // for available connection options.\n  const connectionOptions: ConnectOptions = {\n    // Bandwidth Profile, Dominant Speaker, and Network Quality\n    // features are only available in Small Group or Group Rooms.\n    // Please set \"Room Type\" to \"Group\" or \"Small Group\" in your\n    // Twilio Console: https://www.twilio.com/console/video/configure\n    bandwidthProfile: {\n      video: {\n        mode: settings.bandwidthProfileMode,\n        dominantSpeakerPriority: settings.dominantSpeakerPriority,\n        renderDimensions: {\n          low: getResolution(settings.renderDimensionLow),\n          standard: getResolution(settings.renderDimensionStandard),\n          high: getResolution(settings.renderDimensionHigh),\n        },\n        maxTracks: Number(settings.maxTracks),\n        trackSwitchOffMode: settings.trackSwitchOffMode,\n      },\n    },\n    dominantSpeaker: true,\n    networkQuality: { local: 1, remote: 1 },\n\n    // Comment this line if you are playing music.\n    maxAudioBitrate: Number(settings.maxAudioBitrate),\n\n    // VP8 simulcast enables the media server in a Small Group or Group Room\n    // to adapt your encoded video quality for each RemoteParticipant based on\n    // their individual bandwidth constraints. Simulcast should be disabled if\n    // you are using Peer-to-Peer or 'Go' Rooms.\n    preferredVideoCodecs: [{ codec: 'VP8', simulcast: roomType !== 'peer-to-peer' && roomType !== 'go' }],\n\n    //@ts-ignore - Internal use only. This property is not exposed in type definitions.\n    environment: process.env.REACT_APP_TWILIO_ENVIRONMENT,\n  };\n\n  // For mobile browsers, limit the maximum incoming video bitrate to 2.5 Mbps.\n  if (isMobile && connectionOptions?.bandwidthProfile?.video) {\n    connectionOptions!.bandwidthProfile!.video!.maxSubscriptionBitrate = 2500000;\n  }\n\n  if (process.env.REACT_APP_TWILIO_ENVIRONMENT === 'dev') {\n    //@ts-ignore - Internal use only. This property is not exposed in type definitions.\n    connectionOptions!.wsServer = 'wss://us2.vss.dev.twilio.com/signaling';\n  }\n\n  // Here we remove any 'undefined' values. The twilio-video SDK will only use defaults\n  // when no value is passed for an option. It will throw an error when 'undefined' is passed.\n  return removeUndefineds(connectionOptions);\n}\n","import React from 'react';\nimport Video from 'twilio-video';\nimport { Container, Link, Typography, Paper, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  container: {\n    marginTop: '2.5em',\n  },\n  paper: {\n    padding: '1em',\n  },\n  heading: {\n    marginBottom: '0.4em',\n  },\n});\n\nexport default function UnsupportedBrowserWarning({ children }: { children: React.ReactElement }) {\n  const classes = useStyles();\n\n  if (!Video.isSupported) {\n    return (\n      <Container>\n        <Grid container justify=\"center\" className={classes.container}>\n          <Grid item xs={12} sm={6}>\n            <Paper className={classes.paper}>\n              <Typography variant=\"h4\" className={classes.heading}>\n                Browser or context not supported\n              </Typography>\n              <Typography>\n                Please open this application in one of the{' '}\n                <Link\n                  href=\"https://www.twilio.com/docs/video/javascript#supported-browsers\"\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  supported browsers\n                </Link>\n                .\n                <br />\n                If you are using a supported browser, please ensure that this app is served over a{' '}\n                <Link\n                  href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\"\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  secure context\n                </Link>{' '}\n                (e.g. https or localhost).\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n      </Container>\n    );\n  }\n\n  return children;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { CssBaseline } from '@material-ui/core';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\n\nimport App from './App';\nimport AppStateProvider, { useAppState } from './state';\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\nimport ErrorDialog from './components/ErrorDialog/ErrorDialog';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport PrivateRoute from './components/PrivateRoute/PrivateRoute';\nimport theme from './theme';\nimport './types';\nimport { ChatProvider } from './components/ChatProvider';\nimport { VideoProvider } from './components/VideoProvider';\nimport useConnectionOptions from './utils/useConnectionOptions/useConnectionOptions';\nimport UnsupportedBrowserWarning from './components/UnsupportedBrowserWarning/UnsupportedBrowserWarning';\n\nconst VideoApp = () => {\n  const { error, setError } = useAppState();\n  const connectionOptions = useConnectionOptions();\n\n  return (\n    <VideoProvider options={connectionOptions} onError={setError}>\n      <ErrorDialog dismissError={() => setError(null)} error={error} />\n      <ChatProvider>\n        <App />\n      </ChatProvider>\n    </VideoProvider>\n  );\n};\n\nReactDOM.render(\n  <MuiThemeProvider theme={theme}>\n    <CssBaseline />\n    <UnsupportedBrowserWarning>\n      <Router>\n        <AppStateProvider>\n          <Switch>\n            <PrivateRoute exact path=\"/\">\n              <VideoApp />\n            </PrivateRoute>\n            <PrivateRoute path=\"/room/:URLRoomName\">\n              <VideoApp />\n            </PrivateRoute>\n            <Route path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Redirect to=\"/\" />\n          </Switch>\n        </AppStateProvider>\n      </Router>\n    </UnsupportedBrowserWarning>\n  </MuiThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}