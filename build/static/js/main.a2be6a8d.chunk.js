(this["webpackJsonptwilio-video-app-react"]=this["webpackJsonptwilio-video-app-react"]||[]).push([[0],{330:function(e){e.exports=JSON.parse('{"a":"0.3.1"}')},576:function(e,t){},598:function(e,t){},634:function(e,t){},669:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),o=n.n(i),c=n(726),l=n(725),s=n(8),u=n(733),d=n(328),m=n(732),f=n(707),p=n(3),v=n(4),h=Object(a.createContext)(null);function b(){var e=Object(a.useContext)(h),t=Object(v.a)(e,2);return[t[0],t[1]]}function g(e){var t=e.room,n=e.children,i=Object(a.useState)(null),o=Object(v.a)(i,2),c=o[0],l=o[1];return Object(a.useEffect)((function(){if(t){var e=function(){return l(null)},n=function(e){return l((function(t){return t===e?null:t}))};return t.on("disconnected",e),t.on("participantDisconnected",n),function(){t.off("disconnected",e),t.off("participantDisconnected",n)}}}),[t]),r.a.createElement(h.Provider,{value:[c,function(e){return l((function(t){return t===e?null:e}))}]},n)}var E=n(327),C=n.n(E),w="undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/Mobile/.test(navigator.userAgent);function O(e){if(!C()(e))return e;var t={};for(var n in e){var a=e[n];"undefined"!==typeof a&&(t[n]=O(a))}return t}function S(){var e=I(),t=e.room,n=e.localTracks,r=e.getLocalVideoTrack,i=e.removeLocalVideoTrack,o=e.onError,c=null===t||void 0===t?void 0:t.localParticipant,l=n.find((function(e){return e.name.includes("camera")})),s=Object(a.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],f=Object(a.useCallback)((function(){if(!d)if(l){var e=null===c||void 0===c?void 0:c.unpublishTrack(l);null===c||void 0===c||c.emit("trackUnpublished",e),i()}else m(!0),r().then((function(e){return null===c||void 0===c?void 0:c.publishTrack(e,{priority:"low"})})).catch(o).finally((function(){return m(!1)}))}),[l,c,r,d,o,i]);return[!!l,f]}function j(){var e=I().room,t=S(),n=Object(v.a)(t,2),r=n[0],i=n[1],o=Object(a.useRef)(!1);return Object(a.useEffect)((function(){if(e&&w){var t=function(){"hidden"===document.visibilityState&&r?(o.current=!0,i()):o.current&&(o.current=!1,i())};return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}}),[r,e,i]),null}var k=n(25),x={width:1280,height:720,frameRate:24},y="TwilioVideoApp-selectedAudioInput",T="TwilioVideoApp-selectedAudioOutput",L="TwilioVideoApp-selectedVideoInput",N=n(46),P=n.n(N);function R(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return navigator.mediaDevices.enumerateDevices().then((function(e){return r(e)}))};return navigator.mediaDevices.addEventListener("devicechange",e),e(),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[]),{audioInputDevices:n.filter((function(e){return"audioinput"===e.kind})),videoInputDevices:n.filter((function(e){return"videoinput"===e.kind})),audioOutputDevices:n.filter((function(e){return"audiooutput"===e.kind})),hasAudioInputDevices:n.filter((function(e){return"audioinput"===e.kind})).length>0,hasVideoInputDevices:n.filter((function(e){return"videoinput"===e.kind})).length>0}}window.TwilioVideo=P.a;var A=Object(a.createContext)(null);function _(e){var t=e.options,n=e.children,i=e.onError,o=void 0===i?function(){}:i,c=Object(a.useCallback)((function(e){console.log("ERROR: ".concat(e.message),e),o(e)}),[o]),l=function(){var e=Object(a.useState)(),t=Object(v.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),o=Object(v.a)(i,2),c=o[0],l=o[1],s=Object(a.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],f=R(),p=f.audioInputDevices,h=f.videoInputDevices,b=f.hasAudioInputDevices,g=f.hasVideoInputDevices,E=Object(a.useCallback)((function(e){var t={};return e&&(t.deviceId={exact:e}),P.a.createLocalAudioTrack(t).then((function(e){return r(e),e}))}),[]),C=Object(a.useCallback)((function(){var e=window.localStorage.getItem(L),t=h.some((function(t){return e&&t.deviceId===e})),n=Object(k.a)(Object(k.a)({},x),{},{name:"camera-".concat(Date.now())},t&&{deviceId:{exact:e}});return P.a.createLocalVideoTrack(n).then((function(e){return l(e),e}))}),[h]),w=Object(a.useCallback)((function(){n&&(n.stop(),r(void 0))}),[n]),O=Object(a.useCallback)((function(){c&&(c.stop(),l(void 0))}),[c]),S=Object(a.useCallback)((function(){if(!b&&!g)return Promise.resolve();if(d||n||c)return Promise.resolve();m(!0);var e=window.localStorage.getItem(y),t=window.localStorage.getItem(L),a=p.some((function(t){return e&&t.deviceId===e})),i=h.some((function(e){return t&&e.deviceId===t})),o={video:g&&Object(k.a)(Object(k.a)({},x),{},{name:"camera-".concat(Date.now())},i&&{deviceId:{exact:t}}),audio:a?{deviceId:{exact:e}}:b};return P.a.createLocalTracks(o).then((function(e){var t=e.find((function(e){return"video"===e.kind})),n=e.find((function(e){return"audio"===e.kind}));t&&l(t),n&&r(n)})).finally((function(){return m(!1)}))}),[b,g,n,c,p,h,d]);return{localTracks:[n,c].filter((function(e){return void 0!==e})),getLocalVideoTrack:C,getLocalAudioTrack:E,isAcquiringLocalTracks:d,removeLocalAudioTrack:w,removeLocalVideoTrack:O,getAudioAndVideoTracks:S}}(),s=l.localTracks,u=l.getLocalVideoTrack,d=l.getLocalAudioTrack,m=l.isAcquiringLocalTracks,f=l.removeLocalAudioTrack,p=l.removeLocalVideoTrack,h=l.getAudioAndVideoTracks,b=function(e,t,n){var r=Object(a.useState)(null),i=Object(v.a)(r,2),o=i[0],c=i[1],l=Object(a.useState)(!1),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(a.useRef)(n);return Object(a.useEffect)((function(){m.current=n}),[n]),{room:o,isConnecting:u,connect:Object(a.useCallback)((function(n){return d(!0),P.a.connect(n,Object(k.a)(Object(k.a)({},m.current),{},{tracks:e})).then((function(e){c(e);var t=function(){return e.disconnect()};e.setMaxListeners(15),e.once("disconnected",(function(){setTimeout((function(){return c(null)})),window.removeEventListener("beforeunload",t),w&&window.removeEventListener("pagehide",t)})),window.twilioRoom=e,e.localParticipant.videoTracks.forEach((function(e){return e.setPriority("low")})),d(!1),window.addEventListener("beforeunload",t),w&&window.addEventListener("pagehide",t)}),(function(e){t(e),d(!1)}))}),[e,t])}}(s,c,t),E=b.room,C=b.isConnecting,O=b.connect,S=function(e,t){var n=Object(a.useState)(!1),r=Object(v.a)(n,2),i=r[0],o=r[1],c=Object(a.useRef)(null),l=Object(a.useCallback)((function(){navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then((function(n){var a=n.getTracks()[0];e.localParticipant.publishTrack(a,{name:"screen",priority:"low"}).then((function(t){c.current=function(){e.localParticipant.unpublishTrack(a),e.localParticipant.emit("trackUnpublished",t),a.stop(),o(!1)},a.onended=c.current,o(!0)})).catch(t)})).catch((function(e){"AbortError"!==e.name&&"NotAllowedError"!==e.name&&t(e)}))}),[e,t]),s=Object(a.useCallback)((function(){e&&(i?c.current():l())}),[i,l,c,e]);return[i,s]}(E,o),T=Object(v.a)(S,2),N=T[0],_=T[1];return function(e,t,n,r,i,o){Object(a.useEffect)((function(){if(e){var a=function(e,a){a&&t(a),n(),r(),i&&o()};return e.on("disconnected",a),function(){e.off("disconnected",a)}}}),[e,t,n,r,i,o])}(E,o,f,p,N,_),function(e,t){Object(a.useEffect)((function(){if(e)return e.localParticipant.on("trackPublicationFailed",t),function(){e.localParticipant.off("trackPublicationFailed",t)}}),[e,t])}(E,o),function(e){var t=e.find((function(e){return"audio"===e.kind}));Object(a.useEffect)((function(){var e=function(){"ended"===(null===t||void 0===t?void 0:t.mediaStreamTrack.readyState)&&t.restart({})};return navigator.mediaDevices.addEventListener("devicechange",e),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[t])}(s),r.a.createElement(A.Provider,{value:{room:E,localTracks:s,isConnecting:C,onError:c,getLocalVideoTrack:u,getLocalAudioTrack:d,connect:O,isAcquiringLocalTracks:m,removeLocalVideoTrack:p,isSharingScreen:N,toggleScreenShare:_,getAudioAndVideoTracks:h}},r.a.createElement(g,{room:E},n),r.a.createElement(j,null))}function I(){var e=Object(a.useContext)(A);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}var B=Object(d.a)((function(e){return Object(m.a)({button:{background:e.brand,color:"white","&:hover":{background:"#600101"}}})}));function D(e){var t=B(),n=I().room;return r.a.createElement(f.a,{onClick:function(){return n.disconnect()},className:Object(p.a)(t.button,e.className),"data-cy-disconnect":!0},"Disconnect")}var M=n(730),H=n(714),W=n(712),z=n(713),F=n(710),V=n(711),U=n(330),K=n(16),Z=n.n(K),G=n(114),Y={trackSwitchOffMode:void 0,dominantSpeakerPriority:"standard",bandwidthProfileMode:"collaboration",maxTracks:w?"5":"10",maxAudioBitrate:"16000",renderDimensionLow:"low",renderDimensionStandard:"960p",renderDimensionHigh:"wide1080p"},q=function(){var e={};for(var t in Y)e[t]=t;return e}();function J(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(s.a)({},t.name,"default"===t.value?void 0:t.value))}n(120),n(480),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_API_KEY,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_AUTH_DOMAIN,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_DATABASE_URL,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_STORAGE_BUCKET,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID;var Q=n(83);function X(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"true"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_DISABLE_TWILIO_CONVERSATIONS;return fetch("/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n,create_room:a,create_conversation:r})})}function $(e){return X("temp-name","temp-room",e,!1,!1).then(function(){var e=Object(G.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,401!==t.status){e.next=5;break}return e.abrupt("return",{isValid:!1,error:null===(a=n.error)||void 0===a?void 0:a.message});case 5:if(!t.ok||!n.token){e.next=7;break}return e.abrupt("return",{isValid:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function ee(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}function te(){var e=Object(Q.g)(),t=Object(a.useState)(null),n=Object(v.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!1),c=Object(v.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(),d=Object(v.a)(u,2),m=d[0],f=d[1],p=Object(a.useCallback)((function(e,t){return X(e,t,r.passcode).then(function(){var e=Object(G.a)(Z.a.mark((function e(t){var n,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:throw a=e.sent,r=ee((null===(n=a.error)||void 0===n?void 0:n.message)||t.statusText),Error(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).then((function(e){return f(e.room_type),e.token}))}),[r]);Object(a.useEffect)((function(){var t=function(){var e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?$(t).then((function(n){(null===n||void 0===n?void 0:n.isValid)&&(i({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))})).then((function(){return s(!0)})):s(!0)}),[e]);var h=Object(a.useCallback)((function(e){return $(e).then((function(t){if(!(null===t||void 0===t?void 0:t.isValid))throw new Error(ee(null===t||void 0===t?void 0:t.error));i({passcode:e}),window.sessionStorage.setItem("passcode",e)}))}),[]),b=Object(a.useCallback)((function(){return i(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()}),[]);return{user:r,isAuthReady:l,getToken:p,signIn:h,signOut:b,roomType:m}}var ne=Object(a.createContext)(null);function ae(e){var t=Object(a.useState)(null),n=Object(v.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)(!1),l=Object(v.a)(c,2),s=l[0],u=l[1],d=function(){var e=R().audioOutputDevices,t=Object(a.useState)("default"),n=Object(v.a)(t,2),r=n[0],i=n[1],o=Object(a.useCallback)((function(e){window.localStorage.setItem(T,e),i(e)}),[i]);return Object(a.useEffect)((function(){var t=window.localStorage.getItem(T);e.some((function(e){return t&&e.deviceId===t}))&&i(t)}),[e]),[r,o]}(),m=Object(v.a)(d,2),f=m[0],p=m[1],h=Object(a.useReducer)(J,Y),b=Object(v.a)(h,2),g=b[0],E=b[1],C={error:i,setError:o,isFetching:s,activeSinkId:f,setActiveSinkId:p,settings:g,dispatchSetting:E};C=Object(k.a)(Object(k.a)({},C),te());return r.a.createElement(ne.Provider,{value:Object(k.a)(Object(k.a)({},C),{},{getToken:function(e,t){return u(!0),C.getToken(e,t).then((function(e){return u(!1),e})).catch((function(e){return o(e),u(!1),Promise.reject(e)}))}})},e.children)}function re(){var e=Object(a.useContext)(ne);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}var ie=function(e){var t=e.open,n=e.onClose,a=re().roomType;return r.a.createElement(M.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs"},r.a.createElement(F.a,null,"About"),r.a.createElement(V.a,null),r.a.createElement(W.a,null,r.a.createElement(z.a,null,"Browser supported: ",String(P.a.isSupported)),r.a.createElement(z.a,null,"SDK Version: ",P.a.version),r.a.createElement(z.a,null,"App Version: ",U.a),r.a.createElement(z.a,null,"Deployed Tag: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_GIT_TAG||"N/A"),r.a.createElement(z.a,null,"Deployed Commit Hash: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_GIT_COMMIT||"N/A"),a&&r.a.createElement(z.a,null,"Room Type: ",a)),r.a.createElement(V.a,null),r.a.createElement(H.a,null,r.a.createElement(f.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},oe=n(740);function ce(e){var t=Object(a.useState)(!!e&&e.isEnabled),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(!!e&&e.isEnabled),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}function le(e){var t=Object(a.useState)(null===e||void 0===e?void 0:e.mediaStreamTrack),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(null===e||void 0===e?void 0:e.mediaStreamTrack),e){var t=function(){return i(e.mediaStreamTrack)};return e.on("started",t),function(){e.off("started",t)}}}),[e]),r}var se,ue=0,de=window.AudioContext||window.webkitAudioContext;function me(e){var t=(se=se||new de).createMediaStreamSource(e),n=se.createAnalyser();return n.smoothingTimeConstant=.2,n.fftSize=256,t.connect(n),n}function fe(e){var t=e.audioTrack,n=e.color,i=void 0===n?"white":n,o=Object(a.useRef)(null),c=Object(a.useState)(),l=Object(v.a)(c,2),s=l[0],u=l[1],d=ce(t),m=le(t);Object(a.useEffect)((function(){if(t&&m&&d){var e=new MediaStream([m.clone()]),n=function(){return e.getTracks().forEach((function(e){return e.stop()}))};t.on("stopped",n);var a=function(){n(),e=new MediaStream([m.clone()]),u(me(e))};return u(me(e)),window.addEventListener("focus",a),function(){n(),window.removeEventListener("focus",a),t.off("stopped",n)}}}),[d,m,t]),Object(a.useEffect)((function(){var e=o.current;if(d&&e&&s){var t=new Uint8Array(s.frequencyBinCount),n=Object(oe.a)((function(){s.getByteFrequencyData(t);for(var n=0,a=t.length,r=0;r<a;r++)n+=t[r];var i=Math.min(14,Math.max(0,7*Math.log10(n/a/3)));null===e||void 0===e||e.setAttribute("y",String(14-i))}),100);return function(){e.setAttribute("y","14"),n.stop()}}}),[d,s]);var f="audio-level-clip-".concat(ue++);return d?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test-audio-indicator":!0},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:f},r.a.createElement("rect",{ref:o,x:"0",y:"14",width:"24",height:"24"}))),r.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(.5)"},r.a.createElement("rect",{clipPath:"url(#".concat(f,")"),width:"5.2",height:"10",x:"9.5",y:"3.5",rx:"6",ry:"3",fill:"#23BF6E"}),r.a.createElement("path",{fill:i,strokeWidth:"0",d:"M17.389 10.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V17.09C8.395 16.836 6 14.281 6 11.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM11.944 4c1.566 0 2.834 1.268 2.834 2.833v4.334c0 1.564-1.268 2.833-2.834 2.833-1.564 0-2.833-1.27-2.833-2.833V6.833C9.111 5.268 10.38 4 11.944 4zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334c0 1.012.822 1.833 1.833 1.833 1.013 0 1.834-.82 1.834-1.833V6.833c0-1.013-.82-1.833-1.834-1.833z"}))):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",transform:"translate(-0.5, 0)","data-test-audio-mute-icon":!0},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:i,strokeWidth:"0",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),r.a.createElement("path",{fill:"red",strokeWidth:"0",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))}var pe=r.a.memo(fe),ve=n(209),he=n(715),be=n(716),ge=n(728),Ee=n(735);function Ce(){var e=R().audioInputDevices,t=I().localTracks.find((function(e){return"audio"===e.kind})),n=le(t),a=null===n||void 0===n?void 0:n.getSettings().deviceId;return r.a.createElement("div",null,r.a.createElement(ve.a,{variant:"subtitle2",gutterBottom:!0},"Audio Input"),r.a.createElement(he.a,{container:!0,alignItems:"center",justify:"space-between"},r.a.createElement("div",{className:"inputSelect"},e.length>1?r.a.createElement(be.a,{fullWidth:!0},r.a.createElement(ge.a,{onChange:function(e){return n=e.target.value,window.localStorage.setItem(y,n),void(null===t||void 0===t||t.restart({deviceId:{exact:n}}));var n},value:a||"",variant:"outlined"},e.map((function(e){return r.a.createElement(Ee.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(ve.a,null,(null===t||void 0===t?void 0:t.mediaStreamTrack.label)||"No Local Audio")),r.a.createElement(pe,{audioTrack:t,color:"black"})))}function we(){var e,t=R().audioOutputDevices,n=re(),a=n.activeSinkId,i=n.setActiveSinkId,o=null===(e=t.find((function(e){return e.deviceId===a})))||void 0===e?void 0:e.label;return r.a.createElement("div",{className:"inputSelect"},t.length>1?r.a.createElement(be.a,{fullWidth:!0},r.a.createElement(ve.a,{variant:"subtitle2",gutterBottom:!0},"Audio Output"),r.a.createElement(ge.a,{onChange:function(e){return i(e.target.value)},value:a,variant:"outlined"},t.map((function(e){return r.a.createElement(Ee.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"subtitle2"},"Audio Output"),r.a.createElement(ve.a,null,o||"System Default Audio Output")))}var Oe=Object(u.a)("video")({width:"100%",height:"100%"});function Se(e){var t,n,i=e.track,o=e.isLocal,c=e.priority,l=Object(a.useRef)(null),s=le(i),u=function(e){var t=Object(a.useState)(null===e||void 0===e?void 0:e.dimensions),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(null===e||void 0===e?void 0:e.dimensions),e){var t=function(e){return i({width:e.dimensions.width,height:e.dimensions.height})};return e.on("dimensionsChanged",t),function(){e.off("dimensionsChanged",t)}}}),[e]),r}(i),d=(null!==(t=null===u||void 0===u?void 0:u.height)&&void 0!==t?t:0)>(null!==(n=null===u||void 0===u?void 0:u.width)&&void 0!==n?n:0);Object(a.useEffect)((function(){var e=l.current;return e.muted=!0,i.setPriority&&c&&i.setPriority(c),i.attach(e),function(){i.detach(e),i.setPriority&&c&&i.setPriority(null)}}),[i,c]);var m="environment"!==(null===s||void 0===s?void 0:s.getSettings().facingMode),f={transform:o&&m?"rotateY(180deg)":"",objectFit:d||i.name.includes("screen")?"contain":"cover"};return r.a.createElement(Oe,{ref:l,style:f})}var je=Object(d.a)({preview:{width:"300px",maxHeight:"200px",margin:"0.5em auto","& video":{maxHeight:"200px"}}});function ke(){var e=je(),t=R().videoInputDevices,n=I().localTracks.find((function(e){return"video"===e.kind})),i=le(n),o=Object(a.useState)(window.localStorage.getItem(L)),c=Object(v.a)(o,2),l=c[0],s=c[1],u=(null===i||void 0===i?void 0:i.getSettings().deviceId)||l;return r.a.createElement("div",null,n&&r.a.createElement("div",{className:e.preview},r.a.createElement(Se,{isLocal:!0,track:n})),t.length>1?r.a.createElement(be.a,{fullWidth:!0},r.a.createElement(ve.a,{variant:"subtitle2",gutterBottom:!0},"Video Input"),r.a.createElement(ge.a,{onChange:function(e){return t=e.target.value,s(t),window.localStorage.setItem(L,t),void(null===n||void 0===n||n.restart(Object(k.a)(Object(k.a)({},x),{},{deviceId:{exact:t}})));var t},value:u||"",variant:"outlined"},t.map((function(e){return r.a.createElement(Ee.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"subtitle2",gutterBottom:!0},"Video Input"),r.a.createElement(ve.a,null,(null===n||void 0===n?void 0:n.mediaStreamTrack.label)||"No Local Video")))}var xe=Object(d.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(s.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(s.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(s.a)({},e.breakpoints.down("xs"),{margin:"16px"}),headline:{marginBottom:"1.3em",fontSize:"1.1rem"},listSection:{margin:"2em 0 0.8em","&:first-child":{margin:"1em 0 2em 0"}}}}));function ye(e){var t=e.open,n=e.onClose,a=xe();return r.a.createElement(M.a,{open:t,onClose:n,classes:{paper:a.paper}},r.a.createElement(F.a,null,"Audio and Video Settings"),r.a.createElement(V.a,null),r.a.createElement(W.a,{className:a.container},r.a.createElement("div",{className:a.listSection},r.a.createElement(ve.a,{variant:"h6",className:a.headline},"Video"),r.a.createElement(ke,null)),r.a.createElement(V.a,null),r.a.createElement("div",{className:a.listSection},r.a.createElement(ve.a,{variant:"h6",className:a.headline},"Audio"),r.a.createElement(Ce,null)),r.a.createElement("div",{className:a.listSection},r.a.createElement(we,null))),r.a.createElement(V.a,null),r.a.createElement(H.a,null,r.a.createElement(f.a,{color:"primary",variant:"contained",className:a.button,onClick:n},"Done")))}var Te=n(205),Le=n.n(Te);function Ne(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("g",{fill:"#707578"},r.a.createElement("path",{d:"M12 3.5c4.694 0 8.5 3.806 8.5 8.5s-3.806 8.5-8.5 8.5-8.5-3.806-8.5-8.5S7.306 3.5 12 3.5zm0 1c-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5 4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5zm1.367 3.429C14.959 8.492 16.1 10.215 16.1 12c0 1.16-.481 2.294-1.256 3.1h.356c.245 0 .45.177.492.41l.008.09c0 .245-.177.45-.41.492l-.09.008h-2.008l-.048-.003-.034-.005c-.088-.017-.167-.055-.233-.11l-.06-.06c-.037-.044-.067-.096-.087-.151l-.001-.004-.012-.04c-.004-.012-.007-.024-.009-.037v-.005c-.005-.024-.006-.042-.007-.06L12.7 13.6c0-.276.224-.5.5-.5.245 0 .45.177.492.41l.008.09v1.176c.833-.6 1.4-1.676 1.4-2.776 0-1.373-.886-2.71-2.067-3.129-.26-.092-.396-.377-.304-.638.092-.26.378-.396.638-.304zm-2.559-.03c.03.001.058.004.086.01l.062.016.018.006c.04.015.075.034.108.056.086.059.152.143.188.242l.001.004.008.025c.006.017.01.034.013.052l.008.09v2c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V9.224c-.833.6-1.4 1.676-1.4 2.776 0 1.373.886 2.71 2.067 3.129.26.092.396.377.304.638-.092.26-.378.396-.638.304C9.041 15.508 7.9 13.785 7.9 12c0-1.16.481-2.294 1.255-3.1H8.8c-.245 0-.45-.177-.492-.41L8.3 8.4c0-.245.177-.45.41-.492L8.8 7.9h2.008z",transform:"translate(-233 -689) translate(-1 673) translate(37 16) translate(197.298)"}))))}function Pe(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("g",{fill:"#707578"},r.a.createElement("path",{d:"M10 2c4.418 0 8 3.582 8 8s-3.582 8-8 8-8-3.582-8-8 3.582-8 8-8zm0 1.25c-3.728 0-6.75 3.022-6.75 6.75s3.022 6.75 6.75 6.75 6.75-3.022 6.75-6.75S13.728 3.25 10 3.25zM10 9c.552 0 1 .448 1 1v3c0 .552-.448 1-1 1s-1-.448-1-1v-3c0-.552.448-1 1-1zm0-3c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z",transform:"translate(-1107 -888) translate(1082 799) translate(1 81) translate(24 8)"}))))}var Re=n(347),Ae=n(163),_e=n.n(Ae);function Ie(){return r.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.774 14.14L16.3413 13.2506C16.3286 13.2244 16.3173 13.1974 16.3075 13.17C16.1465 12.7274 16.3736 12.2377 16.8155 12.0749L17.7467 11.7347C18.5055 11.4566 19.0077 10.7311 19.0011 9.92278C18.9944 9.11441 18.4804 8.39788 17.7172 8.13314L16.7859 7.81039C16.758 7.80094 16.7306 7.7894 16.7056 7.77843C16.2794 7.57999 16.0942 7.07384 16.2915 6.64668L16.7082 5.74887C17.049 5.01563 16.8921 4.14738 16.3163 3.58049C15.7405 3.0136 14.8703 2.87065 14.1431 3.2235L13.246 3.65462C13.2199 3.66744 13.1931 3.67882 13.1658 3.68869C12.954 3.76821 12.7189 3.75812 12.5148 3.66073C12.3097 3.56606 12.1511 3.39306 12.0746 3.18044L12.0741 3.17844L11.7334 2.25081C11.4547 1.49408 10.7313 0.994061 9.92513 1.00105C9.119 1.00804 8.40369 1.52053 8.13727 2.28199L7.8091 3.22223C7.79964 3.25006 7.78863 3.27733 7.7761 3.30391C7.57656 3.73058 7.06934 3.91499 6.64288 3.71592L5.74485 3.29868C5.01263 2.96105 4.14713 3.11998 3.58195 3.69585C3.01677 4.27171 2.87367 5.14046 3.22434 5.86685L3.65571 6.76067C3.66851 6.78686 3.67999 6.81368 3.69009 6.84103C3.85069 7.28399 3.62314 7.77372 3.18105 7.9366L2.25109 8.27683C1.74395 8.46368 1.33939 8.85649 1.13749 9.3581C0.935598 9.8597 0.955223 10.4232 1.19151 10.9093C1.41059 11.3666 1.80499 11.7159 2.28525 11.878L3.21579 12.2005C3.24614 12.2114 3.27565 12.2233 3.30063 12.2343C3.72728 12.4329 3.91226 12.9399 3.7139 13.3671L3.29483 14.2675C3.07772 14.742 3.06371 15.2845 3.25603 15.7693C3.44835 16.2542 3.83032 16.6393 4.31342 16.8354C4.34216 16.847 4.3712 16.8578 4.40056 16.8679C4.87879 17.0366 5.40471 17.0069 5.86112 16.7853L6.75557 16.3531C6.78218 16.3402 6.81093 16.3286 6.8356 16.3194C7.04851 16.2445 7.282 16.2542 7.48788 16.3465C7.6933 16.4413 7.85223 16.6144 7.92922 16.8273L8.27064 17.7606C8.55155 18.5147 9.27456 19.0117 10.079 19.0036C10.8834 18.9955 11.5969 18.4841 11.8635 17.7245L12.1864 16.7928C12.1968 16.7627 12.2087 16.7332 12.2201 16.7083C12.4211 16.2836 12.9258 16.099 13.3529 16.2939L14.2494 16.7105C14.9825 17.0512 15.8508 16.8933 16.4177 16.3161C16.9845 15.7389 17.1272 14.8675 16.774 14.14ZM15.4272 15.7438C15.1965 15.8557 14.9279 15.8582 14.6953 15.7505L13.7992 15.334C13.3395 15.1185 12.8127 15.0956 12.3358 15.2705C11.8589 15.4453 11.4714 15.8035 11.2594 16.2653C11.2334 16.3231 11.21 16.381 11.1879 16.4434L10.8648 17.3755C10.7896 17.5889 10.6327 17.7637 10.4286 17.8613C10.2245 17.959 9.9901 17.9714 9.77695 17.8959C9.53792 17.8159 9.34868 17.6308 9.26323 17.3935L8.92318 16.4634C8.74891 15.9867 8.39229 15.5989 7.93192 15.3856C7.47155 15.1724 6.94522 15.1511 6.46891 15.3264C6.40896 15.349 6.35008 15.3734 6.29456 15.4005L5.4017 15.832C5.198 15.9306 4.96337 15.9438 4.75003 15.8685C4.53569 15.7956 4.36017 15.6387 4.26376 15.4338C4.15381 15.2059 4.15081 14.9409 4.25558 14.7105L4.6727 13.8138C4.88722 13.3534 4.9098 12.8267 4.73547 12.3499C4.56113 11.8731 4.20422 11.4855 3.74357 11.2726C3.71568 11.26 3.68725 11.2477 3.65813 11.2359C3.62824 11.2238 3.59766 11.2124 3.56562 11.2012L2.6307 10.8774C2.29028 10.7597 2.06067 10.4405 2.0571 10.0801C2.05353 9.71966 2.27677 9.39575 2.61479 9.2709L3.54421 8.93088C4.05237 8.74551 4.45826 8.35329 4.66113 7.8516C4.864 7.34991 4.8448 6.7858 4.60832 6.29933L4.17719 5.40605C4.0208 5.08228 4.08434 4.69501 4.33601 4.43805C4.58769 4.18109 4.97337 4.1097 5.30004 4.2596L6.19629 4.67569C6.65433 4.89215 7.1799 4.91661 7.65626 4.74364C8.13263 4.57067 8.52036 4.21458 8.73335 3.75445C8.7625 3.69314 8.78809 3.6302 8.80997 3.56594L9.13622 2.6316C9.29214 2.18707 9.77837 1.95273 10.2227 2.10793C10.4645 2.18868 10.6555 2.37645 10.7405 2.61689L11.0804 3.54291C11.2533 4.01887 11.6082 4.40647 12.067 4.62043C12.5257 4.83438 13.0507 4.85716 13.5265 4.68374C13.5885 4.66176 13.6492 4.63608 13.7082 4.60683L14.6033 4.17624C14.8065 4.07688 15.0408 4.06283 15.2542 4.13722C15.4693 4.20945 15.6456 4.36621 15.7425 4.57137C15.8549 4.80183 15.8573 5.07079 15.749 5.30333L15.3321 6.20153C15.1187 6.66179 15.0968 7.18798 15.2714 7.66415C15.446 8.14033 15.8026 8.52742 16.2627 8.74013C16.3185 8.76535 16.3747 8.78849 16.4369 8.81002L17.3702 9.13315C17.7106 9.2515 17.9398 9.57117 17.9428 9.93176C17.9458 10.2924 17.722 10.6161 17.3836 10.7405L16.4524 11.0806C15.4631 11.4445 14.9535 12.54 15.3125 13.5312C15.335 13.5933 15.3607 13.6541 15.3895 13.7135L15.8224 14.6035C15.9214 14.807 15.9353 15.0416 15.8612 15.2555C15.787 15.4694 15.6309 15.6451 15.4272 15.7438L15.4272 15.7438ZM11.3877 6.5684C9.49155 5.80233 7.33291 6.71966 6.5662 8.61733C5.79949 10.515 6.71505 12.6744 8.61116 13.4405C10.5073 14.2065 12.6659 13.2892 13.4326 11.3915C14.197 9.49389 13.2821 7.33617 11.3877 6.5684ZM9.00779 12.4587C7.65343 11.9115 6.99946 10.3691 7.54711 9.01364C8.09476 7.65816 9.63664 7.00292 10.991 7.55012C12.3454 8.09732 12.9993 9.63974 12.4517 10.9952C11.9028 12.3495 10.3621 13.0042 9.00779 12.4587Z",fill:"#606B85"}))}var Be=n(720);var De=Object(u.a)("div")({display:"flex",justifyContent:"center",width:"1.5em",marginRight:"0.3em"});function Me(e){var t=Object(Be.a)((function(e){return e.breakpoints.down("sm")})),n=Object(a.useState)(!1),i=Object(v.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(!1),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(a.useState)(!1),p=Object(v.a)(m,2),h=p[0],b=p[1],g=Object(a.useRef)(null),E=function(){var e=I().localTracks,t=Object(a.useState)(!1),n=Object(v.a)(t,2),r=n[0],i=n[1],o=e.find((function(e){return e.name.includes("camera")})),c=le(o),l=R().videoInputDevices;Object(a.useEffect)((function(){(null===c||void 0===c?void 0:c.getSettings().facingMode)&&!1===r&&i(!0)}),[c,r]);var s=Object(a.useCallback)((function(){var e="user"===(null===c||void 0===c?void 0:c.getSettings().facingMode)?"environment":"user";null===o||void 0===o||o.restart(Object(k.a)(Object(k.a)({},x),{},{facingMode:e}))}),[c,o]);return{flipCameraDisabled:!o,toggleFacingMode:s,flipCameraSupported:r&&l.length>1}}(),C=E.flipCameraDisabled,w=E.toggleFacingMode,O=E.flipCameraSupported;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){return d((function(e){return!e}))},ref:g,className:e.buttonClassName},t?r.a.createElement(_e.a,null):r.a.createElement(r.a.Fragment,null,"Settings",r.a.createElement(Le.a,null))),r.a.createElement(Re.a,{open:u,onClose:function(){return d((function(e){return!e}))},anchorEl:g.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:t?-55:"bottom",horizontal:"center"}},O&&r.a.createElement(Ee.a,{disabled:C,onClick:w},r.a.createElement(De,null,r.a.createElement(Ne,null)),r.a.createElement(ve.a,{variant:"body1"},"Flip Camera")),r.a.createElement(Ee.a,{onClick:function(){return b(!0)}},r.a.createElement(De,null,r.a.createElement(Ie,null)),r.a.createElement(ve.a,{variant:"body1"},"Audio and Video Settings")),r.a.createElement(Ee.a,{onClick:function(){return c(!0)}},r.a.createElement(De,null,r.a.createElement(Pe,null)),r.a.createElement(ve.a,{variant:"body1"},"About"))),r.a.createElement(ie,{open:o,onClose:function(){c(!1),d(!1)}}),r.a.createElement(ye,{open:h,onClose:function(){b(!1),d(!1)}}))}function He(){var e=I().room,t=Object(a.useState)("disconnected"),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(e){var t=function(){return i(e.state)};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}}),[e]),r}var We=n(729);function ze(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"17",viewBox:"0 0 12 17"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M11.389 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09C2.395 12.836 0 10.281 0 7.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM5.944 0C7.51 0 8.778 1.268 8.778 2.833v4.334C8.778 8.73 7.51 10 5.944 10 4.38 10 3.111 8.73 3.111 7.167V2.833C3.111 1.268 4.38 0 5.944 0zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334C4.111 8.179 4.933 9 5.944 9c1.013 0 1.834-.82 1.834-1.833V2.833C7.778 1.82 6.958 1 5.944 1z"}))}function Fe(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#707578",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),r.a.createElement("path",{fill:"red",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))}function Ve(e){var t=function(){var e=I().localTracks.find((function(e){return"audio"===e.kind}));return[ce(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),n=Object(v.a)(t,2),i=n[0],o=n[1],c=I().localTracks.some((function(e){return"audio"===e.kind}));return r.a.createElement(f.a,{className:e.className,onClick:o,disabled:!c||e.disabled,startIcon:i?r.a.createElement(ze,null):r.a.createElement(Fe,null),"data-cy-audio-toggle":!0},c?i?"Mute":"Unmute":"No Audio")}function Ue(){return r.a.createElement("svg",{width:"19",height:"17",viewBox:"0 0 19 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1C0 0.723858 0.223858 0.5 0.5 0.5H18.5C18.7761 0.5 19 0.723858 19 1V13C19 13.2761 18.7761 13.5 18.5 13.5H9.3096L6.32421 16.361C6.1796 16.4996 5.96624 16.5385 5.78202 16.4599C5.59779 16.3813 5.47826 16.2003 5.47826 16V13.5H0.5C0.223858 13.5 0 13.2761 0 13V1ZM1 1.5V12.5H5.97826C6.2544 12.5 6.47826 12.7239 6.47826 13V14.8283L8.76274 12.639C8.85583 12.5498 8.97977 12.5 9.1087 12.5H18V1.5H1Z",fill:"#707578"}))}var Ke=n(100),Ze=n(334),Ge=Object(a.createContext)(null),Ye=function(e){var t=e.children,n=I(),i=n.room,o=n.onError,c=Object(a.useRef)(!1),l=Object(a.useState)(!1),s=Object(v.a)(l,2),u=s[0],d=s[1],m=Object(a.useState)(null),f=Object(v.a)(m,2),p=f[0],h=f[1],b=Object(a.useState)([]),g=Object(v.a)(b,2),E=g[0],C=g[1],w=Object(a.useState)(!1),O=Object(v.a)(w,2),S=O[0],j=O[1],k=Object(a.useState)(),x=Object(v.a)(k,2),y=x[0],T=x[1],L=Object(a.useCallback)((function(e){Ze.Client.create(e).then((function(e){window.chatClient=e,T(e)})).catch((function(){o(new Error("There was a problem connecting to Twilio's conversation service."))}))}),[o]);return Object(a.useEffect)((function(){if(p){var e=function(e){return C((function(t){return[].concat(Object(Ke.a)(t),[e])}))};return p.getMessages().then((function(e){return C(e.items)})),p.on("messageAdded",e),function(){p.off("messageAdded",e)}}}),[p]),Object(a.useEffect)((function(){!c.current&&E.length&&j(!0)}),[E]),Object(a.useEffect)((function(){c.current=u,u&&j(!1)}),[u]),Object(a.useEffect)((function(){i&&y&&y.getConversationByUniqueName(i.sid).then((function(e){window.chatConversation=e,h(e)})).catch((function(){o(new Error("There was a problem getting the Conversation associated with this room."))}))}),[i,y,o]),r.a.createElement(Ge.Provider,{value:{isChatWindowOpen:u,setIsChatWindowOpen:d,connect:L,hasUnreadMessages:S,messages:E,conversation:p}},t)};function qe(){var e=Object(a.useContext)(Ge);if(!e)throw new Error("useChatContext must be used within a ChatProvider");return e}var Je=Object(d.a)({iconContainer:{position:"relative",display:"flex"},circle:{width:"10px",height:"10px",backgroundColor:"#5BB75B",borderRadius:"50%",position:"absolute",top:"-3px",left:"13px",opacity:0,transition:"opacity ".concat(350,"ms ease-in")},hasUnreadMessages:{opacity:1},ring:{border:"3px solid #5BB75B",borderRadius:"30px",height:"14px",width:"14px",position:"absolute",left:"11px",top:"-5px",opacity:0},animateRing:{animation:"$expand ".concat(700,"ms ease-out"),animationIterationCount:1},"@keyframes expand":{"0%":{transform:"scale(0.1, 0.1)",opacity:0},"50%":{opacity:1},"100%":{transform:"scale(1.4, 1.4)",opacity:0}}});function Qe(){var e=Je(),t=Object(a.useState)(!1),n=Object(v.a)(t,2),i=n[0],o=n[1],c=qe(),l=c.isChatWindowOpen,u=c.setIsChatWindowOpen,d=c.conversation,m=c.hasUnreadMessages;return Object(a.useEffect)((function(){i&&setTimeout((function(){return o(!1)}),700)}),[i]),Object(a.useEffect)((function(){if(d&&!l){var e=function(){return o(!0)};return d.on("messageAdded",e),function(){d.off("messageAdded",e)}}}),[d,l]),r.a.createElement(f.a,{"data-cy-chat-button":!0,onClick:function(){u(!l)},disabled:!d,startIcon:r.a.createElement("div",{className:e.iconContainer},r.a.createElement(Ue,null),r.a.createElement("div",{className:Object(p.a)(e.ring,Object(s.a)({},e.animateRing,i))}),r.a.createElement("div",{className:Object(p.a)(e.circle,Object(s.a)({},e.hasUnreadMessages,m))}))},"Chat")}function Xe(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#707578",d:"M10.503.85c.32 0 .611.125.827.329l-.696.697c-.025-.018-.053-.032-.084-.038l-.047-.006H1.207c-.102 0-.19.071-.216.165l-.008.059v7.866c0 .101.07.189.165.215l.059.008h1.156l-.983.983h-.173c-.624 0-1.139-.476-1.2-1.083L0 9.922V2.056C0 1.433.476.917 1.084.856l.123-.007h9.296zm5.49 1.124l.007.082v7.866c0 .337-.328.566-.635.47l-.076-.03-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H4.16l.984-.983h5.359c.101 0 .189-.07.215-.164l.008-.06V4.564l.983-.982.353-.353 3.227-1.612c.301-.15.652.04.704.358zm-.977.876L11.71 4.504v2.967l3.307 1.654V2.85z",transform:"translate(4 6)"}),r.a.createElement("path",{fill:"red",fillRule:"nonzero",d:"M13.06.144c.192-.192.503-.192.695 0 .171.17.19.436.057.627l-.057.068-12.29 12.29c-.192.193-.503.193-.695 0-.171-.17-.19-.435-.057-.626l.057-.069L13.06.144z",transform:"translate(4 6)"})))}function $e(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M15.003 7c.665 0 1.206.542 1.206 1.207v1.349l3.58-1.789c.301-.15.652.04.704.358l.007.082v7.866c0 .365-.385.603-.711.44l-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H5.707c-.665 0-1.207-.542-1.207-1.206V8.207C4.5 7.542 5.042 7 5.707 7zm0 .983H5.707c-.122 0-.224.102-.224.224v7.866c0 .121.102.223.224.223h9.296c.122 0 .223-.102.223-.223V8.207c0-.122-.101-.224-.223-.224zm4.513 1.019l-3.307 1.654v2.968l3.307 1.653V9.002z"}))}function et(e){var t=S(),n=Object(v.a)(t,2),i=n[0],o=n[1],c=Object(a.useRef)(0),l=R().hasVideoInputDevices,s=Object(a.useCallback)((function(){Date.now()-c.current>500&&(c.current=Date.now(),o())}),[o]);return r.a.createElement(f.a,{className:e.className,onClick:s,disabled:!l||e.disabled,startIcon:i?r.a.createElement($e,null):r.a.createElement(Xe,null)},l?i?"Stop Video":"Start Video":"No Video")}function tt(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M17.657 6.343c3.124 3.124 3.124 8.19 0 11.314-3.124 3.124-8.19 3.124-11.314 0-3.124-3.124-3.124-8.19 0-11.314 3.124-3.124 8.19-3.124 11.314 0zm-10.444.87c-2.643 2.644-2.643 6.93 0 9.574 2.644 2.643 6.93 2.643 9.574 0 2.57-2.57 2.641-6.693.214-9.35l-.214-.224L16.563 7c-2.657-2.427-6.78-2.356-9.35.214zm4.865.484l.02.003.026.005.041.01c.025.007.045.014.063.021l.043.019c.018.009.036.019.053.03.01.005.02.012.03.02.027.019.053.04.077.063l2.773 2.774c.24.24.24.63 0 .87-.213.214-.545.237-.785.071l-.085-.07-1.719-1.72v5.9c0 .34-.275.615-.615.615-.302 0-.553-.218-.605-.505l-.01-.11-.001-5.9-1.718 1.72c-.24.24-.63.24-.87 0-.214-.215-.238-.546-.072-.786l.072-.085 2.769-2.77.015-.014c.02-.018.04-.035.062-.05l.005-.004.008-.006c.027-.018.055-.034.085-.048l.034-.015.059-.02.032-.008c.021-.005.044-.008.068-.011l.038-.003H12.025l.027.002.026.002z"}))}var nt=n(736);function at(){var e=I().room,t=Object(a.useState)(),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(e){var t=function(){i(Array.from(e.participants.values()).concat(e.localParticipant).find((function(e){return Array.from(e.tracks.values()).find((function(e){return e.trackName.includes("screen")}))})))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),function(){e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}}),[e]),r}var rt=Object(d.a)((function(e){return Object(m.a)({button:{"&[disabled]":{color:"#bbb","& svg *":{fill:"#bbb"}}}})}));function it(e){var t=rt(),n=at(),a=I().toggleScreenShare,i=Boolean(n),o=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,c=e.disabled||i||!o,l="";return i&&(l="Cannot share screen when another user is sharing"),o||(l="Screen sharing is not supported with this browser"),r.a.createElement(nt.a,{title:l,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:c?"not-allowed":"pointer"}},r.a.createElement("span",null,r.a.createElement(f.a,{className:t.button,onClick:a,disabled:c,startIcon:r.a.createElement(tt,null),"data-cy-share-screen":!0},"Share Screen")))}var ot=Object(d.a)((function(e){return Object(m.a)({container:Object(s.a)({backgroundColor:e.palette.background.default,bottom:0,left:0,right:0,height:"".concat(e.footerHeight,"px"),position:"fixed",display:"flex",padding:"0 1.43em",zIndex:10},e.breakpoints.down("sm"),{height:"".concat(e.mobileFooterHeight,"px"),padding:0}),screenShareBanner:{position:"fixed",zIndex:10,bottom:"".concat(e.footerHeight,"px"),left:0,right:0,height:"104px",background:"rgba(0, 0, 0, 0.5)","& h6":{color:"white"},"& button":{background:"white",color:e.brand,border:"2px solid ".concat(e.brand),margin:"0 2em","&:hover":{color:"#600101",border:"2px solid #600101",background:"#FFE9E7"}}},hideMobile:Object(s.a)({display:"initial"},e.breakpoints.down("sm"),{display:"none"})})}));function ct(){var e=ot(),t=I(),n=t.isSharingScreen,a=t.toggleScreenShare,i="reconnecting"===He(),o=I().room;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(he.a,{container:!0,justify:"center",alignItems:"center",className:e.screenShareBanner},r.a.createElement(ve.a,{variant:"h6"},"You are sharing your screen"),r.a.createElement(f.a,{onClick:function(){return a()}},"Stop Sharing")),r.a.createElement("footer",{className:e.container},r.a.createElement(he.a,{container:!0,justify:"space-around",alignItems:"center"},r.a.createElement(We.a,{smDown:!0},r.a.createElement(he.a,{style:{flex:1}},r.a.createElement(ve.a,{variant:"body1"},o.name))),r.a.createElement(he.a,{item:!0},r.a.createElement(he.a,{container:!0,justify:"center"},r.a.createElement(Ve,{disabled:i}),r.a.createElement(et,{disabled:i}),!n&&!w&&r.a.createElement(it,{disabled:i}),"true"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_DISABLE_TWILIO_CONVERSATIONS&&r.a.createElement(Qe,null))),r.a.createElement(We.a,{smDown:!0},r.a.createElement(he.a,{style:{flex:1}},r.a.createElement(he.a,{container:!0,justify:"flex-end"},r.a.createElement(Me,null),r.a.createElement(D,null)))))))}var lt=Object(d.a)((function(e){return{container:Object(s.a)({background:"white",paddingLeft:"1em",display:"none",height:"".concat(e.mobileTopBarHeight,"px")},e.breakpoints.down("sm"),{display:"flex"}),endCallButton:{height:"28px",fontSize:"0.85rem",padding:"0 0.6em"},settingsButton:Object(s.a)({},e.breakpoints.down("sm"),{height:"28px",minWidth:"28px",border:"1px solid rgb(136, 140, 142)",padding:0,margin:"0 1em"})}}));function st(){var e=lt(),t=I().room;return r.a.createElement(he.a,{container:!0,alignItems:"center",justify:"space-between",className:e.container},r.a.createElement(ve.a,{variant:"subtitle1"},t.name),r.a.createElement("div",null,r.a.createElement(D,{className:e.endCallButton}),r.a.createElement(Me,{buttonClassName:e.settingsButton})))}var ut=n(721);function dt(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"73",viewBox:"0 0 73 73"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("circle",{cx:"36.5",cy:"36.5",r:"36.5",fill:"#FFF"}),r.a.createElement("path",{fill:"#282A2B",strokeLinejoin:"round",d:"M30.973 23.925c-3.162 3.794-3.162 9.886 0 13.68l.262.301c.266.293.548.564.842.812l.192.154v2.95l-6.71 2.397-.213.082c-2.03.834-3.346 2.793-3.346 4.97v2.766c0 .532.431.963.963.963h27.874c.531 0 .962-.431.962-.963V49.27l-.005-.228-.015-.233c-.187-2.092-1.562-3.883-3.539-4.59l-6.71-2.397v-2.95l.192-.154c.393-.33.762-.702 1.104-1.112 3.162-3.795 3.162-9.887 0-13.681-3.25-3.9-8.603-3.9-11.853 0zm10.374 1.232c2.567 3.08 2.567 8.135 0 11.216-.404.484-.85.894-1.328 1.226-.26.18-.414.476-.414.791v4.111c0 .407.255.77.639.907l7.348 2.625c1.314.47 2.213 1.687 2.278 3.077l.004.183v1.781h-25.95l.002-1.804c0-1.394.843-2.65 2.131-3.18l.172-.065 7.327-2.617c.383-.137.639-.5.639-.907v-4.11c0-.316-.155-.612-.415-.792-.478-.332-.924-.742-1.328-1.226-2.567-3.08-2.567-8.135 0-11.216 2.427-2.912 6.248-2.974 8.735-.186l.16.186z"})))}function mt(){var e=I().localTracks.find((function(e){return"audio"===e.kind}));return r.a.createElement(pe,{audioTrack:e})}var ft=Object(d.a)((function(e){return{container:{position:"relative",height:0,overflow:"hidden",paddingTop:"".concat(56.25,"%"),background:"black"},innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},identityContainer:{position:"absolute",bottom:0,zIndex:1},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},avatarContainer:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}})}}));function pt(e){var t=e.identity,n=ft(),a=I().localTracks.find((function(e){return e.name.includes("camera")}));return r.a.createElement("div",{className:n.container},r.a.createElement("div",{className:n.innerContainer},a?r.a.createElement(Se,{track:a,isLocal:!0}):r.a.createElement("div",{className:n.avatarContainer},r.a.createElement(dt,null))),r.a.createElement("div",{className:n.identityContainer},r.a.createElement("span",{className:n.identity},r.a.createElement(mt,null),r.a.createElement(ve.a,{variant:"body1",color:"inherit",component:"span"},t))))}var vt=n(737),ht=n(738),bt=[{label:"Low (160 x 90)",value:"low",resolution:{width:160,height:90}},{label:"CIF (352 x 288)",value:"cif",resolution:{width:352,height:288}},{label:"VGA (640 x 480)",value:"vga",resolution:{width:640,height:480}},{label:"WVGA (800 x 480)",value:"wvga",resolution:{width:800,height:480}},{label:"HD 540P (960 x 540)",value:"540p",resolution:{width:960,height:540}},{label:"HD 720P (1280 x 720)",value:"720p",resolution:{width:1280,height:720}},{label:"HD 960P (1280 x 960)",value:"960p",resolution:{width:1280,height:960}},{label:"HD Standard 1080P (1440 x 1080)",value:"standard1080p",resolution:{width:1440,height:1080}},{label:"HD Widescreen 1080P (1920 x 1080)",value:"wide1080p",resolution:{width:1920,height:1080}},{label:"Server Default",value:"default",resolution:void 0}];function gt(e){var t;if("undefined"!==typeof e)return null===(t=bt.find((function(t){return t.value===e})))||void 0===t?void 0:t.resolution}var Et=Object(d.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(s.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(s.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(s.a)({},e.breakpoints.down("xs"),{margin:"16px"}),formControl:{display:"block",margin:"1.5em 0","&:first-child":{margin:"0 0 1.5em 0"}},label:{width:"133%"}}})),Ct=function(e){return"undefined"===typeof e?"default":e},wt=bt.map((function(e){var t=e.label,n=e.value;return r.a.createElement(Ee.a,{value:n,key:n},t)}));function Ot(e){var t=e.open,n=e.onClose,i=Et(),o=re(),c=o.settings,l=o.dispatchSetting,s="disconnected"!==He(),u=Object(a.useCallback)((function(e){l({name:e.target.name,value:e.target.value})}),[l]),d=Object(a.useCallback)((function(e){/[^\d]/.test(e.target.value)||u(e)}),[u]);return r.a.createElement(M.a,{open:t,onClose:n,classes:{paper:i.paper}},r.a.createElement(F.a,null,"Connection Settings"),r.a.createElement(V.a,null),r.a.createElement(W.a,{className:i.container},r.a.createElement(he.a,{container:!0,spacing:2},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(ve.a,{hidden:!s,variant:"body2"},"These settings cannot be changed when connected to a room.")),r.a.createElement(he.a,{item:!0,sm:6,xs:12},r.a.createElement(be.a,{className:i.formControl},r.a.createElement(vt.a,{id:q.dominantSpeakerPriority},"Dominant Speaker Priority:"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.dominantSpeakerPriority,label:q.dominantSpeakerPriority,value:Ct(c.dominantSpeakerPriority),onChange:u},r.a.createElement(Ee.a,{value:"low"},"Low"),r.a.createElement(Ee.a,{value:"standard"},"Standard"),r.a.createElement(Ee.a,{value:"high"},"High"),r.a.createElement(Ee.a,{value:"default"},"Server Default"))),r.a.createElement(be.a,{className:i.formControl},r.a.createElement(vt.a,{id:q.trackSwitchOffMode},"Track Switch Off Mode:"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.trackSwitchOffMode,label:q.trackSwitchOffMode,value:Ct(c.trackSwitchOffMode),onChange:u},r.a.createElement(Ee.a,{value:"predicted"},"Predicted"),r.a.createElement(Ee.a,{value:"detected"},"Detected"),r.a.createElement(Ee.a,{value:"disabled"},"Disabled"),r.a.createElement(Ee.a,{value:"default"},"Server Default"))),r.a.createElement(be.a,{className:i.formControl},r.a.createElement(vt.a,{id:q.bandwidthProfileMode},"Mode:"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.bandwidthProfileMode,label:q.bandwidthProfileMode,value:Ct(c.bandwidthProfileMode),onChange:u},r.a.createElement(Ee.a,{value:"grid"},"Grid"),r.a.createElement(Ee.a,{value:"collaboration"},"Collaboration"),r.a.createElement(Ee.a,{value:"presentation"},"Presentation"),r.a.createElement(Ee.a,{value:"default"},"Server Default"))),r.a.createElement(be.a,{className:i.formControl},r.a.createElement(ht.a,{disabled:s,fullWidth:!0,id:q.maxTracks,label:"Max Tracks",placeholder:"Leave blank for no limit",name:q.maxTracks,value:Ct(c.maxTracks),onChange:d})),r.a.createElement(be.a,{className:i.formControl},r.a.createElement(ht.a,{disabled:s,fullWidth:!0,id:q.maxAudioBitrate,label:"Max Audio Bitrate",placeholder:"Leave blank for no limit",name:q.maxAudioBitrate,value:Ct(c.maxAudioBitrate),onChange:d}))),r.a.createElement(he.a,{item:!0,sm:6,xs:12},r.a.createElement(be.a,{fullWidth:!0,className:i.formControl},r.a.createElement(vt.a,{id:q.renderDimensionLow,className:i.label},"Render Dimension (Low Priority):"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.renderDimensionLow,label:q.renderDimensionLow,value:Ct(c.renderDimensionLow),onChange:u},wt)),r.a.createElement(be.a,{fullWidth:!0,className:i.formControl},r.a.createElement(vt.a,{id:q.renderDimensionStandard,className:i.label},"Render Dimension (Standard Priority):"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.renderDimensionStandard,label:q.renderDimensionStandard,value:Ct(c.renderDimensionStandard),onChange:u},wt)),r.a.createElement(be.a,{fullWidth:!0,className:i.formControl},r.a.createElement(vt.a,{id:q.renderDimensionHigh,className:i.label},"Render Dimension (High Priority):"),r.a.createElement(ge.a,{fullWidth:!0,disabled:s,name:q.renderDimensionHigh,label:q.renderDimensionHigh,value:Ct(c.renderDimensionHigh),onChange:u},wt))))),r.a.createElement(V.a,null),r.a.createElement(H.a,null,r.a.createElement(f.a,{className:i.button,color:"primary",variant:"contained",onClick:n},"Done")))}var St=Object(d.a)({settingsButton:{margin:"1.8em 0 0"}});function jt(e){var t=e.mobileButtonClass,n=St(),i=re().roomType,o=Object(Be.a)((function(e){return e.breakpoints.down("sm")})),c=Object(a.useState)(!1),l=Object(v.a)(c,2),s=l[0],u=l[1],d=Object(a.useState)(!1),m=Object(v.a)(d,2),p=m[0],h=m[1],b=Object(a.useState)(!1),g=Object(v.a)(b,2),E=g[0],C=g[1],w=Object(a.useState)(!1),O=Object(v.a)(w,2),S=O[0],j=O[1],k=Object(a.useRef)(null);return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(f.a,{ref:k,onClick:function(){return u(!0)},startIcon:r.a.createElement(_e.a,null),className:t},"More"):r.a.createElement(f.a,{ref:k,onClick:function(){return u(!0)},startIcon:r.a.createElement(Ie,null),className:n.settingsButton},"Settings"),r.a.createElement(Re.a,{open:s,onClose:function(){return u((function(e){return!e}))},anchorEl:k.current,getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:o?"left":"right"},transformOrigin:{vertical:o?-55:-45,horizontal:"center"}},r.a.createElement(Ee.a,{onClick:function(){return h(!0)}},r.a.createElement(ve.a,{variant:"body1"},"About")),r.a.createElement(Ee.a,{onClick:function(){return C(!0)}},r.a.createElement(ve.a,{variant:"body1"},"Audio and Video Settings")),"peer-to-peer"!==i&&"go"!==i&&r.a.createElement(Ee.a,{onClick:function(){return j(!0)}},r.a.createElement(ve.a,{variant:"body1"},"Connection Settings"))),r.a.createElement(ie,{open:p,onClose:function(){h(!1),u(!1)}}),r.a.createElement(ye,{open:E,onClose:function(){C(!1),u(!1)}}),r.a.createElement(Ot,{open:S,onClose:function(){j(!1),u(!1)}}))}var kt=Object(d.a)((function(e){return{gutterBottom:{marginBottom:"1em"},marginTop:{marginTop:"1em"},deviceButton:{width:"100%",border:"2px solid #aaa",margin:"1em 0"},localPreviewContainer:Object(s.a)({paddingRight:"2em"},e.breakpoints.down("sm"),{padding:"0 2.5em"}),joinButtons:Object(s.a)({display:"flex",justifyContent:"space-between"},e.breakpoints.down("sm"),{flexDirection:"column-reverse",width:"100%","& button":{margin:"0.5em 0"}}),mobileButtonBar:Object(s.a)({},e.breakpoints.down("sm"),{display:"flex",justifyContent:"space-between",margin:"1.5em 0 1em"}),mobileButton:{padding:"0.8em 0",margin:0}}}));function xt(e){var t=e.name,n=e.roomName,a=e.setStep,i=kt(),o=re(),c=o.getToken,l=o.isFetching,s=qe().connect,u=I(),d=u.connect,m=u.isAcquiringLocalTracks,p=u.isConnecting,v=l||m||p;return l||p?r.a.createElement(he.a,{container:!0,justify:"center",alignItems:"center",direction:"column",style:{height:"100%"}},r.a.createElement("div",null,r.a.createElement(ut.a,{variant:"indeterminate"})),r.a.createElement("div",null,r.a.createElement(ve.a,{variant:"body2",style:{fontWeight:"bold",fontSize:"16px"}},"Joining Meeting"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"h5",className:i.gutterBottom},"Join ",n),r.a.createElement(he.a,{container:!0,justify:"center"},r.a.createElement(he.a,{item:!0,md:7,sm:12,xs:12},r.a.createElement("div",{className:i.localPreviewContainer},r.a.createElement(pt,{identity:t})),r.a.createElement("div",{className:i.mobileButtonBar},r.a.createElement(We.a,{mdUp:!0},r.a.createElement(Ve,{className:i.mobileButton,disabled:v}),r.a.createElement(et,{className:i.mobileButton,disabled:v})),r.a.createElement(jt,{mobileButtonClass:i.mobileButton}))),r.a.createElement(he.a,{item:!0,md:5,sm:12,xs:12},r.a.createElement(he.a,{container:!0,direction:"column",justify:"space-between",style:{height:"100%"}},r.a.createElement("div",null,r.a.createElement(We.a,{smDown:!0},r.a.createElement(Ve,{className:i.deviceButton,disabled:v}),r.a.createElement(et,{className:i.deviceButton,disabled:v}))),r.a.createElement("div",{className:i.joinButtons},r.a.createElement(f.a,{variant:"outlined",color:"primary",onClick:function(){return a(Ut.roomNameStep)}},"Cancel"),r.a.createElement(f.a,{variant:"contained",color:"primary","data-cy-join-now":!0,onClick:function(){c(t,n).then((function(e){d(e),"true"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_DISABLE_TWILIO_CONVERSATIONS&&s(e)}))},disabled:v},"Join Now"))))))}function yt(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",viewBox:"0 0 96 96"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#FFF",d:"M43.86 0h8.28c11.661 0 18.564 1.74 24.675 5.01 6.112 3.267 10.908 8.063 14.175 14.175C94.26 25.295 96 32.197 96 43.86v8.28c0 11.661-1.74 18.564-5.01 24.675-3.267 6.112-8.063 10.908-14.175 14.175C70.704 94.26 63.801 96 52.14 96h-8.28c-11.661 0-18.564-1.74-24.675-5.01-6.112-3.267-10.908-8.063-14.175-14.175C1.74 70.705 0 63.803 0 52.14v-8.28c0-11.661 1.74-18.564 5.01-24.675C8.277 13.073 13.073 8.277 19.185 5.01 25.295 1.74 32.197 0 43.86 0z"}),r.a.createElement("path",{fill:"#F22F46",d:"M53.25 63h-25.5C25.679 63 24 61.321 24 59.25v-22.5c0-2.071 1.679-3.75 3.75-3.75h25.5c2.071 0 3.75 1.679 3.75 3.75v5.82l9.57-4.785c1.164-.583 2.546-.521 3.653.164 1.107.685 1.78 1.894 1.777 3.196V54.87c.008 1.3-.66 2.512-1.766 3.198-1.105.686-2.487.747-3.65.162L57 53.49v5.76C57 61.321 55.32 63 53.25 63zm-25.5-27c-.414 0-.75.336-.75.75v22.5c0 .414.336.75.75.75h25.5c.414 0 .75-.336.75-.75v-8.175c-.001-.518.266-1 .705-1.275.44-.275.99-.303 1.455-.075L67.92 55.5c.224.123.496.123.72 0 .22-.141.356-.383.36-.645v-13.71c-.004-.262-.14-.504-.36-.645-.224-.123-.496-.123-.72 0l-11.745 5.865c-.47.236-1.028.21-1.473-.069-.445-.28-.711-.77-.702-1.296v-8.25c0-.414-.336-.75-.75-.75h-25.5z"})))}function Tt(e){return r.a.createElement("svg",Object.assign({fill:"#F22F46",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30"},e),r.a.createElement("path",{d:"M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11zm6.8-14.7c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1 1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm0 7.4c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm-7.4 0c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm0-7.4c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1z"}))}var Lt=n(722),Nt=(n(739),n(672));n(337),Object(Nt.a)({red:{color:"white",backgroundColor:"#F22F46"}});var Pt=Object(d.a)({userContainer:{position:"absolute",top:0,right:0,margin:"1em",display:"flex",alignItems:"center"},userButton:{color:"white"},logoutLink:{color:"white",cursor:"pointer",padding:"10px 20px"}}),Rt=function(){var e=Pt(),t=re(),n=(t.user,t.signOut),i=I().localTracks,o=Object(a.useState)(!1),c=Object(v.a)(o,2),l=(c[0],c[1],Object(a.useRef)(null),Object(a.useCallback)((function(){i.forEach((function(e){return e.stop()})),null===n||void 0===n||n()}),[i,n]));return r.a.createElement("div",{className:e.userContainer},r.a.createElement(Lt.a,{onClick:l,className:e.logoutLink},"Logout"))},At=Object(d.a)((function(e){return{background:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgb(40, 42, 43)",height:"100%"},container:{position:"relative",flex:"1"},innerContainer:Object(s.a)({display:"flex",width:"888px",height:"379px",borderRadius:"8px",boxShadow:"0px 2px 4px 0px rgba(40, 42, 43, 0.3)",overflow:"hidden",position:"relative",margin:"auto"},e.breakpoints.down("sm"),{display:"block",height:"auto",width:"calc(100% - 40px)",margin:"auto",maxWidth:"400px"}),swooshContainer:Object(s.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='296' height='378' viewBox='0 0 296 378'%3E%3Cdefs%3E%3ClinearGradient id='utbttnlrpc' x1='78.976%25' x2='63.882%25' y1='60.873%25' y2='45.554%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3ClinearGradient id='aim8r3oczd' x1='78.976%25' x2='63.882%25' y1='56.106%25' y2='47.503%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3Cpath id='5tk4i6f80a' d='M0 0H296V378H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cmask id='m1ihwluuxb' fill='%23fff'%3E%3Cuse xlink:href='%235tk4i6f80a'/%3E%3C/mask%3E%3Cuse fill='%23DE5858' xlink:href='%235tk4i6f80a'/%3E%3Cg mask='url(%23m1ihwluuxb)'%3E%3Cg%3E%3Cpath fill='url(%23utbttnlrpc)' d='M0 286.83c87.695-83.937 175.802-132.682 264.323-146.233 132.78-20.328 183.24 4.255 225.143-23.414 73.409-48.471 93.039-15.154 148.326-20.892 44.84-4.654 98.48-77.401 135.81-91.717C795.596-3.86 821.469.801 851.22 18.56L891 476.5H0V286.83z' opacity='.06' transform='translate(-457 -22.5)'/%3E%3Cpath fill='url(%23aim8r3oczd)' d='M137 604.5c63.759-109.686 155.8-165.124 276.126-166.315 180.488-1.786 157.888-146.686 387.11-146.33 229.223.356 170.665-151.786 341.36-166.888 113.797-10.068 180.265 10.685 199.404 62.26V604.5H137z' opacity='.08' transform='translate(-457 -22.5)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A\");",backgroundSize:"cover",width:"296px"},e.breakpoints.down("sm"),{width:"100%",height:"100px",backgroundPositionY:"140px"}),logoContainer:Object(s.a)({position:"absolute",width:"210px",textAlign:"center"},e.breakpoints.down("sm"),{display:"flex",alignItems:"center",width:"90%",textAlign:"initial","& svg":{height:"64px"}}),twilioLogo:{position:"absolute",top:0,left:0,margin:"20px"},content:Object(s.a)({background:"white",width:"100%",padding:"4em",flex:1},e.breakpoints.down("sm"),{padding:"2em"}),title:Object(s.a)({color:"white",margin:"1em 0 0"},e.breakpoints.down("sm"),{margin:0,fontSize:"1.1rem"})}})),_t=function(e){var t=At(),n=re().user,a=Object(Q.h)();return r.a.createElement("div",{className:t.background},r.a.createElement(Tt,{className:t.twilioLogo}),n&&"/login"!==a.pathname&&r.a.createElement(Rt,null),r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:t.innerContainer},r.a.createElement("div",{className:t.swooshContainer},r.a.createElement("div",{className:t.logoContainer},r.a.createElement(yt,null),r.a.createElement(ve.a,{variant:"h6",className:t.title},"Twilio Programmable Video"))),r.a.createElement("div",{className:t.content},e.children))))},It=n(338),Bt=n.n(It);function Dt(){return r.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-299.000000, -723.000000)",fill:"#D61F1F"},r.a.createElement("g",{transform:"translate(276.000000, 704.000000)"},r.a.createElement("g",{transform:"translate(23.000000, 19.000000)"},r.a.createElement("path",{d:"M8.03935839,0.763849674 L13.2361503,5.96064161 C13.8101721,6.5346634 13.8101721,7.4653366 13.2361503,8.03935839 L8.03935839,13.2361503 C7.4653366,13.8101721 6.5346634,13.8101721 5.96064161,13.2361503 L0.763849674,8.03935839 C0.189827887,7.4653366 0.189827887,6.5346634 0.763849674,5.96064161 L5.96064161,0.763849674 C6.5346634,0.189827887 7.4653366,0.189827887 8.03935839,0.763849674 Z M7,8.66666667 C6.53976271,8.66666667 6.16666667,9.03976271 6.16666667,9.5 C6.16666667,9.96023729 6.53976271,10.3333333 7,10.3333333 C7.46023729,10.3333333 7.83333333,9.96023729 7.83333333,9.5 C7.83333333,9.03976271 7.46023729,8.66666667 7,8.66666667 Z M7.00842529,4.5 L6.99145559,4.5 C6.48802096,4.5 6.09771771,4.99363437 6.17690967,5.53663218 L6.53327351,7.40140326 C6.56721292,7.64822044 6.76519283,7.83333333 6.99711216,7.83333333 L7.00276873,7.83333333 C7.23468805,7.83333333 7.43266796,7.64822044 7.46660737,7.40140326 L7.82297121,5.53663218 C7.90216317,4.99363437 7.51751649,4.50617043 7.00842529,4.5 Z",id:"Error"}))))))}var Mt=n(723),Ht=n(731);function Wt(){return r.a.createElement("svg",{width:"16px",height:"14px",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-273.000000, -162.000000)",fill:"#E46216"},r.a.createElement("g",{transform:"translate(251.000000, 143.000000)"},r.a.createElement("g",{transform:"translate(22.000000, 19.000000)"},r.a.createElement("path",{d:"M6.68405227,0.743750848 C7.26590697,-0.247916949 8.73410873,-0.247916949 9.31596344,0.743750848 L9.31596344,0.743750848 L15.7980583,11.7915293 C16.3754418,12.775573 15.6458879,14 14.4821027,14 L14.4821027,14 L1.5178827,14 C0.354135396,14 -0.375441293,12.775573 0.201934693,11.7915293 L0.201934693,11.7915293 Z M8,10 C7.44771525,10 7,10.4477153 7,11 C7,11.5522847 7.44771525,12 8,12 C8.55228475,12 9,11.5522847 9,11 C9,10.4477153 8.55228475,10 8,10 Z M8.01011035,5 L7.98974671,5 L7.87816923,5.00681158 C7.32928042,5.07427655 6.92320065,5.63308608 7.01229161,6.24395862 L7.01229161,6.24395862 L7.43992821,8.48168391 L7.46058982,8.57746523 C7.53403676,8.82448556 7.74990819,9 8.00332247,9 L8.00332247,9 L8.09436762,8.9919759 C8.33199007,8.94972242 8.5237268,8.74495557 8.55992884,8.48168391 L8.55992884,8.48168391 L8.98756545,6.24395862 L8.99896034,6.12268979 C9.02431547,5.52149772 8.58283795,5.00694173 8.01011035,5 L8.01011035,5 Z"}))))))}var zt=Object(d.a)((function(e){return{container:Object(s.a)({display:"flex",alignItems:"baseline",justifyContent:"space-between",width:"400px",minHeight:"50px",background:"white",padding:"1em",borderRadius:"3px",boxShadow:"0 12px 24px 4px rgba(40,42,43,0.2)"},e.breakpoints.down("sm"),{width:"100%"}),contentContainer:{display:"flex"},iconContainer:{display:"flex",padding:"0 1.3em 0 0.3em",transform:"translateY(4px)"},headline:{fontWeight:"bold"},error:{borderLeft:"4px solid #D61F1F"},warning:{borderLeft:"4px solid #E46216"}}}));function Ft(e){var t,n=e.headline,a=e.message,i=e.variant,o=e.open,c=e.handleClose,l=zt();return r.a.createElement(Ht.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:function(e,t){"clickaway"!==t&&(null===c||void 0===c||c())}},r.a.createElement("div",{className:Object(p.a)(l.container,(t={},Object(s.a)(t,l.error,"error"===i),Object(s.a)(t,l.warning,"warning"===i),t))},r.a.createElement("div",{className:l.contentContainer},r.a.createElement("div",{className:l.iconContainer},"warning"===i&&r.a.createElement(Wt,null),"error"===i&&r.a.createElement(Dt,null)),r.a.createElement("div",null,r.a.createElement(ve.a,{variant:"body1",className:l.headline,component:"span"},n),r.a.createElement(ve.a,{variant:"body1",component:"span"}," ",a))),r.a.createElement("div",null,c&&r.a.createElement(Mt.a,{size:"small","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(Bt.a,{fontSize:"small"})))))}function Vt(e){var t=e.error,n=R(),i=n.hasAudioInputDevices,o=n.hasVideoInputDevices,c=I().isAcquiringLocalTracks,l=Object(a.useState)(!1),s=Object(v.a)(l,2),u=s[0],d=s[1],m=!u&&!c&&(Boolean(t)||!i||!o),f=function(e,t,n){var a="",r="";switch(!0){case"NotAllowedError"===(null===n||void 0===n?void 0:n.name):a="Unable to Access Media:",r="Permission denied by system"===n.message?"The operating system has blocked the browser from accessing the microphone or camera. Please check your operating system settings.":"The user has denied permission to use audio and video. Please grant permission to the browser to access the microphone and camera.";break;case"NotFoundError"===(null===n||void 0===n?void 0:n.name):a="Cannot Find Microphone or Camera:",r="The browser cannot access the microphone or camera. Please make sure all input devices are connected and enabled.";break;case Boolean(n):a="Error Acquiring Media:",r="".concat(n.name," ").concat(n.message);break;case!e&&!t:a="No Camera or Microphone Detected:",r="Other participants in the room will be unable to see and hear you.";break;case!t:a="No Camera Detected:",r="Other participants in the room will be unable to see you.";break;case!e:a="No Microphone Detected:",r="Other participants in the room will be unable to hear you."}return{headline:a,message:r}}(i,o,t),p=f.headline,h=f.message;return r.a.createElement(Ft,{open:m,handleClose:function(){return d(!0)},headline:p,message:h,variant:"warning"})}var Ut,Kt=Object(d.a)((function(e){return{gutterBottom:{marginBottom:"1em"},inputContainer:Object(s.a)({display:"flex",justifyContent:"space-between",margin:"1.5em 0 3.5em","& div:not(:last-child)":{marginRight:"1em"}},e.breakpoints.down("sm"),{margin:"1.5em 0 2em"}),textFieldContainer:{width:"100%"},continueButton:Object(s.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function Zt(e){var t=e.name,n=e.roomName,a=e.setName,i=e.setRoomName,o=e.handleSubmit,c=Kt(),l=re().user,s=!window.location.search.includes("customIdentity=true")&&(null===l||void 0===l?void 0:l.displayName);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"h5",className:c.gutterBottom},"Join a Room"),r.a.createElement(ve.a,{variant:"body1"},s?"Enter the name of a room you'd like to join.":"Enter your name and the name of a room you'd like to join"),r.a.createElement("form",{onSubmit:o},r.a.createElement("div",{className:c.inputContainer},!s&&r.a.createElement("div",{className:c.textFieldContainer},r.a.createElement(vt.a,{shrink:!0,htmlFor:"input-user-name"},"Your Name"),r.a.createElement(ht.a,{id:"input-user-name",variant:"outlined",fullWidth:!0,size:"small",value:t,onChange:function(e){a(e.target.value)}})),r.a.createElement("div",{className:c.textFieldContainer},r.a.createElement(vt.a,{shrink:!0,htmlFor:"input-room-name"},"Room Name"),r.a.createElement(ht.a,{autoCapitalize:"false",id:"input-room-name",variant:"outlined",fullWidth:!0,size:"small",value:n,onChange:function(e){i(e.target.value)}}))),r.a.createElement(he.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{variant:"contained",type:"submit",color:"primary",disabled:!t||!n,className:c.continueButton},"Continue"))))}function Gt(){var e=re().user,t=I().getAudioAndVideoTracks,n=Object(Q.i)().URLRoomName,i=Object(a.useState)(Ut.roomNameStep),o=Object(v.a)(i,2),c=o[0],l=o[1],s=Object(a.useState)((null===e||void 0===e?void 0:e.displayName)||""),u=Object(v.a)(s,2),d=u[0],m=u[1],f=Object(a.useState)(""),p=Object(v.a)(f,2),h=p[0],b=p[1],g=Object(a.useState)(),E=Object(v.a)(g,2),C=E[0],w=E[1];Object(a.useEffect)((function(){n&&(b(n),(null===e||void 0===e?void 0:e.displayName)&&l(Ut.deviceSelectionStep))}),[e,n]),Object(a.useEffect)((function(){c!==Ut.deviceSelectionStep||C||t().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),w(e)}))}),[t,c,C]);return r.a.createElement(_t,null,r.a.createElement(Vt,{error:C}),c===Ut.roomNameStep&&r.a.createElement(Zt,{name:d,roomName:h,setName:m,setRoomName:b,handleSubmit:function(e){e.preventDefault(),window.location.origin.includes("twil.io")||window.history.replaceState(null,"",window.encodeURI("/room/".concat(h).concat(window.location.search||""))),l(Ut.deviceSelectionStep)}}),c===Ut.deviceSelectionStep&&r.a.createElement(xt,{name:d,roomName:h,setStep:l}))}function Yt(){var e=He();return r.a.createElement(Ft,{variant:"error",headline:"Connection Lost:",message:"Reconnecting to room...",open:"reconnecting"===e})}function qt(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.64645 2.64645C2.84171 2.45118 3.15829 2.45118 3.35355 2.64645L21.3536 20.6464C21.5488 20.8417 21.5488 21.1583 21.3536 21.3536C21.1583 21.5488 20.8417 21.5488 20.6464 21.3536L2.64645 3.35355C2.45118 3.15829 2.45118 2.84171 2.64645 2.64645Z",fill:"#707578"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3536 2.64645C21.5488 2.84171 21.5488 3.15829 21.3536 3.35355L3.35355 21.3536C3.15829 21.5488 2.84171 21.5488 2.64645 21.3536C2.45118 21.1583 2.45118 20.8417 2.64645 20.6464L20.6464 2.64645C20.8417 2.45118 21.1583 2.45118 21.3536 2.64645Z",fill:"#707578"}))}!function(e){e[e.roomNameStep=0]="roomNameStep",e[e.deviceSelectionStep=1]="deviceSelectionStep"}(Ut||(Ut={}));var Jt=Object(d.a)((function(){return Object(m.a)({container:{height:"56px",background:"#F4F4F6",borderBottom:"1px solid #E4E7E9",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1em"},text:{fontWeight:"bold"},closeChatWindow:{cursor:"pointer",display:"flex",background:"transparent",border:"0",padding:"0.4em"}})}));function Qt(){var e=Jt(),t=qe().setIsChatWindowOpen;return r.a.createElement("div",{className:e.container},r.a.createElement("div",{className:e.text},"Chat"),r.a.createElement("button",{className:e.closeChatWindow,onClick:function(){return t(!1)}},r.a.createElement(qt,null)))}function Xt(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"-1 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7992 3.24259C16.6912 1.13458 13.5645 1.40622 11.3746 3.59615L2.53575 12.435C1.72631 13.2444 1.26254 14.2015 1.18557 15.1283C1.10946 16.0447 1.4074 16.9635 2.1822 17.7383C2.957 18.5131 3.87575 18.811 4.7922 18.7349C5.71899 18.6579 6.67606 18.1942 7.4855 17.3847L14.203 10.6672C14.7335 10.1367 15.0455 9.55355 15.116 9.01193C15.184 8.48967 15.035 7.9637 14.5566 7.48523C14.0781 7.00677 13.5521 6.85777 13.0299 6.92578C12.4883 6.99631 11.9051 7.30826 11.3746 7.83879L6.07128 13.1421C5.87602 13.3374 5.55944 13.3374 5.36418 13.1421C5.16891 12.9468 5.16892 12.6302 5.36418 12.435L10.6675 7.13168C11.3079 6.49124 12.0835 6.04058 12.9007 5.93415C13.7374 5.82521 14.5705 6.08492 15.2637 6.77813C15.9569 7.47134 16.2166 8.30442 16.1076 9.14105C16.0012 9.95832 15.5506 10.7339 14.9101 11.3743L8.1926 18.0918C7.24417 19.0403 6.07462 19.6318 4.87496 19.7315C3.66496 19.832 2.45745 19.4278 1.47509 18.4454C0.492729 17.463 0.0885105 16.2555 0.189 15.0455C0.288631 13.8459 0.880211 12.6763 1.82864 11.7279L10.6675 2.88904C13.1643 0.392265 16.929 -0.0417833 19.5063 2.53549C22.0836 5.11276 21.6495 8.87755 19.1528 11.3743L12.7888 17.7383C12.5935 17.9335 12.277 17.9335 12.0817 17.7383C11.8864 17.543 11.8864 17.2264 12.0817 17.0312L18.4457 10.6672C20.6356 8.47729 20.9072 5.35061 18.7992 3.24259Z",fill:"#707578"}))}function $t(){return r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3539 1.64645C22.5491 1.84171 22.5491 2.15829 22.3539 2.35355L9.74515 14.9622C9.54989 15.1575 9.23331 15.1575 9.03805 14.9622C8.84279 14.767 8.84279 14.4504 9.03805 14.2551L21.6467 1.64645C21.842 1.45118 22.1586 1.45118 22.3539 1.64645Z",fill:"#D8D8D8"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3536 1.64646C22.4988 1.79171 22.5404 2.011 22.4585 2.19938L13.7629 22.1994C13.6863 22.3756 13.5155 22.4923 13.3235 22.4996C13.1316 22.507 12.9523 22.4037 12.8625 22.234L9.02139 14.9786L1.76606 11.1376C1.59627 11.0477 1.493 10.8685 1.50037 10.6765C1.50774 10.4845 1.62446 10.3137 1.80064 10.2371L21.8006 1.54148C21.989 1.45958 22.2083 1.50122 22.3536 1.64646ZM3.15222 10.7399L9.62525 14.1668C9.71385 14.2137 9.7863 14.2862 9.8332 14.3748L13.2601 20.8478L21.0354 2.96463L3.15222 10.7399Z",fill:"#D8D8D8"}))}var en=n(671),tn=Object(d.a)({chatInputContainer:{borderTop:"1px solid #e4e7e9",borderBottom:"1px solid #e4e7e9",padding:"1em 1.2em 1em"},textArea:{padding:"0.75em 1em",marginTop:"0.4em",width:"100%",border:"0",resize:"none",fontSize:"14px",fontFamily:"Inter"},button:{padding:"0.56em",minWidth:"auto","&:disabled":{background:"none","& path":{fill:"#d8d8d8"}}},buttonContainer:{margin:"1em 0 0 1em",display:"flex"},fileButtonContainer:{position:"relative",marginRight:"1em"},fileButtonLoadingSpinner:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}});function nn(e){var t=e.conversation,n=e.isChatWindowOpen,i=tn(),o=Object(a.useState)(""),c=Object(v.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(!1),d=Object(v.a)(u,2),m=d[0],p=d[1],h=Object(a.useState)(null),b=Object(v.a)(h,2),g=b[0],E=b[1],C=/\S/.test(l),O=Object(a.useRef)(null),S=Object(a.useRef)(null);Object(a.useEffect)((function(){var e;n&&(null===(e=O.current)||void 0===e||e.focus())}),[n]);var j=function(e){C&&(t.sendMessage(e.trim()),s(""))};return r.a.createElement("div",{className:i.chatInputContainer},r.a.createElement(Ft,{open:Boolean(g),headline:"Error",message:g||"",variant:"error",handleClose:function(){return E(null)}}),r.a.createElement(en.a,{rowsMin:1,rowsMax:3,className:i.textArea,"aria-label":"chat input",placeholder:"Write a message...",onKeyPress:function(e){w||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j(l))},onChange:function(e){s(e.target.value)},value:l,"data-cy-chat-input":!0,ref:O}),r.a.createElement(he.a,{container:!0,alignItems:"flex-end",justify:"flex-end",wrap:"nowrap"},r.a.createElement("input",{ref:S,type:"file",style:{display:"none"},onChange:function(e){var n,a=null===(n=e.target.files)||void 0===n?void 0:n[0];if(a){var r=new FormData;r.append("userfile",a),p(!0),E(null),t.sendMessage(r).catch((function(e){413===e.code?E("File size is too large. Maximum file size is 150MB."):E("There was a problem uploading the file. Please try again."),console.log("Problem sending file: ",e)})).finally((function(){p(!1)}))}},value:"",accept:"audio/*, image/*, text/*, video/*, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document .xslx, .ppt, .pdf, .key, .svg, .csv"}),r.a.createElement("div",{className:i.buttonContainer},r.a.createElement("div",{className:i.fileButtonContainer},r.a.createElement(f.a,{className:i.button,onClick:function(){var e;return null===(e=S.current)||void 0===e?void 0:e.click()},disabled:m},r.a.createElement(Xt,null)),m&&r.a.createElement(ut.a,{size:24,className:i.fileButtonLoadingSpinner})),r.a.createElement(f.a,{className:i.button,onClick:function(){return j(l)},color:"primary",variant:"contained",disabled:!C,"data-cy-send-message-button":!0},r.a.createElement($t,null)))))}var an=Object(d.a)((function(){return Object(m.a)({messageInfoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.425em 0 0.083em",fontSize:"12px",color:"#606B85"}})}));function rn(e){var t=e.author,n=e.dateCreated,a=e.isLocalParticipant,i=an();return r.a.createElement("div",{className:i.messageInfoContainer},r.a.createElement("div",null,a?"".concat(t," (You)"):t),r.a.createElement("div",null,n))}var on=n(339),cn=n(340),ln=n(349),sn=n(346),un=n(342),dn=n.n(un),mn=n(341),fn=n.n(mn),pn=n(7),vn=Object(m.a)({outerContainer:{minHeight:0,flex:1,position:"relative"},innerScrollContainer:{height:"100%",overflowY:"auto",padding:"0 1.2em 0"},messageListContainer:{overflowY:"auto",flex:"1",paddingBottom:"1em"},button:{position:"absolute",bottom:"14px",right:"2em",zIndex:100,padding:"0.5em 0.9em",visibility:"hidden",opacity:0,boxShadow:"0px 4px 16px rgba(18, 28, 45, 0.2)",transition:"all 0.5s ease"},showButton:{visibility:"visible",opacity:1,bottom:"24px"}}),hn=function(e){Object(ln.a)(n,e);var t=Object(sn.a)(n);function n(){var e;Object(on.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).chatThreadRef=r.a.createRef(),e.state={isScrolledToBottom:!0,showButton:!1,messageNotificationCount:0},e.handleScroll=fn()((function(){var t=e.chatThreadRef.current;if(t){var n=Math.abs(t.clientHeight+t.scrollTop-t.scrollHeight)<1;e.setState((function(e){return{isScrolledToBottom:n,showButton:!n&&e.showButton}}))}}),300),e.handleClick=function(){var t=e.chatThreadRef.current;t.scrollTo({top:t.scrollHeight,behavior:"smooth"}),e.setState({showButton:!1})},e}return Object(cn.a)(n,[{key:"scrollToBottom",value:function(){var e=this.chatThreadRef.current;e.scrollTop=e.scrollHeight}},{key:"componentDidMount",value:function(){this.scrollToBottom(),this.chatThreadRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.messages.length!==e.messages.length;if(t.isScrolledToBottom&&n)this.scrollToBottom();else if(n){var a=this.props.messages.length-e.messages.length;this.setState((function(e){return{showButton:!e.isScrolledToBottom,messageNotificationCount:e.showButton?e.messageNotificationCount+a:1}}))}}},{key:"componentWillUnmount",value:function(){this.chatThreadRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.outerContainer},r.a.createElement("div",{className:e.innerScrollContainer,ref:this.chatThreadRef,"data-cy-message-list-inner-scroll":!0},r.a.createElement("div",{className:e.messageListContainer},this.props.children,r.a.createElement(f.a,{className:Object(p.a)(e.button,Object(s.a)({},e.showButton,this.state.showButton)),onClick:this.handleClick,startIcon:r.a.createElement(dn.a,null),color:"primary",variant:"contained","data-cy-new-message-button":!0},this.state.messageNotificationCount," new message",this.state.messageNotificationCount>1&&"s"))))}}]),n}(r.a.Component),bn=Object(pn.a)(vn)(hn),gn=n(343),En=n.n(gn),Cn=Object(d.a)({messageContainer:{borderRadius:"16px",display:"inline-flex",alignItems:"center",padding:"0.5em 0.8em 0.6em",margin:"0.3em 0 0",wordBreak:"break-word",backgroundColor:"#E1E3EA",hyphens:"auto",whiteSpace:"pre-wrap"},isLocalParticipant:{backgroundColor:"#CCE4FF"}});function wn(e){var t=e.body,n=e.isLocalParticipant,a=Cn();return r.a.createElement("div",null,r.a.createElement("div",{className:Object(p.a)(a.messageContainer,Object(s.a)({},a.isLocalParticipant,n))},r.a.createElement("div",null,function(e){var t=En()().match(e);if(!t)return e;var n=[],a=0;return t.forEach((function(t,i){n.push(e.slice(a,t.index)),n.push(r.a.createElement(Lt.a,{target:"_blank",rel:"noreferrer",href:t.url,key:i},t.text)),a=t.lastIndex})),n.push(e.slice(a,e.length)),n}(t))))}function On(){return r.a.createElement("svg",{width:"40",height:"41",viewBox:"0 0 40 41",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.4111 30.2441C24.7365 29.9186 25.2641 29.9186 25.5896 30.2441L29.167 33.8215L32.7444 30.2441C33.0698 29.9186 33.5975 29.9186 33.9229 30.2441C34.2484 30.5695 34.2484 31.0972 33.9229 31.4226L29.7562 35.5893C29.4308 35.9147 28.9032 35.9147 28.5777 35.5893L24.4111 31.4226C24.0856 31.0972 24.0856 30.5695 24.4111 30.2441Z",fill:"#14B053"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.1663 20.8334C24.1037 20.8334 19.9997 24.9375 19.9997 30.0001C19.9997 35.0627 24.1037 39.1667 29.1663 39.1667C34.229 39.1667 38.333 35.0627 38.333 30.0001C38.333 24.9375 34.229 20.8334 29.1663 20.8334ZM18.333 30.0001C18.333 24.017 23.1833 19.1667 29.1663 19.1667C35.1494 19.1667 39.9997 24.017 39.9997 30.0001C39.9997 35.9832 35.1494 40.8334 29.1663 40.8334C23.1833 40.8334 18.333 35.9832 18.333 30.0001Z",fill:"#14B053"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.1663 24.1667C29.6266 24.1667 29.9997 24.5398 29.9997 25.0001V35.0001C29.9997 35.4603 29.6266 35.8334 29.1663 35.8334C28.7061 35.8334 28.333 35.4603 28.333 35.0001V25.0001C28.333 24.5398 28.7061 24.1667 29.1663 24.1667Z",fill:"#14B053"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3786 14.168C18.6994 14.1854 18.9816 14.3857 19.1039 14.6828L20.5389 18.1678C20.7141 18.5934 20.5112 19.0804 20.0856 19.2557C19.6601 19.4309 19.173 19.228 18.9978 18.8024L18.2281 16.9332L14.0649 24.5658C13.9392 24.7964 13.7121 24.9541 13.4521 24.9916C13.1922 25.029 12.9298 24.9417 12.7441 24.756L10.2283 22.2402L7.1817 28.3334H14.9317C15.3919 28.3334 15.765 28.7065 15.765 29.1668C15.765 29.627 15.3919 30.0001 14.9317 30.0001H5.83333C5.54452 30.0001 5.2763 29.8505 5.12446 29.6049C4.97262 29.3592 4.95882 29.0524 5.08798 28.7941L9.25464 20.4607C9.37444 20.2212 9.6021 20.0538 9.86652 20.0108C10.1309 19.9679 10.3998 20.0548 10.5893 20.2442L13.1351 22.79L17.6018 14.601C17.7556 14.319 18.0578 14.1505 18.3786 14.168Z",fill:"#707578"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.33333 9.99992C7.41286 9.99992 6.66667 10.7461 6.66667 11.6666C6.66667 12.5871 7.41286 13.3333 8.33333 13.3333C9.25381 13.3333 10 12.5871 10 11.6666C10 10.7461 9.25381 9.99992 8.33333 9.99992ZM5 11.6666C5 9.82564 6.49238 8.33325 8.33333 8.33325C10.1743 8.33325 11.6667 9.82564 11.6667 11.6666C11.6667 13.5075 10.1743 14.9999 8.33333 14.9999C6.49238 14.9999 5 13.5075 5 11.6666Z",fill:"#707578"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0.833333C0 0.373096 0.373096 0 0.833333 0H19.1667C19.3877 0 19.5996 0.0877974 19.7559 0.244078L28.0893 8.57741C28.2455 8.73369 28.3333 8.94565 28.3333 9.16667V15.8333C28.3333 16.2936 27.9602 16.6667 27.5 16.6667C27.0398 16.6667 26.6667 16.2936 26.6667 15.8333V9.51185L18.8215 1.66667H1.66667V35H17.5C17.9602 35 18.3333 35.3731 18.3333 35.8333C18.3333 36.2936 17.9602 36.6667 17.5 36.6667H0.833333C0.373096 36.6667 0 36.2936 0 35.8333V0.833333Z",fill:"#707578"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1663 0C19.6266 0 19.9997 0.373096 19.9997 0.833333V8.33333H27.4997C27.9599 8.33333 28.333 8.70643 28.333 9.16667C28.333 9.6269 27.9599 10 27.4997 10H19.1663C18.7061 10 18.333 9.6269 18.333 9.16667V0.833333C18.333 0.373096 18.7061 0 19.1663 0Z",fill:"#707578"}))}var Sn=Object(d.a)({messageContainer:{display:"flex",padding:"0.9em 1.5em",margin:"0.6em 0",border:"2px solid #e4e7e9",borderRadius:"4px",cursor:"pointer"},iconContainer:{display:"flex",alignItems:"center"},mediaInfo:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"1.5em",minWidth:0,"& p":{margin:0,fontSize:"12px"}},filename:{fontWeight:700,overflow:"hidden",textOverflow:"ellipsis"},size:{fontWeight:400}});function jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=["bytes","KB","MB","GB"];return e<1e3?+e.toFixed(2)+" "+n[t]:jn(e/1024,t+1)}function kn(e){var t=e.media,n=Sn();return r.a.createElement("div",{className:n.messageContainer,onClick:function(){t.getContentTemporaryUrl().then((function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener",setTimeout((function(){t.click()}))}))}},r.a.createElement("div",{className:n.iconContainer},r.a.createElement(On,null)),r.a.createElement("div",{className:n.mediaInfo},r.a.createElement("p",{className:n.filename},t.filename),r.a.createElement("p",{className:n.size},jn(t.size)," - Click to open")))}var xn=function(e){return null===e||void 0===e?void 0:e.dateCreated.toLocaleTimeString("en-us",{hour:"numeric",minute:"numeric"}).toLowerCase()};function yn(e){var t=e.messages,n=I().room.localParticipant;return r.a.createElement(bn,{messages:t},t.map((function(e,a){var i,o=xn(e),c=o!==xn(t[a-1])||e.author!==(null===(i=t[a-1])||void 0===i?void 0:i.author),l=n.identity===e.author;return r.a.createElement(r.a.Fragment,{key:e.sid},c&&r.a.createElement(rn,{author:e.author,isLocalParticipant:l,dateCreated:o}),"text"===e.type&&r.a.createElement(wn,{body:e.body,isLocalParticipant:l}),"media"===e.type&&r.a.createElement(kn,{media:e.media}))})))}var Tn=Object(d.a)((function(e){return Object(m.a)({chatWindowContainer:Object(s.a)({background:"#FFFFFF",zIndex:100,display:"flex",flexDirection:"column",borderLeft:"1px solid #E4E7E9"},e.breakpoints.down("sm"),{position:"fixed",top:0,left:0,bottom:0,right:0}),hide:{display:"none"}})}));function Ln(){var e=Tn(),t=qe(),n=t.isChatWindowOpen,a=t.messages,i=t.conversation;return r.a.createElement("aside",{className:Object(p.a)(e.chatWindowContainer,Object(s.a)({},e.hide,!n))},r.a.createElement(Qt,null),r.a.createElement(yn,{messages:a}),r.a.createElement(nn,{conversation:i,isChatWindowOpen:n}))}var Nn=Object(d.a)({outerContainer:{width:"2em",height:"2em",padding:"0.9em",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"},innerContainer:{display:"flex",alignItems:"flex-end","& div":{width:"2px",marginRight:"1px","&:not(:last-child)":{borderRight:"none"}}}}),Pn=[0,1,2,3,4];function Rn(e){var t=e.participant,n=Nn(),i=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(e){return i(e)};return i(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(t);return null===i?null:r.a.createElement("div",{className:n.outerContainer},r.a.createElement("div",{className:n.innerContainer},Pn.map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:i>e?"white":"rgba(255, 255, 255, 0.2)"}})}))))}var An=n(161);function _n(){return r.a.createElement(nt.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(An.a,{style:{float:"right",background:"rgba(0, 0, 0, 0.5)",padding:"0.1em",boxSizing:"content-box"},width:"26",height:"26",viewBox:"0 0 26 26"},r.a.createElement("path",{fill:"#FFF",fillRule:"evenodd",strokeWidth:"0",d:"M15.808 4.489c.208-.207.544-.207.75 0l4.953 4.952c.207.207.207.543 0 .75l-1.415 1.415c-.207.208-.543.208-.75 0l-.333-.333-3.007 3.007v2.611c0 .113-.035.222-.1.312l-.055.063-1.06 1.062c-.208.207-.544.207-.751 0l-2.809-2.81-5.992 5.993c-.207.207-.543.207-.75 0-.184-.184-.205-.47-.062-.677l.062-.073 5.991-5.993-2.808-2.808c-.184-.184-.204-.47-.061-.677l.061-.073 1.062-1.061c.1-.1.234-.156.375-.156h2.61l3.007-3.007-.332-.332c-.185-.184-.205-.47-.062-.677l.062-.073zm.376 1.125l-.666.664.333.333c.185.184.205.47.062.677l-.062.074-3.537 3.537c-.1.1-.234.155-.375.155h-2.61l-.531.531 2.803 2.803.005.006.005.005 2.804 2.803.53-.531v-2.61c0-.112.036-.221.102-.311l.054-.064 3.537-3.537c.208-.208.544-.208.75 0l.333.332.664-.666-4.201-4.201z"})))}function In(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.isSwitchedOff),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}function Bn(e){var t=Object(a.useState)([]),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){i(Array.from(e.tracks.values()));var t=function(e){return i((function(t){return[].concat(Object(Ke.a)(t),[e])}))},n=function(e){return i((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function Dn(e){var t=Object(a.useState)(e&&e.track),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.track),e){var t=function(){return i(null)};return e.on("subscribed",i),e.on("unsubscribed",t),function(){e.off("subscribed",i),e.off("unsubscribed",t)}}}),[e]),r}function Mn(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){return i(!0)},n=function(){return i(!1)};return n(),e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}var Hn=Object(d.a)((function(e){return Object(m.a)({container:Object(s.a)({position:"relative",display:"flex",alignItems:"center",height:0,overflow:"hidden",marginBottom:"2em","& video":{filter:"none",objectFit:"contain !important"},borderRadius:"4px",border:"".concat(e.participantBorderWidth,"px solid rgb(245, 248, 255)"),paddingTop:"calc(".concat(56.25,"% - ").concat(e.participantBorderWidth,"px)"),background:"black"},e.breakpoints.down("sm"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"8px",marginBottom:"0",fontSize:"10px",paddingTop:"".concat(e.sidebarMobileHeight-2,"px")}),innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},infoContainer:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%",background:"transparent",top:0},avatarContainer:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}}),reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},screenShareIconContainer:{background:"rgba(0, 0, 0, 0.5)",padding:"0.18em 0.3em",marginRight:"0.3em",display:"flex","& path":{fill:"white"}},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRowBottom:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,left:0},typeography:Object(s.a)({color:"white"},e.breakpoints.down("sm"),{fontSize:"0.75rem"}),hideParticipant:{display:"none"},cursorPointer:{cursor:"pointer"}})}));function Wn(e){var t,n=e.participant,a=e.onClick,i=e.isSelected,o=e.children,c=e.isLocalParticipant,l=e.hideParticipant,u=Bn(n),d=u.find((function(e){return"audio"===e.kind})),m=u.find((function(e){return e.trackName.includes("camera")})),f=Boolean(m),v=u.find((function(e){return e.trackName.includes("screen")})),h=In(Dn(m)),b=Dn(d),g=Mn(n),E=Hn();return r.a.createElement("div",{className:Object(p.a)(E.container,(t={},Object(s.a)(t,E.hideParticipant,l),Object(s.a)(t,E.cursorPointer,Boolean(a)),t)),onClick:a,"data-cy-participant":n.identity},r.a.createElement("div",{className:E.infoContainer},r.a.createElement(Rn,{participant:n}),r.a.createElement("div",{className:E.infoRowBottom},v&&r.a.createElement("span",{className:E.screenShareIconContainer},r.a.createElement(tt,null)),r.a.createElement("span",{className:E.identity},r.a.createElement(pe,{audioTrack:b}),r.a.createElement(ve.a,{variant:"body1",className:E.typeography,component:"span"},n.identity,c&&" (You)"))),r.a.createElement("div",null,i&&r.a.createElement(_n,null))),r.a.createElement("div",{className:E.innerContainer},(!f||h)&&r.a.createElement("div",{className:E.avatarContainer},r.a.createElement(dt,null)),g&&r.a.createElement("div",{className:E.reconnectingContainer},r.a.createElement(ve.a,{variant:"body1",className:E.typeography},"Reconnecting...")),o))}function zn(e){var t=e.track,n=re().activeSinkId,r=Object(a.useRef)();return Object(a.useEffect)((function(){return r.current=t.attach(),r.current.setAttribute("data-cy-audio-track-name",t.name),document.body.appendChild(r.current),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),Object(a.useEffect)((function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.setSinkId)||void 0===t||t.call(e,n)}),[n]),null}function Fn(e){var t=e.publication,n=e.isLocalParticipant,a=e.videoOnly,i=e.videoPriority,o=Dn(t);if(!o)return null;switch(o.kind){case"video":return r.a.createElement(Se,{track:o,priority:i,isLocal:o.name.includes("camera")&&n});case"audio":return a?null:r.a.createElement(zn,{track:o});default:return null}}function Vn(e){var t,n=e.participant,a=e.videoOnly,i=e.enableScreenShare,o=e.videoPriority,c=e.isLocalParticipant,l=Bn(n);return t=i&&l.some((function(e){return e.trackName.includes("screen")}))?l.filter((function(e){return!e.trackName.includes("camera")})):l.filter((function(e){return!e.trackName.includes("screen")})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(Fn,{key:e.kind,publication:e,participant:n,isLocalParticipant:c,videoOnly:a,videoPriority:o})})))}function Un(e){var t=e.participant,n=e.videoOnly,a=e.enableScreenShare,i=e.onClick,o=e.isSelected,c=e.isLocalParticipant,l=e.hideParticipant;return r.a.createElement(Wn,{participant:t,onClick:i,isSelected:o,isLocalParticipant:c,hideParticipant:l},r.a.createElement(Vn,{participant:t,videoOnly:n,enableScreenShare:a,isLocalParticipant:c}))}function Kn(){var e,t=I().room,n=Object(a.useState)(null!==(e=null===t||void 0===t?void 0:t.dominantSpeaker)&&void 0!==e?e:null),r=Object(v.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){if(t){var e=function(e){null!==e&&o(e)},n=function(e){o((function(t){return t===e?null:t}))};return t.on("dominantSpeakerChanged",e),t.on("participantDisconnected",n),function(){t.off("dominantSpeakerChanged",e),t.off("participantDisconnected",n)}}}),[t]),i}function Zn(){var e,t=I().room,n=Kn(),r=Object(a.useState)(Array.from(null!==(e=null===t||void 0===t?void 0:t.participants.values())&&void 0!==e?e:[])),i=Object(v.a)(r,2),o=i[0],c=i[1];return Object(a.useEffect)((function(){n&&c((function(e){return[n].concat(Object(Ke.a)(e.filter((function(e){return e!==n}))))}))}),[n]),Object(a.useEffect)((function(){if(t){var e=function(e){return c((function(t){return[].concat(Object(Ke.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return t.on("participantConnected",e),t.on("participantDisconnected",n),function(){t.off("participantConnected",e),t.off("participantDisconnected",n)}}}),[t]),o}function Gn(){var e=b(),t=Object(v.a)(e,1)[0],n=at(),a=Kn(),r=Zn(),i=I().room,o=null===i||void 0===i?void 0:i.localParticipant;return t||(n!==o?n:null)||a||r[0]||o}var Yn=Object(d.a)((function(e){return Object(m.a)({container:Object(s.a)({overflowY:"auto",background:"rgb(79, 83, 85)",gridArea:"1 / 2 / 1 / 3",zIndex:5},e.breakpoints.down("sm"),{gridArea:"2 / 1 / 3 / 3",overflowY:"initial",overflowX:"auto",display:"flex"}),transparentBackground:{background:"transparent"},scrollContainer:{display:"flex",justifyContent:"center"},innerScrollContainer:Object(s.a)({width:"calc(".concat(e.sidebarWidth,"px - 4em)"),padding:"2em 0"},e.breakpoints.down("sm"),{width:"auto",padding:"".concat(e.sidebarMobilePadding,"px"),display:"flex"})})}));function qn(){var e=Yn(),t=I().room.localParticipant,n=Zn(),a=b(),i=Object(v.a)(a,2),o=i[0],c=i[1],l=at(),u=Gn(),d=l&&l!==t;return 0===n.length?null:r.a.createElement("aside",{className:Object(p.a)(e.container,Object(s.a)({},e.transparentBackground,!d))},r.a.createElement("div",{className:e.scrollContainer},r.a.createElement("div",{className:e.innerScrollContainer},r.a.createElement(Un,{participant:t,isLocalParticipant:!0}),n.map((function(e){var t=e===u&&e!==l&&!(e===o);return r.a.createElement(Un,{key:e.sid,participant:e,isSelected:e===o,onClick:function(){return c(e)},hideParticipant:t})})))))}var Jn=Object(d.a)((function(e){return{container:{position:"relative",display:"flex",alignItems:"center"},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.1em 0.3em 0.1em 0",display:"inline-flex","& svg":{marginLeft:"0.3em"},marginRight:"0.4em",alignItems:"center"},infoContainer:{position:"absolute",zIndex:2,height:"100%",width:"100%"},reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},fullWidth:Object(s.a)({gridArea:"1 / 1 / 2 / 3"},e.breakpoints.down("sm"),{gridArea:"1 / 1 / 3 / 3"}),avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,"& svg":{transform:"scale(2)"}}}}));function Qn(e){var t=e.participant,n=e.children,a=Jn(),i=I().room.localParticipant,o=i===t,c=at(),l=c&&c!==i,u=Bn(t),d=u.find((function(e){return e.trackName.includes("camera")})),m=u.find((function(e){return e.trackName.includes("screen")})),f=Dn(m||d),v=Boolean(f),h=Dn(u.find((function(e){return"audio"===e.kind}))),b=In(f),g=Mn(t);return r.a.createElement("div",{"data-cy-main-participant":!0,"data-cy-participant":t.identity,className:Object(p.a)(a.container,Object(s.a)({},a.fullWidth,!l))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:a.identity},r.a.createElement(pe,{audioTrack:h}),r.a.createElement(ve.a,{variant:"body1",color:"inherit"},t.identity,o&&" (You)",m&&" - Screen")),r.a.createElement(Rn,{participant:i}))),(!v||b)&&r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(dt,null)),g&&r.a.createElement("div",{className:a.reconnectingContainer},r.a.createElement(ve.a,{variant:"body1",style:{color:"white"}},"Reconnecting...")),n)}function Xn(){var e=Gn(),t=I().room.localParticipant,n=b(),a=Object(v.a)(n,1)[0],i=at(),o=e!==a&&e!==i||e===t?null:"high";return r.a.createElement(Qn,{participant:e},r.a.createElement(Vn,{participant:e,videoOnly:!0,enableScreenShare:e!==t,videoPriority:o,isLocalParticipant:e===t}))}var $n=Object(d.a)((function(e){var t="".concat(e.sidebarMobileHeight+2*e.sidebarMobilePadding+e.participantBorderWidth,"px");return{container:Object(s.a)({position:"relative",height:"100%",display:"grid",gridTemplateColumns:"1fr ".concat(e.sidebarWidth,"px"),gridTemplateRows:"100%"},e.breakpoints.down("sm"),{gridTemplateColumns:"100%",gridTemplateRows:"calc(100% - ".concat(t,") ").concat(t)}),chatWindowOpen:{gridTemplateColumns:"1fr ".concat(e.sidebarWidth,"px ").concat(e.chatWindowWidth,"px")}}}));function ea(){var e=$n(),t=qe().isChatWindowOpen;return r.a.createElement("div",{className:Object(p.a)(e.container,Object(s.a)({},e.chatWindowOpen,t))},r.a.createElement(Xn,null),r.a.createElement(qn,null),r.a.createElement(Ln,null))}var ta=Object(u.a)("div")({display:"grid",gridTemplateRows:"1fr auto"}),na=Object(u.a)("main")((function(e){var t=e.theme;return Object(s.a)({overflow:"hidden",paddingBottom:"".concat(t.footerHeight,"px"),background:"black"},t.breakpoints.down("sm"),{paddingBottom:"".concat(t.mobileFooterHeight+t.mobileTopBarHeight,"px")})}));function aa(){var e=He(),t=function(){var e,t=Object(a.useState)(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)),n=Object(v.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var e=function(){var e;i(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),r+"px"}();return r.a.createElement(ta,{style:{height:t}},"disconnected"===e?r.a.createElement(Gt,null):r.a.createElement(na,null,r.a.createElement(Yt,null),r.a.createElement(st,null),r.a.createElement(ea,null),r.a.createElement(ct,null)))}var ra=n(97);var ia=function(e){var t=e.dismissError,n=e.error,a=n||{},i=a.message,o=a.code,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(arguments.length>1?arguments[1]:void 0){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(i,o);return r.a.createElement(M.a,{open:null!==n,onClose:function(){return t()},fullWidth:!0,maxWidth:"xs"},r.a.createElement(F.a,null,"ERROR"),r.a.createElement(W.a,null,r.a.createElement(z.a,null,c),Boolean(o)&&r.a.createElement("pre",null,r.a.createElement("code",null,"Error Code: ",o))),r.a.createElement(H.a,null,r.a.createElement(f.a,{onClick:function(){return t()},color:"primary",autoFocus:!0},"OK")))},oa=n(344),ca=n.n(oa);n.p;var la=Object(d.a)((function(e){var t;return{googleButton:(t={background:"white",color:"rgb(0, 94, 166)",borderRadius:"4px",border:"2px solid rgb(2, 122, 197)",margin:"1.8em 0 0.7em",textTransform:"none",boxShadow:"none",padding:"0.3em 1em"},Object(s.a)(t,e.breakpoints.down("sm"),{width:"100%"}),Object(s.a)(t,"&:hover",{background:"white",boxShadow:"none"}),t),errorMessage:{color:"red",display:"flex",alignItems:"center",margin:"1em 0 0.2em","& svg":{marginRight:"0.4em"}},gutterBottom:{marginBottom:"1em"},passcodeContainer:{minHeight:"120px"},submitButton:Object(s.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function sa(){var e=la(),t=re(),n=t.signIn,i=t.user,o=t.isAuthReady,c=Object(Q.g)(),l=Object(Q.h)(),s=Object(a.useState)(""),u=Object(v.a)(s,2),d=u[0],m=u[1],p=Object(a.useState)(null),h=Object(v.a)(p,2),b=h[0],g=h[1],E=Boolean("passcode");return!i&&E||c.replace("/"),o?r.a.createElement(_t,null,!1,r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"h5",className:e.gutterBottom},"Enter passcode to join a room"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g(null),null===n||void 0===n||n(d).then((function(){var e;c.replace((null===l||void 0===l||null===(e=l.state)||void 0===e?void 0:e.from)||{pathname:"/"})})).catch((function(e){return g(e)}))}},r.a.createElement(he.a,{container:!0,justify:"space-between"},r.a.createElement("div",{className:e.passcodeContainer},r.a.createElement(vt.a,{shrink:!0,htmlFor:"input-passcode"},"Passcode"),r.a.createElement(ht.a,{id:"input-passcode",onChange:function(e){return m(e.target.value)},type:"password",variant:"outlined",size:"small"}),r.a.createElement("div",null,b&&r.a.createElement(ve.a,{variant:"caption",className:e.errorMessage},r.a.createElement(ca.a,null),b.message)))),r.a.createElement(he.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!d.length,className:e.submitButton},"Submit"))))):null}var ua=n(348);function da(e){var t=e.children,n=Object(ua.a)(e,["children"]),a=re(),i=a.isAuthReady,o=a.user||!1;return o||i?r.a.createElement(Q.b,Object.assign({},n,{render:function(e){var n=e.location;return o?t:r.a.createElement(Q.a,{to:{pathname:"/login",state:{from:n}}})}})):null}var ma=n(345),fa=Object(ma.a)(),pa=Object(ma.a)({overrides:{MuiCssBaseline:{"@global":{"html, body, #root":{height:"100%"}}},MuiButton:{root:{borderRadius:"4px",textTransform:"none",color:"rgb(40, 42, 43)",fontSize:"0.9rem",transition:fa.transitions.create(["background-color","box-shadow","border","color"],{duration:fa.transitions.duration.short})},text:{padding:"6px 14px"},contained:{boxShadow:"none","&:hover":{boxShadow:"none"}},outlinedPrimary:{border:"2px solid #027AC5","&:hover":{border:"2px solid rgb(1, 85, 137)"}},startIcon:{marginRight:"6px"}},MuiTypography:{body1:{color:"rgb(40, 42, 43)",fontSize:"0.9rem"}},MuiInputBase:{root:{fontSize:"0.9rem"}},MuiSelect:{root:{padding:"0.85em"}},MuiDialogActions:{root:{padding:"16px"}},MuiTextField:{root:{color:"rgb(40, 42, 43)"}},MuiInputLabel:{root:{color:"rgb(40, 42, 43)",fontSize:"1.1rem",marginBottom:"0.2em",fontWeight:500}},MuiOutlinedInput:{notchedOutline:{borderColor:"rgb(136, 140, 142)"}}},typography:{fontFamily:"Inter, sans-serif"},palette:{primary:{main:"#027AC5"}},brand:"#E22525",footerHeight:72,mobileFooterHeight:56,sidebarWidth:355,sidebarMobileHeight:90,sidebarMobilePadding:8,participantBorderWidth:2,mobileTopBarHeight:52,chatWindowWidth:320});function va(){var e,t=re(),n=t.roomType,a=t.settings,r={bandwidthProfile:{video:{mode:a.bandwidthProfileMode,dominantSpeakerPriority:a.dominantSpeakerPriority,renderDimensions:{low:gt(a.renderDimensionLow),standard:gt(a.renderDimensionStandard),high:gt(a.renderDimensionHigh)},maxTracks:Number(a.maxTracks),trackSwitchOffMode:a.trackSwitchOffMode}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(a.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==n&&"go"!==n}],environment:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_TWILIO_ENVIRONMENT};return w&&(null===r||void 0===r||null===(e=r.bandwidthProfile)||void 0===e?void 0:e.video)&&(r.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_TWILIO_ENVIRONMENT&&(r.wsServer="wss://us2.vss.dev.twilio.com/signaling"),O(r)}var ha=n(724),ba=n(708),ga=Object(d.a)({container:{marginTop:"2.5em"},paper:{padding:"1em"},heading:{marginBottom:"0.4em"}});function Ea(e){var t=e.children,n=ga();return P.a.isSupported?t:r.a.createElement(ha.a,null,r.a.createElement(he.a,{container:!0,justify:"center",className:n.container},r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{className:n.paper},r.a.createElement(ve.a,{variant:"h4",className:n.heading},"Browser or context not supported"),r.a.createElement(ve.a,null,"Please open this application in one of the"," ",r.a.createElement(Lt.a,{href:"https://www.twilio.com/docs/video/javascript#supported-browsers",target:"_blank",rel:"noopener"},"supported browsers"),".",r.a.createElement("br",null),"If you are using a supported browser, please ensure that this app is served over a"," ",r.a.createElement(Lt.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener"},"secure context")," ","(e.g. https or localhost).")))))}var Ca=function(){var e=re(),t=e.error,n=e.setError,a=va();return r.a.createElement(_,{options:a,onError:n},r.a.createElement(ia,{dismissError:function(){return n(null)},error:t}),r.a.createElement(Ye,null,r.a.createElement(aa,null)))};o.a.render(r.a.createElement(l.a,{theme:pa},r.a.createElement(c.a,null),r.a.createElement(Ea,null,r.a.createElement(ra.a,null,r.a.createElement(ae,null,r.a.createElement(Q.d,null,r.a.createElement(da,{exact:!0,path:"/"},r.a.createElement(Ca,null)),r.a.createElement(da,{path:"/room/:URLRoomName"},r.a.createElement(Ca,null)),r.a.createElement(Q.b,{path:"/login"},r.a.createElement(sa,null)),r.a.createElement(Q.a,{to:"/"})))))),document.getElementById("root"))}},[[669,1,2]]]);
//# sourceMappingURL=main.a2be6a8d.chunk.js.map